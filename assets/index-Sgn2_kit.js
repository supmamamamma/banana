(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function o(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(u){if(u.ep)return;u.ep=!0;const f=o(u);fetch(u.href,f)}})();var pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Nu={exports:{}},Hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function Y0(){if(Am)return Hl;Am=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function o(l,u,f){var d=null;if(f!==void 0&&(d=""+f),u.key!==void 0&&(d=""+u.key),"key"in u){f={};for(var h in u)h!=="key"&&(f[h]=u[h])}else f=u;return u=f.ref,{$$typeof:n,type:l,key:d,ref:u!==void 0?u:null,props:f}}return Hl.Fragment=e,Hl.jsx=o,Hl.jsxs=o,Hl}var Mm;function J0(){return Mm||(Mm=1,Nu.exports=Y0()),Nu.exports}var x=J0(),Du={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function X0(){if(Rm)return Ye;Rm=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),C=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=C&&V[C]||V["@@iterator"],typeof V=="function"?V:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function N(V,F,J){this.props=V,this.context=F,this.refs=_,this.updater=J||T}N.prototype.isReactComponent={},N.prototype.setState=function(V,F){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,F,"setState")},N.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function R(){}R.prototype=N.prototype;function k(V,F,J){this.props=V,this.context=F,this.refs=_,this.updater=J||T}var I=k.prototype=new R;I.constructor=k,w(I,N.prototype),I.isPureReactComponent=!0;var H=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function P(V,F,J,pe,$,X){return J=X.ref,{$$typeof:n,type:V,key:F,ref:J!==void 0?J:null,props:X}}function Y(V,F){return P(V.type,F,void 0,void 0,void 0,V.props)}function B(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function q(V){var F={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(J){return F[J]})}var le=/\/+/g;function z(V,F){return typeof V=="object"&&V!==null&&V.key!=null?q(""+V.key):F.toString(36)}function W(){}function M(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(W,W):(V.status="pending",V.then(function(F){V.status==="pending"&&(V.status="fulfilled",V.value=F)},function(F){V.status==="pending"&&(V.status="rejected",V.reason=F)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Z(V,F,J,pe,$){var X=typeof V;(X==="undefined"||X==="boolean")&&(V=null);var ne=!1;if(V===null)ne=!0;else switch(X){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(V.$$typeof){case n:case e:ne=!0;break;case v:return ne=V._init,Z(ne(V._payload),F,J,pe,$)}}if(ne)return $=$(V),ne=pe===""?"."+z(V,0):pe,H($)?(J="",ne!=null&&(J=ne.replace(le,"$&/")+"/"),Z($,F,J,"",function(te){return te})):$!=null&&(B($)&&($=Y($,J+($.key==null||V&&V.key===$.key?"":(""+$.key).replace(le,"$&/")+"/")+ne)),F.push($)),1;ne=0;var be=pe===""?".":pe+":";if(H(V))for(var ve=0;ve<V.length;ve++)pe=V[ve],X=be+z(pe,ve),ne+=Z(pe,F,J,X,$);else if(ve=S(V),typeof ve=="function")for(V=ve.call(V),ve=0;!(pe=V.next()).done;)pe=pe.value,X=be+z(pe,ve++),ne+=Z(pe,F,J,X,$);else if(X==="object"){if(typeof V.then=="function")return Z(M(V),F,J,pe,$);throw F=String(V),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ne}function O(V,F,J){if(V==null)return V;var pe=[],$=0;return Z(V,pe,"","",function(X){return F.call(J,X,$++)}),pe}function j(V){if(V._status===-1){var F=V._result;F=F(),F.then(function(J){(V._status===0||V._status===-1)&&(V._status=1,V._result=J)},function(J){(V._status===0||V._status===-1)&&(V._status=2,V._result=J)}),V._status===-1&&(V._status=0,V._result=F)}if(V._status===1)return V._result.default;throw V._result}var Se=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function de(){}return Ye.Children={map:O,forEach:function(V,F,J){O(V,function(){F.apply(this,arguments)},J)},count:function(V){var F=0;return O(V,function(){F++}),F},toArray:function(V){return O(V,function(F){return F})||[]},only:function(V){if(!B(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ye.Component=N,Ye.Fragment=o,Ye.Profiler=u,Ye.PureComponent=k,Ye.StrictMode=l,Ye.Suspense=g,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(V){return A.H.useMemoCache(V)}},Ye.cache=function(V){return function(){return V.apply(null,arguments)}},Ye.cloneElement=function(V,F,J){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var pe=w({},V.props),$=V.key,X=void 0;if(F!=null)for(ne in F.ref!==void 0&&(X=void 0),F.key!==void 0&&($=""+F.key),F)!U.call(F,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&F.ref===void 0||(pe[ne]=F[ne]);var ne=arguments.length-2;if(ne===1)pe.children=J;else if(1<ne){for(var be=Array(ne),ve=0;ve<ne;ve++)be[ve]=arguments[ve+2];pe.children=be}return P(V.type,$,void 0,void 0,X,pe)},Ye.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:f,_context:V},V},Ye.createElement=function(V,F,J){var pe,$={},X=null;if(F!=null)for(pe in F.key!==void 0&&(X=""+F.key),F)U.call(F,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&($[pe]=F[pe]);var ne=arguments.length-2;if(ne===1)$.children=J;else if(1<ne){for(var be=Array(ne),ve=0;ve<ne;ve++)be[ve]=arguments[ve+2];$.children=be}if(V&&V.defaultProps)for(pe in ne=V.defaultProps,ne)$[pe]===void 0&&($[pe]=ne[pe]);return P(V,X,void 0,void 0,null,$)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(V){return{$$typeof:h,render:V}},Ye.isValidElement=B,Ye.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:j}},Ye.memo=function(V,F){return{$$typeof:p,type:V,compare:F===void 0?null:F}},Ye.startTransition=function(V){var F=A.T,J={};A.T=J;try{var pe=V(),$=A.S;$!==null&&$(J,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(de,Se)}catch(X){Se(X)}finally{A.T=F}},Ye.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ye.use=function(V){return A.H.use(V)},Ye.useActionState=function(V,F,J){return A.H.useActionState(V,F,J)},Ye.useCallback=function(V,F){return A.H.useCallback(V,F)},Ye.useContext=function(V){return A.H.useContext(V)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(V,F){return A.H.useDeferredValue(V,F)},Ye.useEffect=function(V,F,J){var pe=A.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return pe.useEffect(V,F)},Ye.useId=function(){return A.H.useId()},Ye.useImperativeHandle=function(V,F,J){return A.H.useImperativeHandle(V,F,J)},Ye.useInsertionEffect=function(V,F){return A.H.useInsertionEffect(V,F)},Ye.useLayoutEffect=function(V,F){return A.H.useLayoutEffect(V,F)},Ye.useMemo=function(V,F){return A.H.useMemo(V,F)},Ye.useOptimistic=function(V,F){return A.H.useOptimistic(V,F)},Ye.useReducer=function(V,F,J){return A.H.useReducer(V,F,J)},Ye.useRef=function(V){return A.H.useRef(V)},Ye.useState=function(V){return A.H.useState(V)},Ye.useSyncExternalStore=function(V,F,J){return A.H.useSyncExternalStore(V,F,J)},Ye.useTransition=function(){return A.H.useTransition()},Ye.version="19.1.1",Ye}var Nm;function ju(){return Nm||(Nm=1,Du.exports=X0()),Du.exports}var ae=ju();const K0=Qu(ae);var ku={exports:{}},ql={},Iu={exports:{}},Uu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function Z0(){return Dm||(Dm=1,(function(n){function e(O,j){var Se=O.length;O.push(j);e:for(;0<Se;){var de=Se-1>>>1,V=O[de];if(0<u(V,j))O[de]=j,O[Se]=V,Se=de;else break e}}function o(O){return O.length===0?null:O[0]}function l(O){if(O.length===0)return null;var j=O[0],Se=O.pop();if(Se!==j){O[0]=Se;e:for(var de=0,V=O.length,F=V>>>1;de<F;){var J=2*(de+1)-1,pe=O[J],$=J+1,X=O[$];if(0>u(pe,Se))$<V&&0>u(X,pe)?(O[de]=X,O[$]=Se,de=$):(O[de]=pe,O[J]=Se,de=J);else if($<V&&0>u(X,Se))O[de]=X,O[$]=Se,de=$;else break e}}return j}function u(O,j){var Se=O.sortIndex-j.sortIndex;return Se!==0?Se:O.id-j.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var g=[],p=[],v=1,C=null,S=3,T=!1,w=!1,_=!1,N=!1,R=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function H(O){for(var j=o(p);j!==null;){if(j.callback===null)l(p);else if(j.startTime<=O)l(p),j.sortIndex=j.expirationTime,e(g,j);else break;j=o(p)}}function A(O){if(_=!1,H(O),!w)if(o(g)!==null)w=!0,U||(U=!0,z());else{var j=o(p);j!==null&&Z(A,j.startTime-O)}}var U=!1,P=-1,Y=5,B=-1;function q(){return N?!0:!(n.unstable_now()-B<Y)}function le(){if(N=!1,U){var O=n.unstable_now();B=O;var j=!0;try{e:{w=!1,_&&(_=!1,k(P),P=-1),T=!0;var Se=S;try{t:{for(H(O),C=o(g);C!==null&&!(C.expirationTime>O&&q());){var de=C.callback;if(typeof de=="function"){C.callback=null,S=C.priorityLevel;var V=de(C.expirationTime<=O);if(O=n.unstable_now(),typeof V=="function"){C.callback=V,H(O),j=!0;break t}C===o(g)&&l(g),H(O)}else l(g);C=o(g)}if(C!==null)j=!0;else{var F=o(p);F!==null&&Z(A,F.startTime-O),j=!1}}break e}finally{C=null,S=Se,T=!1}j=void 0}}finally{j?z():U=!1}}}var z;if(typeof I=="function")z=function(){I(le)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,M=W.port2;W.port1.onmessage=le,z=function(){M.postMessage(null)}}else z=function(){R(le,0)};function Z(O,j){P=R(function(){O(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(O){switch(S){case 1:case 2:case 3:var j=3;break;default:j=S}var Se=S;S=j;try{return O()}finally{S=Se}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(O,j){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Se=S;S=O;try{return j()}finally{S=Se}},n.unstable_scheduleCallback=function(O,j,Se){var de=n.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?de+Se:de):Se=de,O){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Se+V,O={id:v++,callback:j,priorityLevel:O,startTime:Se,expirationTime:V,sortIndex:-1},Se>de?(O.sortIndex=Se,e(p,O),o(g)===null&&O===o(p)&&(_?(k(P),P=-1):_=!0,Z(A,Se-de))):(O.sortIndex=V,e(g,O),w||T||(w=!0,U||(U=!0,z()))),O},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(O){var j=S;return function(){var Se=S;S=j;try{return O.apply(this,arguments)}finally{S=Se}}}})(Uu)),Uu}var km;function $0(){return km||(km=1,Iu.exports=Z0()),Iu.exports}var Pu={exports:{}},Ot={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function Q0(){if(Im)return Ot;Im=1;var n=ju();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var l={d:{f:o,r:function(){throw Error(e(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(g,p,v){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:C==null?null:""+C,children:g,containerInfo:p,implementation:v}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Ot.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return f(g,p,null,v)},Ot.flushSync=function(g){var p=d.T,v=l.p;try{if(d.T=null,l.p=2,g)return g()}finally{d.T=p,l.p=v,l.d.f()}},Ot.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(g,p))},Ot.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},Ot.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,C=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?l.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:C,integrity:S,fetchPriority:T}):v==="script"&&l.d.X(g,{crossOrigin:C,integrity:S,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Ot.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);l.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(g)},Ot.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,C=h(v,p.crossOrigin);l.d.L(g,v,{crossOrigin:C,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Ot.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);l.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(g)},Ot.requestFormReset=function(g){l.d.r(g)},Ot.unstable_batchedUpdates=function(g,p){return g(p)},Ot.useFormState=function(g,p,v){return d.H.useFormState(g,p,v)},Ot.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ot.version="19.1.1",Ot}var Um;function j0(){if(Um)return Pu.exports;Um=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pu.exports=Q0(),Pu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function W0(){if(Pm)return ql;Pm=1;var n=$0(),e=ju(),o=j0();function l(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function f(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function h(t){if(f(t)!==t)throw Error(l(188))}function g(t){var i=t.alternate;if(!i){if(i=f(t),i===null)throw Error(l(188));return i!==t?null:t}for(var a=t,c=i;;){var m=a.return;if(m===null)break;var y=m.alternate;if(y===null){if(c=m.return,c!==null){a=c;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===a)return h(m),t;if(y===c)return h(m),i;y=y.sibling}throw Error(l(188))}if(a.return!==c.return)a=m,c=y;else{for(var E=!1,D=m.child;D;){if(D===a){E=!0,a=m,c=y;break}if(D===c){E=!0,c=m,a=y;break}D=D.sibling}if(!E){for(D=y.child;D;){if(D===a){E=!0,a=y,c=m;break}if(D===c){E=!0,c=y,a=m;break}D=D.sibling}if(!E)throw Error(l(189))}}if(a.alternate!==c)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?t:i}function p(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=p(t),i!==null)return i;t=t.sibling}return null}var v=Object.assign,C=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),I=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=le&&t[le]||t["@@iterator"],typeof t=="function"?t:null)}var W=Symbol.for("react.client.reference");function M(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===W?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case w:return"Fragment";case N:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case U:return"SuspenseList";case B:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case I:return(t.displayName||"Context")+".Provider";case k:return(t._context.displayName||"Context")+".Consumer";case H:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return i=t.displayName||null,i!==null?i:M(t.type)||"Memo";case Y:i=t._payload,t=t._init;try{return M(t(i))}catch{}}return null}var Z=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},de=[],V=-1;function F(t){return{current:t}}function J(t){0>V||(t.current=de[V],de[V]=null,V--)}function pe(t,i){V++,de[V]=t.current,t.current=i}var $=F(null),X=F(null),ne=F(null),be=F(null);function ve(t,i){switch(pe(ne,i),pe(X,t),pe($,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?tm(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=tm(i),t=nm(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J($),pe($,t)}function te(){J($),J(X),J(ne)}function Ee(t){t.memoizedState!==null&&pe(be,t);var i=$.current,a=nm(i,t.type);i!==a&&(pe(X,t),pe($,a))}function Ne(t){X.current===t&&(J($),J(X)),be.current===t&&(J(be),Ll._currentValue=Se)}var Le=Object.prototype.hasOwnProperty,qe=n.unstable_scheduleCallback,b=n.unstable_cancelCallback,ge=n.unstable_shouldYield,he=n.unstable_requestPaint,G=n.unstable_now,L=n.unstable_getCurrentPriorityLevel,ee=n.unstable_ImmediatePriority,xe=n.unstable_UserBlockingPriority,Te=n.unstable_NormalPriority,re=n.unstable_LowPriority,Ae=n.unstable_IdlePriority,De=n.log,Me=n.unstable_setDisableYieldValue,Ue=null,Fe=null;function He(t){if(typeof De=="function"&&Me(t),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(Ue,t)}catch{}}var je=Math.clz32?Math.clz32:fn,cn=Math.log,Et=Math.LN2;function fn(t){return t>>>=0,t===0?32:31-(cn(t)/Et|0)|0}var et=256,dn=4194304;function tn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ct(t,i,a){var c=t.pendingLanes;if(c===0)return 0;var m=0,y=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var D=c&134217727;return D!==0?(c=D&~y,c!==0?m=tn(c):(E&=D,E!==0?m=tn(E):a||(a=D&~t,a!==0&&(m=tn(a))))):(D=c&~y,D!==0?m=tn(D):E!==0?m=tn(E):a||(a=c&~t,a!==0&&(m=tn(a)))),m===0?0:i!==0&&i!==m&&(i&y)===0&&(y=m&-m,a=i&-i,y>=a||y===32&&(a&4194048)!==0)?i:m}function Rt(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Kt(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wn(){var t=et;return et<<=1,(et&4194048)===0&&(et=256),t}function Wi(){var t=dn;return dn<<=1,(dn&62914560)===0&&(dn=4194304),t}function Nn(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function gt(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Jt(t,i,a,c,m,y){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var D=t.entanglements,K=t.expirationTimes,ue=t.hiddenUpdates;for(a=E&~a;0<a;){var ye=31-je(a),_e=1<<ye;D[ye]=0,K[ye]=-1;var ce=ue[ye];if(ce!==null)for(ue[ye]=null,ye=0;ye<ce.length;ye++){var me=ce[ye];me!==null&&(me.lane&=-536870913)}a&=~_e}c!==0&&Kl(t,c,0),y!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=y&~(E&~i))}function Kl(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var c=31-je(i);t.entangledLanes|=i,t.entanglements[c]=t.entanglements[c]|1073741824|a&4194090}function eo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var c=31-je(a),m=1<<c;m&i|t[c]&i&&(t[c]|=i),a&=~m}}function Lt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function mn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Xe(){var t=j.p;return t!==0?t:(t=window.event,t===void 0?32:Sm(t.type))}function Zl(t,i){var a=j.p;try{return j.p=t,i()}finally{j.p=a}}var _n=Math.random().toString(36).slice(2),Nt="__reactFiber$"+_n,qt="__reactProps$"+_n,ei="__reactContainer$"+_n,to="__reactEvents$"+_n,Nr="__reactListeners$"+_n,$l="__reactHandles$"+_n,Oo="__reactResources$"+_n,Dn="__reactMarker$"+_n;function no(t){delete t[Nt],delete t[qt],delete t[to],delete t[Nr],delete t[$l]}function ti(t){var i=t[Nt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[ei]||a[Nt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=am(t);t!==null;){if(a=t[Nt])return a;t=am(t)}return i}t=a,a=t.parentNode}return null}function ni(t){if(t=t[Nt]||t[ei]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ki(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(l(33))}function ii(t){var i=t[Oo];return i||(i=t[Oo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xt(t){t[Dn]=!0}var Ql=new Set,Yo={};function Bn(t,i){oi(t,i),oi(t+"Capture",i)}function oi(t,i){for(Yo[t]=i,t=0;t<i.length;t++)Ql.add(i[t])}var Dr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jl={},Wl={};function ea(t){return Le.call(Wl,t)?!0:Le.call(jl,t)?!1:Dr.test(t)?Wl[t]=!0:(jl[t]=!0,!1)}function Ii(t,i,a){if(ea(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function io(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function wn(t,i,a,c){if(c===null)t.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+c)}}var Jo,ta;function li(t){if(Jo===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Jo=i&&i[1]||"",ta=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jo+t+ta}var Xo=!1;function Ko(t,i){if(!t||Xo)return"";Xo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(me){var ce=me}Reflect.construct(t,[],_e)}else{try{_e.call()}catch(me){ce=me}t.call(_e.prototype)}}else{try{throw Error()}catch(me){ce=me}(_e=t())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(me){if(me&&ce&&typeof me.stack=="string")return[me.stack,ce.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),E=y[0],D=y[1];if(E&&D){var K=E.split(`
`),ue=D.split(`
`);for(m=c=0;c<K.length&&!K[c].includes("DetermineComponentFrameRoot");)c++;for(;m<ue.length&&!ue[m].includes("DetermineComponentFrameRoot");)m++;if(c===K.length||m===ue.length)for(c=K.length-1,m=ue.length-1;1<=c&&0<=m&&K[c]!==ue[m];)m--;for(;1<=c&&0<=m;c--,m--)if(K[c]!==ue[m]){if(c!==1||m!==1)do if(c--,m--,0>m||K[c]!==ue[m]){var ye=`
`+K[c].replace(" at new "," at ");return t.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",t.displayName)),ye}while(1<=c&&0<=m);break}}}finally{Xo=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?li(a):""}function na(t){switch(t.tag){case 26:case 27:case 5:return li(t.type);case 16:return li("Lazy");case 13:return li("Suspense");case 19:return li("SuspenseList");case 0:case 15:return Ko(t.type,!1);case 11:return Ko(t.type.render,!1);case 1:return Ko(t.type,!0);case 31:return li("Activity");default:return""}}function ia(t){try{var i="";do i+=na(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function oa(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function kr(t){var i=oa(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),c=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,y=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return m.call(this)},set:function(E){c=""+E,y.call(this,E)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function oo(t){t._valueTracker||(t._valueTracker=kr(t))}function la(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return t&&(c=oa(t)?t.checked?"true":"false":t.value),t=c,t!==a?(i.setValue(t),!0):!1}function lo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ir=/[\n"\\]/g;function $t(t){return t.replace(Ir,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Zo(t,i,a,c,m,y,E,D){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),i!=null?E==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Zt(i)):t.value!==""+Zt(i)&&(t.value=""+Zt(i)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),i!=null?$o(t,E,Zt(i)):a!=null?$o(t,E,Zt(a)):c!=null&&t.removeAttribute("value"),m==null&&y!=null&&(t.defaultChecked=!!y),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?t.name=""+Zt(D):t.removeAttribute("name")}function aa(t,i,a,c,m,y,E,D){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.type=y),i!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||i!=null))return;a=a!=null?""+Zt(a):"",i=i!=null?""+Zt(i):a,D||i===t.value||(t.value=i),t.defaultValue=i}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=D?t.checked:!!c,t.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function $o(t,i,a){i==="number"&&lo(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ai(t,i,a,c){if(t=t.options,i){i={};for(var m=0;m<a.length;m++)i["$"+a[m]]=!0;for(a=0;a<t.length;a++)m=i.hasOwnProperty("$"+t[a].value),t[a].selected!==m&&(t[a].selected=m),m&&c&&(t[a].defaultSelected=!0)}else{for(a=""+Zt(a),i=null,m=0;m<t.length;m++){if(t[m].value===a){t[m].selected=!0,c&&(t[m].defaultSelected=!0);return}i!==null||t[m].disabled||(i=t[m])}i!==null&&(i.selected=!0)}}function ra(t,i,a){if(i!=null&&(i=""+Zt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Zt(a):""}function sa(t,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(l(92));if(Z(c)){if(1<c.length)throw Error(l(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=Zt(i),t.defaultValue=a,c=t.textContent,c===a&&c!==""&&c!==null&&(t.value=c)}function ri(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ic=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ua(t,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":c?t.setProperty(i,a):typeof a!="number"||a===0||ic.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function oe(t,i,a){if(i!=null&&typeof i!="object")throw Error(l(62));if(t=t.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var m in i)c=i[m],i.hasOwnProperty(m)&&a[m]!==c&&ua(t,m,c)}else for(var y in i)i.hasOwnProperty(y)&&ua(t,y,i[y])}function fe(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Re=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ge(t){return Re.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Oe=null;function it(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tt=null,ot=null;function Dt(t){var i=ni(t);if(i&&(t=i.stateNode)){var a=t[qt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Zo(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+$t(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==t&&c.form===t.form){var m=c[qt]||null;if(!m)throw Error(l(90));Zo(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===t.form&&la(c)}break e;case"textarea":ra(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&ai(t,!!a.multiple,i,!1)}}}var hn=!1;function kt(t,i,a){if(hn)return t(i,a);hn=!0;try{var c=t(i);return c}finally{if(hn=!1,(Tt!==null||ot!==null)&&(Ka(),Tt&&(i=Tt,t=ot,ot=Tt=null,Dt(i),t)))for(i=0;i<t.length;i++)Dt(t[i])}}function zt(t,i){var a=t.stateNode;if(a===null)return null;var c=a[qt]||null;if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(l(231,i,typeof a));return a}var _t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bt=!1;if(_t)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{Bt=!1}var En=null,Ur=null,ca=null;function oc(){if(ca)return ca;var t,i=Ur,a=i.length,c,m="value"in En?En.value:En.textContent,y=m.length;for(t=0;t<a&&i[t]===m[t];t++);var E=a-t;for(c=1;c<=E&&i[a-c]===m[y-c];c++);return ca=m.slice(t,1<c?1-c:void 0)}function fa(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function da(){return!0}function lc(){return!1}function Qt(t){function i(a,c,m,y,E){this._reactName=a,this._targetInst=m,this.type=c,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var D in t)t.hasOwnProperty(D)&&(a=t[D],this[D]=a?a(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?da:lc,this.isPropagationStopped=lc,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=da)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=da)},persist:function(){},isPersistent:da}),i}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ma=Qt(Ui),Qo=v({},Ui,{view:0,detail:0}),Yp=Qt(Qo),Pr,Lr,jo,ha=v({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Br,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jo&&(jo&&t.type==="mousemove"?(Pr=t.screenX-jo.screenX,Lr=t.screenY-jo.screenY):Lr=Pr=0,jo=t),Pr)},movementY:function(t){return"movementY"in t?t.movementY:Lr}}),ac=Qt(ha),Jp=v({},ha,{dataTransfer:0}),Xp=Qt(Jp),Kp=v({},Qo,{relatedTarget:0}),zr=Qt(Kp),Zp=v({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),$p=Qt(Zp),Qp=v({},Ui,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jp=Qt(Qp),Wp=v({},Ui,{data:0}),rc=Qt(Wp),eg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ng={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ig(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=ng[t])?!!i[t]:!1}function Br(){return ig}var og=v({},Qo,{key:function(t){if(t.key){var i=eg[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=fa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Br,charCode:function(t){return t.type==="keypress"?fa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lg=Qt(og),ag=v({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=Qt(ag),rg=v({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Br}),sg=Qt(rg),ug=v({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),cg=Qt(ug),fg=v({},ha,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dg=Qt(fg),mg=v({},Ui,{newState:0,oldState:0}),hg=Qt(mg),pg=[9,13,27,32],Gr=_t&&"CompositionEvent"in window,Wo=null;_t&&"documentMode"in document&&(Wo=document.documentMode);var gg=_t&&"TextEvent"in window&&!Wo,uc=_t&&(!Gr||Wo&&8<Wo&&11>=Wo),cc=" ",fc=!1;function dc(t,i){switch(t){case"keyup":return pg.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ao=!1;function yg(t,i){switch(t){case"compositionend":return mc(i);case"keypress":return i.which!==32?null:(fc=!0,cc);case"textInput":return t=i.data,t===cc&&fc?null:t;default:return null}}function vg(t,i){if(ao)return t==="compositionend"||!Gr&&dc(t,i)?(t=oc(),ca=Ur=En=null,ao=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return uc&&i.locale!=="ko"?null:i.data;default:return null}}var xg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hc(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!xg[t.type]:i==="textarea"}function pc(t,i,a,c){Tt?ot?ot.push(c):ot=[c]:Tt=c,i=er(i,"onChange"),0<i.length&&(a=new ma("onChange","change",null,a,c),t.push({event:a,listeners:i}))}var el=null,tl=null;function Cg(t){$d(t,0)}function pa(t){var i=ki(t);if(la(i))return t}function gc(t,i){if(t==="change")return i}var yc=!1;if(_t){var Vr;if(_t){var Hr="oninput"in document;if(!Hr){var vc=document.createElement("div");vc.setAttribute("oninput","return;"),Hr=typeof vc.oninput=="function"}Vr=Hr}else Vr=!1;yc=Vr&&(!document.documentMode||9<document.documentMode)}function xc(){el&&(el.detachEvent("onpropertychange",Cc),tl=el=null)}function Cc(t){if(t.propertyName==="value"&&pa(tl)){var i=[];pc(i,tl,t,it(t)),kt(Cg,i)}}function Sg(t,i,a){t==="focusin"?(xc(),el=i,tl=a,el.attachEvent("onpropertychange",Cc)):t==="focusout"&&xc()}function Tg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pa(tl)}function _g(t,i){if(t==="click")return pa(i)}function wg(t,i){if(t==="input"||t==="change")return pa(i)}function bg(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var nn=typeof Object.is=="function"?Object.is:bg;function nl(t,i){if(nn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var m=a[c];if(!Le.call(i,m)||!nn(t[m],i[m]))return!1}return!0}function Sc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tc(t,i){var a=Sc(t);t=0;for(var c;a;){if(a.nodeType===3){if(c=t+a.textContent.length,t<=i&&c>=i)return{node:a,offset:i-t};t=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Sc(a)}}function _c(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?_c(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function wc(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=lo(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=lo(t.document)}return i}function qr(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Eg=_t&&"documentMode"in document&&11>=document.documentMode,ro=null,Fr=null,il=null,Or=!1;function bc(t,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Or||ro==null||ro!==lo(c)||(c=ro,"selectionStart"in c&&qr(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),il&&nl(il,c)||(il=c,c=er(Fr,"onSelect"),0<c.length&&(i=new ma("onSelect","select",null,i,a),t.push({event:i,listeners:c}),i.target=ro)))}function Pi(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var so={animationend:Pi("Animation","AnimationEnd"),animationiteration:Pi("Animation","AnimationIteration"),animationstart:Pi("Animation","AnimationStart"),transitionrun:Pi("Transition","TransitionRun"),transitionstart:Pi("Transition","TransitionStart"),transitioncancel:Pi("Transition","TransitionCancel"),transitionend:Pi("Transition","TransitionEnd")},Yr={},Ec={};_t&&(Ec=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function Li(t){if(Yr[t])return Yr[t];if(!so[t])return t;var i=so[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ec)return Yr[t]=i[a];return t}var Ac=Li("animationend"),Mc=Li("animationiteration"),Rc=Li("animationstart"),Ag=Li("transitionrun"),Mg=Li("transitionstart"),Rg=Li("transitioncancel"),Nc=Li("transitionend"),Dc=new Map,Jr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jr.push("scrollEnd");function An(t,i){Dc.set(t,i),Bn(i,[t])}var kc=new WeakMap;function pn(t,i){if(typeof t=="object"&&t!==null){var a=kc.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ia(i)},kc.set(t,i),i)}return{value:t,source:i,stack:ia(i)}}var gn=[],uo=0,Xr=0;function ga(){for(var t=uo,i=Xr=uo=0;i<t;){var a=gn[i];gn[i++]=null;var c=gn[i];gn[i++]=null;var m=gn[i];gn[i++]=null;var y=gn[i];if(gn[i++]=null,c!==null&&m!==null){var E=c.pending;E===null?m.next=m:(m.next=E.next,E.next=m),c.pending=m}y!==0&&Ic(a,m,y)}}function ya(t,i,a,c){gn[uo++]=t,gn[uo++]=i,gn[uo++]=a,gn[uo++]=c,Xr|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function Kr(t,i,a,c){return ya(t,i,a,c),va(t)}function co(t,i){return ya(t,null,null,i),va(t)}function Ic(t,i,a){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a);for(var m=!1,y=t.return;y!==null;)y.childLanes|=a,c=y.alternate,c!==null&&(c.childLanes|=a),y.tag===22&&(t=y.stateNode,t===null||t._visibility&1||(m=!0)),t=y,y=y.return;return t.tag===3?(y=t.stateNode,m&&i!==null&&(m=31-je(a),t=y.hiddenUpdates,c=t[m],c===null?t[m]=[i]:c.push(i),i.lane=a|536870912),y):null}function va(t){if(50<Ml)throw Ml=0,eu=null,Error(l(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var fo={};function Ng(t,i,a,c){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,i,a,c){return new Ng(t,i,a,c)}function Zr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gn(t,i){var a=t.alternate;return a===null?(a=on(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Uc(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function xa(t,i,a,c,m,y){var E=0;if(c=t,typeof t=="function")Zr(t)&&(E=1);else if(typeof t=="string")E=k0(t,a,$.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case B:return t=on(31,a,i,m),t.elementType=B,t.lanes=y,t;case w:return zi(a.children,m,y,i);case _:E=8,m|=24;break;case N:return t=on(12,a,i,m|2),t.elementType=N,t.lanes=y,t;case A:return t=on(13,a,i,m),t.elementType=A,t.lanes=y,t;case U:return t=on(19,a,i,m),t.elementType=U,t.lanes=y,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:case I:E=10;break e;case k:E=9;break e;case H:E=11;break e;case P:E=14;break e;case Y:E=16,c=null;break e}E=29,a=Error(l(130,t===null?"null":typeof t,"")),c=null}return i=on(E,a,i,m),i.elementType=t,i.type=c,i.lanes=y,i}function zi(t,i,a,c){return t=on(7,t,c,i),t.lanes=a,t}function $r(t,i,a){return t=on(6,t,null,i),t.lanes=a,t}function Qr(t,i,a){return i=on(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var mo=[],ho=0,Ca=null,Sa=0,yn=[],vn=0,Bi=null,Vn=1,Hn="";function Gi(t,i){mo[ho++]=Sa,mo[ho++]=Ca,Ca=t,Sa=i}function Pc(t,i,a){yn[vn++]=Vn,yn[vn++]=Hn,yn[vn++]=Bi,Bi=t;var c=Vn;t=Hn;var m=32-je(c)-1;c&=~(1<<m),a+=1;var y=32-je(i)+m;if(30<y){var E=m-m%5;y=(c&(1<<E)-1).toString(32),c>>=E,m-=E,Vn=1<<32-je(i)+m|a<<m|c,Hn=y+t}else Vn=1<<y|a<<m|c,Hn=t}function jr(t){t.return!==null&&(Gi(t,1),Pc(t,1,0))}function Wr(t){for(;t===Ca;)Ca=mo[--ho],mo[ho]=null,Sa=mo[--ho],mo[ho]=null;for(;t===Bi;)Bi=yn[--vn],yn[vn]=null,Hn=yn[--vn],yn[vn]=null,Vn=yn[--vn],yn[vn]=null}var Xt=null,yt=null,tt=!1,Vi=null,kn=!1,es=Error(l(519));function Hi(t){var i=Error(l(418,""));throw al(pn(i,t)),es}function Lc(t){var i=t.stateNode,a=t.type,c=t.memoizedProps;switch(i[Nt]=t,i[qt]=c,a){case"dialog":$e("cancel",i),$e("close",i);break;case"iframe":case"object":case"embed":$e("load",i);break;case"video":case"audio":for(a=0;a<Nl.length;a++)$e(Nl[a],i);break;case"source":$e("error",i);break;case"img":case"image":case"link":$e("error",i),$e("load",i);break;case"details":$e("toggle",i);break;case"input":$e("invalid",i),aa(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),oo(i);break;case"select":$e("invalid",i);break;case"textarea":$e("invalid",i),sa(i,c.value,c.defaultValue,c.children),oo(i)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||em(i.textContent,a)?(c.popover!=null&&($e("beforetoggle",i),$e("toggle",i)),c.onScroll!=null&&$e("scroll",i),c.onScrollEnd!=null&&$e("scrollend",i),c.onClick!=null&&(i.onclick=tr),i=!0):i=!1,i||Hi(t)}function zc(t){for(Xt=t.return;Xt;)switch(Xt.tag){case 5:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Xt=Xt.return}}function ol(t){if(t!==Xt)return!1;if(!tt)return zc(t),tt=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||gu(t.type,t.memoizedProps)),a=!a),a&&yt&&Hi(t),zc(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){yt=Rn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}yt=null}}else i===27?(i=yt,_i(t.type)?(t=Cu,Cu=null,yt=t):yt=i):yt=Xt?Rn(t.stateNode.nextSibling):null;return!0}function ll(){yt=Xt=null,tt=!1}function Bc(){var t=Vi;return t!==null&&(en===null?en=t:en.push.apply(en,t),Vi=null),t}function al(t){Vi===null?Vi=[t]:Vi.push(t)}var ts=F(null),qi=null,qn=null;function si(t,i,a){pe(ts,i._currentValue),i._currentValue=a}function Fn(t){t._currentValue=ts.current,J(ts)}function ns(t,i,a){for(;t!==null;){var c=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),t===a)break;t=t.return}}function is(t,i,a,c){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var y=m.dependencies;if(y!==null){var E=m.child;y=y.firstContext;e:for(;y!==null;){var D=y;y=m;for(var K=0;K<i.length;K++)if(D.context===i[K]){y.lanes|=a,D=y.alternate,D!==null&&(D.lanes|=a),ns(y.return,a,t),c||(E=null);break e}y=D.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(l(341));E.lanes|=a,y=E.alternate,y!==null&&(y.lanes|=a),ns(E,a,t),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===t){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function rl(t,i,a,c){t=null;for(var m=i,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(l(387));if(E=E.memoizedProps,E!==null){var D=m.type;nn(m.pendingProps.value,E.value)||(t!==null?t.push(D):t=[D])}}else if(m===be.current){if(E=m.alternate,E===null)throw Error(l(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(Ll):t=[Ll])}m=m.return}t!==null&&is(i,t,a,c),i.flags|=262144}function Ta(t){for(t=t.firstContext;t!==null;){if(!nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Fi(t){qi=t,qn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ft(t){return Gc(qi,t)}function _a(t,i){return qi===null&&Fi(t),Gc(t,i)}function Gc(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},qn===null){if(t===null)throw Error(l(308));qn=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else qn=qn.next=i;return a}var Dg=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,c){t.push(c)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},kg=n.unstable_scheduleCallback,Ig=n.unstable_NormalPriority,At={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function os(){return{controller:new Dg,data:new Map,refCount:0}}function sl(t){t.refCount--,t.refCount===0&&kg(Ig,function(){t.controller.abort()})}var ul=null,ls=0,po=0,go=null;function Ug(t,i){if(ul===null){var a=ul=[];ls=0,po=ru(),go={status:"pending",value:void 0,then:function(c){a.push(c)}}}return ls++,i.then(Vc,Vc),i}function Vc(){if(--ls===0&&ul!==null){go!==null&&(go.status="fulfilled");var t=ul;ul=null,po=0,go=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Pg(t,i){var a=[],c={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return t.then(function(){c.status="fulfilled",c.value=i;for(var m=0;m<a.length;m++)(0,a[m])(i)},function(m){for(c.status="rejected",c.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),c}var Hc=O.S;O.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Ug(t,i),Hc!==null&&Hc(t,i)};var Oi=F(null);function as(){var t=Oi.current;return t!==null?t:dt.pooledCache}function wa(t,i){i===null?pe(Oi,Oi.current):pe(Oi,i.pool)}function qc(){var t=as();return t===null?null:{parent:At._currentValue,pool:t}}var cl=Error(l(460)),Fc=Error(l(474)),ba=Error(l(542)),rs={then:function(){}};function Oc(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ea(){}function Yc(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Ea,Ea),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Xc(t),t;default:if(typeof i.status=="string")i.then(Ea,Ea);else{if(t=dt,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=i,t.status="pending",t.then(function(c){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=c}},function(c){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Xc(t),t}throw fl=i,cl}}var fl=null;function Jc(){if(fl===null)throw Error(l(459));var t=fl;return fl=null,t}function Xc(t){if(t===cl||t===ba)throw Error(l(483))}var ui=!1;function ss(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function us(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ci(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function fi(t,i,a){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(lt&2)!==0){var m=c.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),c.pending=i,i=va(t),Ic(t,null,a),i}return ya(t,c,i,a),va(t)}function dl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=t.pendingLanes,a|=c,i.lanes=a,eo(t,a)}}function cs(t,i){var a=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var m=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?m=y=E:y=y.next=E,a=a.next}while(a!==null);y===null?m=y=i:y=y.next=i}else m=y=i;a={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var fs=!1;function ml(){if(fs){var t=go;if(t!==null)throw t}}function hl(t,i,a,c){fs=!1;var m=t.updateQueue;ui=!1;var y=m.firstBaseUpdate,E=m.lastBaseUpdate,D=m.shared.pending;if(D!==null){m.shared.pending=null;var K=D,ue=K.next;K.next=null,E===null?y=ue:E.next=ue,E=K;var ye=t.alternate;ye!==null&&(ye=ye.updateQueue,D=ye.lastBaseUpdate,D!==E&&(D===null?ye.firstBaseUpdate=ue:D.next=ue,ye.lastBaseUpdate=K))}if(y!==null){var _e=m.baseState;E=0,ye=ue=K=null,D=y;do{var ce=D.lane&-536870913,me=ce!==D.lane;if(me?(Qe&ce)===ce:(c&ce)===ce){ce!==0&&ce===po&&(fs=!0),ye!==null&&(ye=ye.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ve=t,ze=D;ce=i;var ut=a;switch(ze.tag){case 1:if(Ve=ze.payload,typeof Ve=="function"){_e=Ve.call(ut,_e,ce);break e}_e=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=ze.payload,ce=typeof Ve=="function"?Ve.call(ut,_e,ce):Ve,ce==null)break e;_e=v({},_e,ce);break e;case 2:ui=!0}}ce=D.callback,ce!==null&&(t.flags|=64,me&&(t.flags|=8192),me=m.callbacks,me===null?m.callbacks=[ce]:me.push(ce))}else me={lane:ce,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ye===null?(ue=ye=me,K=_e):ye=ye.next=me,E|=ce;if(D=D.next,D===null){if(D=m.shared.pending,D===null)break;me=D,D=me.next,me.next=null,m.lastBaseUpdate=me,m.shared.pending=null}}while(!0);ye===null&&(K=_e),m.baseState=K,m.firstBaseUpdate=ue,m.lastBaseUpdate=ye,y===null&&(m.shared.lanes=0),xi|=E,t.lanes=E,t.memoizedState=_e}}function Kc(t,i){if(typeof t!="function")throw Error(l(191,t));t.call(i)}function Zc(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Kc(a[t],i)}var yo=F(null),Aa=F(0);function $c(t,i){t=$n,pe(Aa,t),pe(yo,i),$n=t|i.baseLanes}function ds(){pe(Aa,$n),pe(yo,yo.current)}function ms(){$n=Aa.current,J(yo),J(Aa)}var di=0,Je=null,rt=null,wt=null,Ma=!1,vo=!1,Yi=!1,Ra=0,pl=0,xo=null,Lg=0;function Ct(){throw Error(l(321))}function hs(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!nn(t[a],i[a]))return!1;return!0}function ps(t,i,a,c,m,y){return di=y,Je=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,O.H=t===null||t.memoizedState===null?Uf:Pf,Yi=!1,y=a(c,m),Yi=!1,vo&&(y=jc(i,a,c,m)),Qc(t),y}function Qc(t){O.H=Pa;var i=rt!==null&&rt.next!==null;if(di=0,wt=rt=Je=null,Ma=!1,pl=0,xo=null,i)throw Error(l(300));t===null||It||(t=t.dependencies,t!==null&&Ta(t)&&(It=!0))}function jc(t,i,a,c){Je=t;var m=0;do{if(vo&&(xo=null),pl=0,vo=!1,25<=m)throw Error(l(301));if(m+=1,wt=rt=null,t.updateQueue!=null){var y=t.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}O.H=Fg,y=i(a,c)}while(vo);return y}function zg(){var t=O.H,i=t.useState()[0];return i=typeof i.then=="function"?gl(i):i,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(Je.flags|=1024),i}function gs(){var t=Ra!==0;return Ra=0,t}function ys(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function vs(t){if(Ma){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Ma=!1}di=0,wt=rt=Je=null,vo=!1,pl=Ra=0,xo=null}function jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Je.memoizedState=wt=t:wt=wt.next=t,wt}function bt(){if(rt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var i=wt===null?Je.memoizedState:wt.next;if(i!==null)wt=i,rt=t;else{if(t===null)throw Je.alternate===null?Error(l(467)):Error(l(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},wt===null?Je.memoizedState=wt=t:wt=wt.next=t}return wt}function xs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var i=pl;return pl+=1,xo===null&&(xo=[]),t=Yc(xo,t,i),i=Je,(wt===null?i.memoizedState:wt.next)===null&&(i=i.alternate,O.H=i===null||i.memoizedState===null?Uf:Pf),t}function Na(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===I)return Ft(t)}throw Error(l(438,String(t)))}function Cs(t){var i=null,a=Je.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=Je.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=xs(),Je.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),c=0;c<t;c++)a[c]=q;return i.index++,a}function On(t,i){return typeof i=="function"?i(t):i}function Da(t){var i=bt();return Ss(i,rt,t)}function Ss(t,i,a){var c=t.queue;if(c===null)throw Error(l(311));c.lastRenderedReducer=a;var m=t.baseQueue,y=c.pending;if(y!==null){if(m!==null){var E=m.next;m.next=y.next,y.next=E}i.baseQueue=m=y,c.pending=null}if(y=t.baseState,m===null)t.memoizedState=y;else{i=m.next;var D=E=null,K=null,ue=i,ye=!1;do{var _e=ue.lane&-536870913;if(_e!==ue.lane?(Qe&_e)===_e:(di&_e)===_e){var ce=ue.revertLane;if(ce===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),_e===po&&(ye=!0);else if((di&ce)===ce){ue=ue.next,ce===po&&(ye=!0);continue}else _e={lane:0,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},K===null?(D=K=_e,E=y):K=K.next=_e,Je.lanes|=ce,xi|=ce;_e=ue.action,Yi&&a(y,_e),y=ue.hasEagerState?ue.eagerState:a(y,_e)}else ce={lane:_e,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},K===null?(D=K=ce,E=y):K=K.next=ce,Je.lanes|=_e,xi|=_e;ue=ue.next}while(ue!==null&&ue!==i);if(K===null?E=y:K.next=D,!nn(y,t.memoizedState)&&(It=!0,ye&&(a=go,a!==null)))throw a;t.memoizedState=y,t.baseState=E,t.baseQueue=K,c.lastRenderedState=y}return m===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Ts(t){var i=bt(),a=i.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=t;var c=a.dispatch,m=a.pending,y=i.memoizedState;if(m!==null){a.pending=null;var E=m=m.next;do y=t(y,E.action),E=E.next;while(E!==m);nn(y,i.memoizedState)||(It=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),a.lastRenderedState=y}return[y,c]}function Wc(t,i,a){var c=Je,m=bt(),y=tt;if(y){if(a===void 0)throw Error(l(407));a=a()}else a=i();var E=!nn((rt||m).memoizedState,a);E&&(m.memoizedState=a,It=!0),m=m.queue;var D=nf.bind(null,c,m,t);if(yl(2048,8,D,[t]),m.getSnapshot!==i||E||wt!==null&&wt.memoizedState.tag&1){if(c.flags|=2048,Co(9,ka(),tf.bind(null,c,m,a,i),null),dt===null)throw Error(l(349));y||(di&124)!==0||ef(c,i,a)}return a}function ef(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Je.updateQueue,i===null?(i=xs(),Je.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function tf(t,i,a,c){i.value=a,i.getSnapshot=c,of(i)&&lf(t)}function nf(t,i,a){return a(function(){of(i)&&lf(t)})}function of(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!nn(t,a)}catch{return!0}}function lf(t){var i=co(t,2);i!==null&&un(i,t,2)}function _s(t){var i=jt();if(typeof t=="function"){var a=t;if(t=a(),Yi){He(!0);try{a()}finally{He(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:t},i}function af(t,i,a,c){return t.baseState=a,Ss(t,rt,typeof c=="function"?c:On)}function Bg(t,i,a,c,m){if(Ua(t))throw Error(l(485));if(t=i.action,t!==null){var y={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};O.T!==null?a(!0):y.isTransition=!1,c(y),a=i.pending,a===null?(y.next=i.pending=y,rf(i,y)):(y.next=a.next,i.pending=a.next=y)}}function rf(t,i){var a=i.action,c=i.payload,m=t.state;if(i.isTransition){var y=O.T,E={};O.T=E;try{var D=a(m,c),K=O.S;K!==null&&K(E,D),sf(t,i,D)}catch(ue){ws(t,i,ue)}finally{O.T=y}}else try{y=a(m,c),sf(t,i,y)}catch(ue){ws(t,i,ue)}}function sf(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){uf(t,i,c)},function(c){return ws(t,i,c)}):uf(t,i,a)}function uf(t,i,a){i.status="fulfilled",i.value=a,cf(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,rf(t,a)))}function ws(t,i,a){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,cf(i),i=i.next;while(i!==c)}t.action=null}function cf(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function ff(t,i){return i}function df(t,i){if(tt){var a=dt.formState;if(a!==null){e:{var c=Je;if(tt){if(yt){t:{for(var m=yt,y=kn;m.nodeType!==8;){if(!y){m=null;break t}if(m=Rn(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){yt=Rn(m.nextSibling),c=m.data==="F!";break e}}Hi(c)}c=!1}c&&(i=a[0])}}return a=jt(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ff,lastRenderedState:i},a.queue=c,a=Df.bind(null,Je,c),c.dispatch=a,c=_s(!1),y=Rs.bind(null,Je,!1,c.queue),c=jt(),m={state:i,dispatch:null,action:t,pending:null},c.queue=m,a=Bg.bind(null,Je,m,y,a),m.dispatch=a,c.memoizedState=t,[i,a,!1]}function mf(t){var i=bt();return hf(i,rt,t)}function hf(t,i,a){if(i=Ss(t,i,ff)[0],t=Da(On)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=gl(i)}catch(E){throw E===cl?ba:E}else c=i;i=bt();var m=i.queue,y=m.dispatch;return a!==i.memoizedState&&(Je.flags|=2048,Co(9,ka(),Gg.bind(null,m,a),null)),[c,y,t]}function Gg(t,i){t.action=i}function pf(t){var i=bt(),a=rt;if(a!==null)return hf(i,a,t);bt(),i=i.memoizedState,a=bt();var c=a.queue.dispatch;return a.memoizedState=t,[i,c,!1]}function Co(t,i,a,c){return t={tag:t,create:a,deps:c,inst:i,next:null},i=Je.updateQueue,i===null&&(i=xs(),Je.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(c=a.next,a.next=t,t.next=c,i.lastEffect=t),t}function ka(){return{destroy:void 0,resource:void 0}}function gf(){return bt().memoizedState}function Ia(t,i,a,c){var m=jt();c=c===void 0?null:c,Je.flags|=t,m.memoizedState=Co(1|i,ka(),a,c)}function yl(t,i,a,c){var m=bt();c=c===void 0?null:c;var y=m.memoizedState.inst;rt!==null&&c!==null&&hs(c,rt.memoizedState.deps)?m.memoizedState=Co(i,y,a,c):(Je.flags|=t,m.memoizedState=Co(1|i,y,a,c))}function yf(t,i){Ia(8390656,8,t,i)}function vf(t,i){yl(2048,8,t,i)}function xf(t,i){return yl(4,2,t,i)}function Cf(t,i){return yl(4,4,t,i)}function Sf(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Tf(t,i,a){a=a!=null?a.concat([t]):null,yl(4,4,Sf.bind(null,i,t),a)}function bs(){}function _f(t,i){var a=bt();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&hs(i,c[1])?c[0]:(a.memoizedState=[t,i],t)}function wf(t,i){var a=bt();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&hs(i,c[1]))return c[0];if(c=t(),Yi){He(!0);try{t()}finally{He(!1)}}return a.memoizedState=[c,i],c}function Es(t,i,a){return a===void 0||(di&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Ad(),Je.lanes|=t,xi|=t,a)}function bf(t,i,a,c){return nn(a,i)?a:yo.current!==null?(t=Es(t,a,c),nn(t,i)||(It=!0),t):(di&42)===0?(It=!0,t.memoizedState=a):(t=Ad(),Je.lanes|=t,xi|=t,i)}function Ef(t,i,a,c,m){var y=j.p;j.p=y!==0&&8>y?y:8;var E=O.T,D={};O.T=D,Rs(t,!1,i,a);try{var K=m(),ue=O.S;if(ue!==null&&ue(D,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var ye=Pg(K,c);vl(t,i,ye,sn(t))}else vl(t,i,c,sn(t))}catch(_e){vl(t,i,{then:function(){},status:"rejected",reason:_e},sn())}finally{j.p=y,O.T=E}}function Vg(){}function As(t,i,a,c){if(t.tag!==5)throw Error(l(476));var m=Af(t).queue;Ef(t,m,i,Se,a===null?Vg:function(){return Mf(t),a(c)})}function Af(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:Se},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Mf(t){var i=Af(t).next.queue;vl(t,i,{},sn())}function Ms(){return Ft(Ll)}function Rf(){return bt().memoizedState}function Nf(){return bt().memoizedState}function Hg(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=sn();t=ci(a);var c=fi(i,t,a);c!==null&&(un(c,i,a),dl(c,i,a)),i={cache:os()},t.payload=i;return}i=i.return}}function qg(t,i,a){var c=sn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ua(t)?kf(i,a):(a=Kr(t,i,a,c),a!==null&&(un(a,t,c),If(a,i,c)))}function Df(t,i,a){var c=sn();vl(t,i,a,c)}function vl(t,i,a,c){var m={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ua(t))kf(i,m);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var E=i.lastRenderedState,D=y(E,a);if(m.hasEagerState=!0,m.eagerState=D,nn(D,E))return ya(t,i,m,0),dt===null&&ga(),!1}catch{}finally{}if(a=Kr(t,i,m,c),a!==null)return un(a,t,c),If(a,i,c),!0}return!1}function Rs(t,i,a,c){if(c={lane:2,revertLane:ru(),action:c,hasEagerState:!1,eagerState:null,next:null},Ua(t)){if(i)throw Error(l(479))}else i=Kr(t,a,c,2),i!==null&&un(i,t,2)}function Ua(t){var i=t.alternate;return t===Je||i!==null&&i===Je}function kf(t,i){vo=Ma=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function If(t,i,a){if((a&4194048)!==0){var c=i.lanes;c&=t.pendingLanes,a|=c,i.lanes=a,eo(t,a)}}var Pa={readContext:Ft,use:Na,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},Uf={readContext:Ft,use:Na,useCallback:function(t,i){return jt().memoizedState=[t,i===void 0?null:i],t},useContext:Ft,useEffect:yf,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Ia(4194308,4,Sf.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Ia(4194308,4,t,i)},useInsertionEffect:function(t,i){Ia(4,2,t,i)},useMemo:function(t,i){var a=jt();i=i===void 0?null:i;var c=t();if(Yi){He(!0);try{t()}finally{He(!1)}}return a.memoizedState=[c,i],c},useReducer:function(t,i,a){var c=jt();if(a!==void 0){var m=a(i);if(Yi){He(!0);try{a(i)}finally{He(!1)}}}else m=i;return c.memoizedState=c.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},c.queue=t,t=t.dispatch=qg.bind(null,Je,t),[c.memoizedState,t]},useRef:function(t){var i=jt();return t={current:t},i.memoizedState=t},useState:function(t){t=_s(t);var i=t.queue,a=Df.bind(null,Je,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:bs,useDeferredValue:function(t,i){var a=jt();return Es(a,t,i)},useTransition:function(){var t=_s(!1);return t=Ef.bind(null,Je,t.queue,!0,!1),jt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var c=Je,m=jt();if(tt){if(a===void 0)throw Error(l(407));a=a()}else{if(a=i(),dt===null)throw Error(l(349));(Qe&124)!==0||ef(c,i,a)}m.memoizedState=a;var y={value:a,getSnapshot:i};return m.queue=y,yf(nf.bind(null,c,y,t),[t]),c.flags|=2048,Co(9,ka(),tf.bind(null,c,y,a,i),null),a},useId:function(){var t=jt(),i=dt.identifierPrefix;if(tt){var a=Hn,c=Vn;a=(c&~(1<<32-je(c)-1)).toString(32)+a,i="«"+i+"R"+a,a=Ra++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=Lg++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Ms,useFormState:df,useActionState:df,useOptimistic:function(t){var i=jt();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Rs.bind(null,Je,!0,a),a.dispatch=i,[t,i]},useMemoCache:Cs,useCacheRefresh:function(){return jt().memoizedState=Hg.bind(null,Je)}},Pf={readContext:Ft,use:Na,useCallback:_f,useContext:Ft,useEffect:vf,useImperativeHandle:Tf,useInsertionEffect:xf,useLayoutEffect:Cf,useMemo:wf,useReducer:Da,useRef:gf,useState:function(){return Da(On)},useDebugValue:bs,useDeferredValue:function(t,i){var a=bt();return bf(a,rt.memoizedState,t,i)},useTransition:function(){var t=Da(On)[0],i=bt().memoizedState;return[typeof t=="boolean"?t:gl(t),i]},useSyncExternalStore:Wc,useId:Rf,useHostTransitionStatus:Ms,useFormState:mf,useActionState:mf,useOptimistic:function(t,i){var a=bt();return af(a,rt,t,i)},useMemoCache:Cs,useCacheRefresh:Nf},Fg={readContext:Ft,use:Na,useCallback:_f,useContext:Ft,useEffect:vf,useImperativeHandle:Tf,useInsertionEffect:xf,useLayoutEffect:Cf,useMemo:wf,useReducer:Ts,useRef:gf,useState:function(){return Ts(On)},useDebugValue:bs,useDeferredValue:function(t,i){var a=bt();return rt===null?Es(a,t,i):bf(a,rt.memoizedState,t,i)},useTransition:function(){var t=Ts(On)[0],i=bt().memoizedState;return[typeof t=="boolean"?t:gl(t),i]},useSyncExternalStore:Wc,useId:Rf,useHostTransitionStatus:Ms,useFormState:pf,useActionState:pf,useOptimistic:function(t,i){var a=bt();return rt!==null?af(a,rt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Cs,useCacheRefresh:Nf},So=null,xl=0;function La(t){var i=xl;return xl+=1,So===null&&(So=[]),Yc(So,t,i)}function Cl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function za(t,i){throw i.$$typeof===C?Error(l(525)):(t=Object.prototype.toString.call(i),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Lf(t){var i=t._init;return i(t._payload)}function zf(t){function i(ie,Q){if(t){var se=ie.deletions;se===null?(ie.deletions=[Q],ie.flags|=16):se.push(Q)}}function a(ie,Q){if(!t)return null;for(;Q!==null;)i(ie,Q),Q=Q.sibling;return null}function c(ie){for(var Q=new Map;ie!==null;)ie.key!==null?Q.set(ie.key,ie):Q.set(ie.index,ie),ie=ie.sibling;return Q}function m(ie,Q){return ie=Gn(ie,Q),ie.index=0,ie.sibling=null,ie}function y(ie,Q,se){return ie.index=se,t?(se=ie.alternate,se!==null?(se=se.index,se<Q?(ie.flags|=67108866,Q):se):(ie.flags|=67108866,Q)):(ie.flags|=1048576,Q)}function E(ie){return t&&ie.alternate===null&&(ie.flags|=67108866),ie}function D(ie,Q,se,Ce){return Q===null||Q.tag!==6?(Q=$r(se,ie.mode,Ce),Q.return=ie,Q):(Q=m(Q,se),Q.return=ie,Q)}function K(ie,Q,se,Ce){var ke=se.type;return ke===w?ye(ie,Q,se.props.children,Ce,se.key):Q!==null&&(Q.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Y&&Lf(ke)===Q.type)?(Q=m(Q,se.props),Cl(Q,se),Q.return=ie,Q):(Q=xa(se.type,se.key,se.props,null,ie.mode,Ce),Cl(Q,se),Q.return=ie,Q)}function ue(ie,Q,se,Ce){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==se.containerInfo||Q.stateNode.implementation!==se.implementation?(Q=Qr(se,ie.mode,Ce),Q.return=ie,Q):(Q=m(Q,se.children||[]),Q.return=ie,Q)}function ye(ie,Q,se,Ce,ke){return Q===null||Q.tag!==7?(Q=zi(se,ie.mode,Ce,ke),Q.return=ie,Q):(Q=m(Q,se),Q.return=ie,Q)}function _e(ie,Q,se){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=$r(""+Q,ie.mode,se),Q.return=ie,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:return se=xa(Q.type,Q.key,Q.props,null,ie.mode,se),Cl(se,Q),se.return=ie,se;case T:return Q=Qr(Q,ie.mode,se),Q.return=ie,Q;case Y:var Ce=Q._init;return Q=Ce(Q._payload),_e(ie,Q,se)}if(Z(Q)||z(Q))return Q=zi(Q,ie.mode,se,null),Q.return=ie,Q;if(typeof Q.then=="function")return _e(ie,La(Q),se);if(Q.$$typeof===I)return _e(ie,_a(ie,Q),se);za(ie,Q)}return null}function ce(ie,Q,se,Ce){var ke=Q!==null?Q.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return ke!==null?null:D(ie,Q,""+se,Ce);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case S:return se.key===ke?K(ie,Q,se,Ce):null;case T:return se.key===ke?ue(ie,Q,se,Ce):null;case Y:return ke=se._init,se=ke(se._payload),ce(ie,Q,se,Ce)}if(Z(se)||z(se))return ke!==null?null:ye(ie,Q,se,Ce,null);if(typeof se.then=="function")return ce(ie,Q,La(se),Ce);if(se.$$typeof===I)return ce(ie,Q,_a(ie,se),Ce);za(ie,se)}return null}function me(ie,Q,se,Ce,ke){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ie=ie.get(se)||null,D(Q,ie,""+Ce,ke);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case S:return ie=ie.get(Ce.key===null?se:Ce.key)||null,K(Q,ie,Ce,ke);case T:return ie=ie.get(Ce.key===null?se:Ce.key)||null,ue(Q,ie,Ce,ke);case Y:var Ke=Ce._init;return Ce=Ke(Ce._payload),me(ie,Q,se,Ce,ke)}if(Z(Ce)||z(Ce))return ie=ie.get(se)||null,ye(Q,ie,Ce,ke,null);if(typeof Ce.then=="function")return me(ie,Q,se,La(Ce),ke);if(Ce.$$typeof===I)return me(ie,Q,se,_a(Q,Ce),ke);za(Q,Ce)}return null}function Ve(ie,Q,se,Ce){for(var ke=null,Ke=null,Pe=Q,Be=Q=0,Pt=null;Pe!==null&&Be<se.length;Be++){Pe.index>Be?(Pt=Pe,Pe=null):Pt=Pe.sibling;var We=ce(ie,Pe,se[Be],Ce);if(We===null){Pe===null&&(Pe=Pt);break}t&&Pe&&We.alternate===null&&i(ie,Pe),Q=y(We,Q,Be),Ke===null?ke=We:Ke.sibling=We,Ke=We,Pe=Pt}if(Be===se.length)return a(ie,Pe),tt&&Gi(ie,Be),ke;if(Pe===null){for(;Be<se.length;Be++)Pe=_e(ie,se[Be],Ce),Pe!==null&&(Q=y(Pe,Q,Be),Ke===null?ke=Pe:Ke.sibling=Pe,Ke=Pe);return tt&&Gi(ie,Be),ke}for(Pe=c(Pe);Be<se.length;Be++)Pt=me(Pe,ie,Be,se[Be],Ce),Pt!==null&&(t&&Pt.alternate!==null&&Pe.delete(Pt.key===null?Be:Pt.key),Q=y(Pt,Q,Be),Ke===null?ke=Pt:Ke.sibling=Pt,Ke=Pt);return t&&Pe.forEach(function(Mi){return i(ie,Mi)}),tt&&Gi(ie,Be),ke}function ze(ie,Q,se,Ce){if(se==null)throw Error(l(151));for(var ke=null,Ke=null,Pe=Q,Be=Q=0,Pt=null,We=se.next();Pe!==null&&!We.done;Be++,We=se.next()){Pe.index>Be?(Pt=Pe,Pe=null):Pt=Pe.sibling;var Mi=ce(ie,Pe,We.value,Ce);if(Mi===null){Pe===null&&(Pe=Pt);break}t&&Pe&&Mi.alternate===null&&i(ie,Pe),Q=y(Mi,Q,Be),Ke===null?ke=Mi:Ke.sibling=Mi,Ke=Mi,Pe=Pt}if(We.done)return a(ie,Pe),tt&&Gi(ie,Be),ke;if(Pe===null){for(;!We.done;Be++,We=se.next())We=_e(ie,We.value,Ce),We!==null&&(Q=y(We,Q,Be),Ke===null?ke=We:Ke.sibling=We,Ke=We);return tt&&Gi(ie,Be),ke}for(Pe=c(Pe);!We.done;Be++,We=se.next())We=me(Pe,ie,Be,We.value,Ce),We!==null&&(t&&We.alternate!==null&&Pe.delete(We.key===null?Be:We.key),Q=y(We,Q,Be),Ke===null?ke=We:Ke.sibling=We,Ke=We);return t&&Pe.forEach(function(O0){return i(ie,O0)}),tt&&Gi(ie,Be),ke}function ut(ie,Q,se,Ce){if(typeof se=="object"&&se!==null&&se.type===w&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case S:e:{for(var ke=se.key;Q!==null;){if(Q.key===ke){if(ke=se.type,ke===w){if(Q.tag===7){a(ie,Q.sibling),Ce=m(Q,se.props.children),Ce.return=ie,ie=Ce;break e}}else if(Q.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Y&&Lf(ke)===Q.type){a(ie,Q.sibling),Ce=m(Q,se.props),Cl(Ce,se),Ce.return=ie,ie=Ce;break e}a(ie,Q);break}else i(ie,Q);Q=Q.sibling}se.type===w?(Ce=zi(se.props.children,ie.mode,Ce,se.key),Ce.return=ie,ie=Ce):(Ce=xa(se.type,se.key,se.props,null,ie.mode,Ce),Cl(Ce,se),Ce.return=ie,ie=Ce)}return E(ie);case T:e:{for(ke=se.key;Q!==null;){if(Q.key===ke)if(Q.tag===4&&Q.stateNode.containerInfo===se.containerInfo&&Q.stateNode.implementation===se.implementation){a(ie,Q.sibling),Ce=m(Q,se.children||[]),Ce.return=ie,ie=Ce;break e}else{a(ie,Q);break}else i(ie,Q);Q=Q.sibling}Ce=Qr(se,ie.mode,Ce),Ce.return=ie,ie=Ce}return E(ie);case Y:return ke=se._init,se=ke(se._payload),ut(ie,Q,se,Ce)}if(Z(se))return Ve(ie,Q,se,Ce);if(z(se)){if(ke=z(se),typeof ke!="function")throw Error(l(150));return se=ke.call(se),ze(ie,Q,se,Ce)}if(typeof se.then=="function")return ut(ie,Q,La(se),Ce);if(se.$$typeof===I)return ut(ie,Q,_a(ie,se),Ce);za(ie,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,Q!==null&&Q.tag===6?(a(ie,Q.sibling),Ce=m(Q,se),Ce.return=ie,ie=Ce):(a(ie,Q),Ce=$r(se,ie.mode,Ce),Ce.return=ie,ie=Ce),E(ie)):a(ie,Q)}return function(ie,Q,se,Ce){try{xl=0;var ke=ut(ie,Q,se,Ce);return So=null,ke}catch(Pe){if(Pe===cl||Pe===ba)throw Pe;var Ke=on(29,Pe,null,ie.mode);return Ke.lanes=Ce,Ke.return=ie,Ke}finally{}}}var To=zf(!0),Bf=zf(!1),xn=F(null),In=null;function mi(t){var i=t.alternate;pe(Mt,Mt.current&1),pe(xn,t),In===null&&(i===null||yo.current!==null||i.memoizedState!==null)&&(In=t)}function Gf(t){if(t.tag===22){if(pe(Mt,Mt.current),pe(xn,t),In===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(In=t)}}else hi()}function hi(){pe(Mt,Mt.current),pe(xn,xn.current)}function Yn(t){J(xn),In===t&&(In=null),J(Mt)}var Mt=F(0);function Ba(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||xu(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Ns(t,i,a,c){i=t.memoizedState,a=a(c,i),a=a==null?i:v({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ds={enqueueSetState:function(t,i,a){t=t._reactInternals;var c=sn(),m=ci(c);m.payload=i,a!=null&&(m.callback=a),i=fi(t,m,c),i!==null&&(un(i,t,c),dl(i,t,c))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var c=sn(),m=ci(c);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=fi(t,m,c),i!==null&&(un(i,t,c),dl(i,t,c))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=sn(),c=ci(a);c.tag=2,i!=null&&(c.callback=i),i=fi(t,c,a),i!==null&&(un(i,t,a),dl(i,t,a))}};function Vf(t,i,a,c,m,y,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,y,E):i.prototype&&i.prototype.isPureReactComponent?!nl(a,c)||!nl(m,y):!0}function Hf(t,i,a,c){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==t&&Ds.enqueueReplaceState(i,i.state,null)}function Ji(t,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(t=t.defaultProps){a===i&&(a=v({},a));for(var m in t)a[m]===void 0&&(a[m]=t[m])}return a}var Ga=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function qf(t){Ga(t)}function Ff(t){console.error(t)}function Of(t){Ga(t)}function Va(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Yf(t,i,a){try{var c=t.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function ks(t,i,a){return a=ci(a),a.tag=3,a.payload={element:null},a.callback=function(){Va(t,i)},a}function Jf(t){return t=ci(t),t.tag=3,t}function Xf(t,i,a,c){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var y=c.value;t.payload=function(){return m(y)},t.callback=function(){Yf(i,a,c)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){Yf(i,a,c),typeof m!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var D=c.stack;this.componentDidCatch(c.value,{componentStack:D!==null?D:""})})}function Og(t,i,a,c,m){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&rl(i,a,m,!0),a=xn.current,a!==null){switch(a.tag){case 13:return In===null?nu():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=m,c===rs?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),ou(t,c,m)),!1;case 22:return a.flags|=65536,c===rs?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),ou(t,c,m)),!1}throw Error(l(435,a.tag))}return ou(t,c,m),nu(),!1}if(tt)return i=xn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,c!==es&&(t=Error(l(422),{cause:c}),al(pn(t,a)))):(c!==es&&(i=Error(l(423),{cause:c}),al(pn(i,a))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,c=pn(c,a),m=ks(t.stateNode,c,m),cs(t,m),vt!==4&&(vt=2)),!1;var y=Error(l(520),{cause:c});if(y=pn(y,a),Al===null?Al=[y]:Al.push(y),vt!==4&&(vt=2),i===null)return!0;c=pn(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=m&-m,a.lanes|=t,t=ks(a.stateNode,c,t),cs(a,t),!1;case 1:if(i=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ci===null||!Ci.has(y))))return a.flags|=65536,m&=-m,a.lanes|=m,m=Jf(m),Xf(m,t,a,c),cs(a,m),!1}a=a.return}while(a!==null);return!1}var Kf=Error(l(461)),It=!1;function Gt(t,i,a,c){i.child=t===null?Bf(i,null,a,c):To(i,t.child,a,c)}function Zf(t,i,a,c,m){a=a.render;var y=i.ref;if("ref"in c){var E={};for(var D in c)D!=="ref"&&(E[D]=c[D])}else E=c;return Fi(i),c=ps(t,i,a,E,y,m),D=gs(),t!==null&&!It?(ys(t,i,m),Jn(t,i,m)):(tt&&D&&jr(i),i.flags|=1,Gt(t,i,c,m),i.child)}function $f(t,i,a,c,m){if(t===null){var y=a.type;return typeof y=="function"&&!Zr(y)&&y.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=y,Qf(t,i,y,c,m)):(t=xa(a.type,null,c,i,i.mode,m),t.ref=i.ref,t.return=i,i.child=t)}if(y=t.child,!Vs(t,m)){var E=y.memoizedProps;if(a=a.compare,a=a!==null?a:nl,a(E,c)&&t.ref===i.ref)return Jn(t,i,m)}return i.flags|=1,t=Gn(y,c),t.ref=i.ref,t.return=i,i.child=t}function Qf(t,i,a,c,m){if(t!==null){var y=t.memoizedProps;if(nl(y,c)&&t.ref===i.ref)if(It=!1,i.pendingProps=c=y,Vs(t,m))(t.flags&131072)!==0&&(It=!0);else return i.lanes=t.lanes,Jn(t,i,m)}return Is(t,i,a,c,m)}function jf(t,i,a){var c=i.pendingProps,m=c.children,y=t!==null?t.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=y!==null?y.baseLanes|a:a,t!==null){for(m=i.child=t.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;i.childLanes=y&~c}else i.childLanes=0,i.child=null;return Wf(t,i,c,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&wa(i,y!==null?y.cachePool:null),y!==null?$c(i,y):ds(),Gf(i);else return i.lanes=i.childLanes=536870912,Wf(t,i,y!==null?y.baseLanes|a:a,a)}else y!==null?(wa(i,y.cachePool),$c(i,y),hi(),i.memoizedState=null):(t!==null&&wa(i,null),ds(),hi());return Gt(t,i,m,a),i.child}function Wf(t,i,a,c){var m=as();return m=m===null?null:{parent:At._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},t!==null&&wa(i,null),ds(),Gf(i),t!==null&&rl(t,i,c,!0),null}function Ha(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Is(t,i,a,c,m){return Fi(i),a=ps(t,i,a,c,void 0,m),c=gs(),t!==null&&!It?(ys(t,i,m),Jn(t,i,m)):(tt&&c&&jr(i),i.flags|=1,Gt(t,i,a,m),i.child)}function ed(t,i,a,c,m,y){return Fi(i),i.updateQueue=null,a=jc(i,c,a,m),Qc(t),c=gs(),t!==null&&!It?(ys(t,i,y),Jn(t,i,y)):(tt&&c&&jr(i),i.flags|=1,Gt(t,i,a,y),i.child)}function td(t,i,a,c,m){if(Fi(i),i.stateNode===null){var y=fo,E=a.contextType;typeof E=="object"&&E!==null&&(y=Ft(E)),y=new a(c,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ds,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=c,y.state=i.memoizedState,y.refs={},ss(i),E=a.contextType,y.context=typeof E=="object"&&E!==null?Ft(E):fo,y.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Ns(i,a,E,c),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&Ds.enqueueReplaceState(y,y.state,null),hl(i,c,y,m),ml(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(t===null){y=i.stateNode;var D=i.memoizedProps,K=Ji(a,D);y.props=K;var ue=y.context,ye=a.contextType;E=fo,typeof ye=="object"&&ye!==null&&(E=Ft(ye));var _e=a.getDerivedStateFromProps;ye=typeof _e=="function"||typeof y.getSnapshotBeforeUpdate=="function",D=i.pendingProps!==D,ye||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(D||ue!==E)&&Hf(i,y,c,E),ui=!1;var ce=i.memoizedState;y.state=ce,hl(i,c,y,m),ml(),ue=i.memoizedState,D||ce!==ue||ui?(typeof _e=="function"&&(Ns(i,a,_e,c),ue=i.memoizedState),(K=ui||Vf(i,a,K,c,ce,ue,E))?(ye||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=ue),y.props=c,y.state=ue,y.context=E,c=K):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{y=i.stateNode,us(t,i),E=i.memoizedProps,ye=Ji(a,E),y.props=ye,_e=i.pendingProps,ce=y.context,ue=a.contextType,K=fo,typeof ue=="object"&&ue!==null&&(K=Ft(ue)),D=a.getDerivedStateFromProps,(ue=typeof D=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==_e||ce!==K)&&Hf(i,y,c,K),ui=!1,ce=i.memoizedState,y.state=ce,hl(i,c,y,m),ml();var me=i.memoizedState;E!==_e||ce!==me||ui||t!==null&&t.dependencies!==null&&Ta(t.dependencies)?(typeof D=="function"&&(Ns(i,a,D,c),me=i.memoizedState),(ye=ui||Vf(i,a,ye,c,ce,me,K)||t!==null&&t.dependencies!==null&&Ta(t.dependencies))?(ue||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,me,K),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,me,K)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===t.memoizedProps&&ce===t.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&ce===t.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=me),y.props=c,y.state=me,y.context=K,c=ye):(typeof y.componentDidUpdate!="function"||E===t.memoizedProps&&ce===t.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&ce===t.memoizedState||(i.flags|=1024),c=!1)}return y=c,Ha(t,i),c=(i.flags&128)!==0,y||c?(y=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,t!==null&&c?(i.child=To(i,t.child,null,m),i.child=To(i,null,a,m)):Gt(t,i,a,m),i.memoizedState=y.state,t=i.child):t=Jn(t,i,m),t}function nd(t,i,a,c){return ll(),i.flags|=256,Gt(t,i,a,c),i.child}var Us={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ps(t){return{baseLanes:t,cachePool:qc()}}function Ls(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Cn),t}function id(t,i,a){var c=i.pendingProps,m=!1,y=(i.flags&128)!==0,E;if((E=y)||(E=t!==null&&t.memoizedState===null?!1:(Mt.current&2)!==0),E&&(m=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,t===null){if(tt){if(m?mi(i):hi(),tt){var D=yt,K;if(K=D){e:{for(K=D,D=kn;K.nodeType!==8;){if(!D){D=null;break e}if(K=Rn(K.nextSibling),K===null){D=null;break e}}D=K}D!==null?(i.memoizedState={dehydrated:D,treeContext:Bi!==null?{id:Vn,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},K=on(18,null,null,0),K.stateNode=D,K.return=i,i.child=K,Xt=i,yt=null,K=!0):K=!1}K||Hi(i)}if(D=i.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return xu(D)?i.lanes=32:i.lanes=536870912,null;Yn(i)}return D=c.children,c=c.fallback,m?(hi(),m=i.mode,D=qa({mode:"hidden",children:D},m),c=zi(c,m,a,null),D.return=i,c.return=i,D.sibling=c,i.child=D,m=i.child,m.memoizedState=Ps(a),m.childLanes=Ls(t,E,a),i.memoizedState=Us,c):(mi(i),zs(i,D))}if(K=t.memoizedState,K!==null&&(D=K.dehydrated,D!==null)){if(y)i.flags&256?(mi(i),i.flags&=-257,i=Bs(t,i,a)):i.memoizedState!==null?(hi(),i.child=t.child,i.flags|=128,i=null):(hi(),m=c.fallback,D=i.mode,c=qa({mode:"visible",children:c.children},D),m=zi(m,D,a,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,To(i,t.child,null,a),c=i.child,c.memoizedState=Ps(a),c.childLanes=Ls(t,E,a),i.memoizedState=Us,i=m);else if(mi(i),xu(D)){if(E=D.nextSibling&&D.nextSibling.dataset,E)var ue=E.dgst;E=ue,c=Error(l(419)),c.stack="",c.digest=E,al({value:c,source:null,stack:null}),i=Bs(t,i,a)}else if(It||rl(t,i,a,!1),E=(a&t.childLanes)!==0,It||E){if(E=dt,E!==null&&(c=a&-a,c=(c&42)!==0?1:Lt(c),c=(c&(E.suspendedLanes|a))!==0?0:c,c!==0&&c!==K.retryLane))throw K.retryLane=c,co(t,c),un(E,t,c),Kf;D.data==="$?"||nu(),i=Bs(t,i,a)}else D.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=K.treeContext,yt=Rn(D.nextSibling),Xt=i,tt=!0,Vi=null,kn=!1,t!==null&&(yn[vn++]=Vn,yn[vn++]=Hn,yn[vn++]=Bi,Vn=t.id,Hn=t.overflow,Bi=i),i=zs(i,c.children),i.flags|=4096);return i}return m?(hi(),m=c.fallback,D=i.mode,K=t.child,ue=K.sibling,c=Gn(K,{mode:"hidden",children:c.children}),c.subtreeFlags=K.subtreeFlags&65011712,ue!==null?m=Gn(ue,m):(m=zi(m,D,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,D=t.child.memoizedState,D===null?D=Ps(a):(K=D.cachePool,K!==null?(ue=At._currentValue,K=K.parent!==ue?{parent:ue,pool:ue}:K):K=qc(),D={baseLanes:D.baseLanes|a,cachePool:K}),m.memoizedState=D,m.childLanes=Ls(t,E,a),i.memoizedState=Us,c):(mi(i),a=t.child,t=a.sibling,a=Gn(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,t!==null&&(E=i.deletions,E===null?(i.deletions=[t],i.flags|=16):E.push(t)),i.child=a,i.memoizedState=null,a)}function zs(t,i){return i=qa({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function qa(t,i){return t=on(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Bs(t,i,a){return To(i,t.child,null,a),t=zs(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function od(t,i,a){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i),ns(t.return,i,a)}function Gs(t,i,a,c,m){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:m}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=a,y.tailMode=m)}function ld(t,i,a){var c=i.pendingProps,m=c.revealOrder,y=c.tail;if(Gt(t,i,c.children,a),c=Mt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&od(t,a,i);else if(t.tag===19)od(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}switch(pe(Mt,c),m){case"forwards":for(a=i.child,m=null;a!==null;)t=a.alternate,t!==null&&Ba(t)===null&&(m=a),a=a.sibling;a=m,a===null?(m=i.child,i.child=null):(m=a.sibling,a.sibling=null),Gs(i,!1,m,a,y);break;case"backwards":for(a=null,m=i.child,i.child=null;m!==null;){if(t=m.alternate,t!==null&&Ba(t)===null){i.child=m;break}t=m.sibling,m.sibling=a,a=m,m=t}Gs(i,!0,a,null,y);break;case"together":Gs(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Jn(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),xi|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(rl(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(l(153));if(i.child!==null){for(t=i.child,a=Gn(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Gn(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Vs(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Ta(t)))}function Yg(t,i,a){switch(i.tag){case 3:ve(i,i.stateNode.containerInfo),si(i,At,t.memoizedState.cache),ll();break;case 27:case 5:Ee(i);break;case 4:ve(i,i.stateNode.containerInfo);break;case 10:si(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(mi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?id(t,i,a):(mi(i),t=Jn(t,i,a),t!==null?t.sibling:null);mi(i);break;case 19:var m=(t.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(rl(t,i,a,!1),c=(a&i.childLanes)!==0),m){if(c)return ld(t,i,a);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),pe(Mt,Mt.current),c)break;return null;case 22:case 23:return i.lanes=0,jf(t,i,a);case 24:si(i,At,t.memoizedState.cache)}return Jn(t,i,a)}function ad(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)It=!0;else{if(!Vs(t,a)&&(i.flags&128)===0)return It=!1,Yg(t,i,a);It=(t.flags&131072)!==0}else It=!1,tt&&(i.flags&1048576)!==0&&Pc(i,Sa,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var c=i.elementType,m=c._init;if(c=m(c._payload),i.type=c,typeof c=="function")Zr(c)?(t=Ji(c,t),i.tag=1,i=td(null,i,c,t,a)):(i.tag=0,i=Is(null,i,c,t,a));else{if(c!=null){if(m=c.$$typeof,m===H){i.tag=11,i=Zf(null,i,c,t,a);break e}else if(m===P){i.tag=14,i=$f(null,i,c,t,a);break e}}throw i=M(c)||c,Error(l(306,i,""))}}return i;case 0:return Is(t,i,i.type,i.pendingProps,a);case 1:return c=i.type,m=Ji(c,i.pendingProps),td(t,i,c,m,a);case 3:e:{if(ve(i,i.stateNode.containerInfo),t===null)throw Error(l(387));c=i.pendingProps;var y=i.memoizedState;m=y.element,us(t,i),hl(i,c,null,a);var E=i.memoizedState;if(c=E.cache,si(i,At,c),c!==y.cache&&is(i,[At],a,!0),ml(),c=E.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=nd(t,i,c,a);break e}else if(c!==m){m=pn(Error(l(424)),i),al(m),i=nd(t,i,c,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(yt=Rn(t.firstChild),Xt=i,tt=!0,Vi=null,kn=!0,a=Bf(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ll(),c===m){i=Jn(t,i,a);break e}Gt(t,i,c,a)}i=i.child}return i;case 26:return Ha(t,i),t===null?(a=cm(i.type,null,i.pendingProps,null))?i.memoizedState=a:tt||(a=i.type,t=i.pendingProps,c=nr(ne.current).createElement(a),c[Nt]=i,c[qt]=t,Ht(c,a,t),xt(c),i.stateNode=c):i.memoizedState=cm(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ee(i),t===null&&tt&&(c=i.stateNode=rm(i.type,i.pendingProps,ne.current),Xt=i,kn=!0,m=yt,_i(i.type)?(Cu=m,yt=Rn(c.firstChild)):yt=m),Gt(t,i,i.pendingProps.children,a),Ha(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&tt&&((m=c=yt)&&(c=x0(c,i.type,i.pendingProps,kn),c!==null?(i.stateNode=c,Xt=i,yt=Rn(c.firstChild),kn=!1,m=!0):m=!1),m||Hi(i)),Ee(i),m=i.type,y=i.pendingProps,E=t!==null?t.memoizedProps:null,c=y.children,gu(m,y)?c=null:E!==null&&gu(m,E)&&(i.flags|=32),i.memoizedState!==null&&(m=ps(t,i,zg,null,null,a),Ll._currentValue=m),Ha(t,i),Gt(t,i,c,a),i.child;case 6:return t===null&&tt&&((t=a=yt)&&(a=C0(a,i.pendingProps,kn),a!==null?(i.stateNode=a,Xt=i,yt=null,t=!0):t=!1),t||Hi(i)),null;case 13:return id(t,i,a);case 4:return ve(i,i.stateNode.containerInfo),c=i.pendingProps,t===null?i.child=To(i,null,c,a):Gt(t,i,c,a),i.child;case 11:return Zf(t,i,i.type,i.pendingProps,a);case 7:return Gt(t,i,i.pendingProps,a),i.child;case 8:return Gt(t,i,i.pendingProps.children,a),i.child;case 12:return Gt(t,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,si(i,i.type,c.value),Gt(t,i,c.children,a),i.child;case 9:return m=i.type._context,c=i.pendingProps.children,Fi(i),m=Ft(m),c=c(m),i.flags|=1,Gt(t,i,c,a),i.child;case 14:return $f(t,i,i.type,i.pendingProps,a);case 15:return Qf(t,i,i.type,i.pendingProps,a);case 19:return ld(t,i,a);case 31:return c=i.pendingProps,a=i.mode,c={mode:c.mode,children:c.children},t===null?(a=qa(c,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Gn(t.child,c),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return jf(t,i,a);case 24:return Fi(i),c=Ft(At),t===null?(m=as(),m===null&&(m=dt,y=os(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=a),m=y),i.memoizedState={parent:c,cache:m},ss(i),si(i,At,m)):((t.lanes&a)!==0&&(us(t,i),hl(i,null,null,a),ml()),m=t.memoizedState,y=i.memoizedState,m.parent!==c?(m={parent:c,cache:c},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),si(i,At,c)):(c=y.cache,si(i,At,c),c!==m.cache&&is(i,[At],a,!0))),Gt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(l(156,i.tag))}function Xn(t){t.flags|=4}function rd(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!pm(i)){if(i=xn.current,i!==null&&((Qe&4194048)===Qe?In!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||i!==In))throw fl=rs,Fc;t.flags|=8192}}function Fa(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Wi():536870912,t.lanes|=i,Eo|=i)}function Sl(t,i){if(!tt)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function pt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,c=0;if(i)for(var m=t.child;m!==null;)a|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)a|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=c,t.childLanes=a,i}function Jg(t,i,a){var c=i.pendingProps;switch(Wr(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(i),null;case 1:return pt(i),null;case 3:return a=i.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Fn(At),te(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ol(i)?Xn(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bc())),pt(i),null;case 26:return a=i.memoizedState,t===null?(Xn(i),a!==null?(pt(i),rd(i,a)):(pt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Xn(i),pt(i),rd(i,a)):(pt(i),i.flags&=-16777217):(t.memoizedProps!==c&&Xn(i),pt(i),i.flags&=-16777217),null;case 27:Ne(i),a=ne.current;var m=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==c&&Xn(i);else{if(!c){if(i.stateNode===null)throw Error(l(166));return pt(i),null}t=$.current,ol(i)?Lc(i):(t=rm(m,c,a),i.stateNode=t,Xn(i))}return pt(i),null;case 5:if(Ne(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==c&&Xn(i);else{if(!c){if(i.stateNode===null)throw Error(l(166));return pt(i),null}if(t=$.current,ol(i))Lc(i);else{switch(m=nr(ne.current),t){case 1:t=m.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=m.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=m.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=m.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=m.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?t.multiple=!0:c.size&&(t.size=c.size);break;default:t=typeof c.is=="string"?m.createElement(a,{is:c.is}):m.createElement(a)}}t[Nt]=i,t[qt]=c;e:for(m=i.child;m!==null;){if(m.tag===5||m.tag===6)t.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===i)break e;for(;m.sibling===null;){if(m.return===null||m.return===i)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}i.stateNode=t;e:switch(Ht(t,a,c),a){case"button":case"input":case"select":case"textarea":t=!!c.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Xn(i)}}return pt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==c&&Xn(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(l(166));if(t=ne.current,ol(i)){if(t=i.stateNode,a=i.memoizedProps,c=null,m=Xt,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}t[Nt]=i,t=!!(t.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||em(t.nodeValue,a)),t||Hi(i)}else t=nr(t).createTextNode(c),t[Nt]=i,i.stateNode=t}return pt(i),null;case 13:if(c=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=ol(i),c!==null&&c.dehydrated!==null){if(t===null){if(!m)throw Error(l(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(l(317));m[Nt]=i}else ll(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pt(i),m=!1}else m=Bc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Yn(i),i):(Yn(i),null)}if(Yn(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=c!==null,t=t!==null&&t.memoizedState!==null,a){c=i.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==m&&(c.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Fa(i,i.updateQueue),pt(i),null;case 4:return te(),t===null&&fu(i.stateNode.containerInfo),pt(i),null;case 10:return Fn(i.type),pt(i),null;case 19:if(J(Mt),m=i.memoizedState,m===null)return pt(i),null;if(c=(i.flags&128)!==0,y=m.rendering,y===null)if(c)Sl(m,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(y=Ba(t),y!==null){for(i.flags|=128,Sl(m,!1),t=y.updateQueue,i.updateQueue=t,Fa(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Uc(a,t),a=a.sibling;return pe(Mt,Mt.current&1|2),i.child}t=t.sibling}m.tail!==null&&G()>Ja&&(i.flags|=128,c=!0,Sl(m,!1),i.lanes=4194304)}else{if(!c)if(t=Ba(y),t!==null){if(i.flags|=128,c=!0,t=t.updateQueue,i.updateQueue=t,Fa(i,t),Sl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!tt)return pt(i),null}else 2*G()-m.renderingStartTime>Ja&&a!==536870912&&(i.flags|=128,c=!0,Sl(m,!1),i.lanes=4194304);m.isBackwards?(y.sibling=i.child,i.child=y):(t=m.last,t!==null?t.sibling=y:i.child=y,m.last=y)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=G(),i.sibling=null,t=Mt.current,pe(Mt,c?t&1|2:t&1),i):(pt(i),null);case 22:case 23:return Yn(i),ms(),c=i.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(pt(i),i.subtreeFlags&6&&(i.flags|=8192)):pt(i),a=i.updateQueue,a!==null&&Fa(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),t!==null&&J(Oi),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Fn(At),pt(i),null;case 25:return null;case 30:return null}throw Error(l(156,i.tag))}function Xg(t,i){switch(Wr(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Fn(At),te(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ne(i),null;case 13:if(Yn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(l(340));ll()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return J(Mt),null;case 4:return te(),null;case 10:return Fn(i.type),null;case 22:case 23:return Yn(i),ms(),t!==null&&J(Oi),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Fn(At),null;case 25:return null;default:return null}}function sd(t,i){switch(Wr(i),i.tag){case 3:Fn(At),te();break;case 26:case 27:case 5:Ne(i);break;case 4:te();break;case 13:Yn(i);break;case 19:J(Mt);break;case 10:Fn(i.type);break;case 22:case 23:Yn(i),ms(),t!==null&&J(Oi);break;case 24:Fn(At)}}function Tl(t,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var m=c.next;a=m;do{if((a.tag&t)===t){c=void 0;var y=a.create,E=a.inst;c=y(),E.destroy=c}a=a.next}while(a!==m)}}catch(D){ft(i,i.return,D)}}function pi(t,i,a){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var y=m.next;c=y;do{if((c.tag&t)===t){var E=c.inst,D=E.destroy;if(D!==void 0){E.destroy=void 0,m=i;var K=a,ue=D;try{ue()}catch(ye){ft(m,K,ye)}}}c=c.next}while(c!==y)}}catch(ye){ft(i,i.return,ye)}}function ud(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Zc(i,a)}catch(c){ft(t,t.return,c)}}}function cd(t,i,a){a.props=Ji(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(c){ft(t,i,c)}}function _l(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof a=="function"?t.refCleanup=a(c):a.current=c}}catch(m){ft(t,i,m)}}function Un(t,i){var a=t.ref,c=t.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(m){ft(t,i,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){ft(t,i,m)}else a.current=null}function fd(t){var i=t.type,a=t.memoizedProps,c=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(m){ft(t,t.return,m)}}function Hs(t,i,a){try{var c=t.stateNode;h0(c,t.type,a,i),c[qt]=i}catch(m){ft(t,t.return,m)}}function dd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&_i(t.type)||t.tag===4}function qs(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&_i(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fs(t,i,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=tr));else if(c!==4&&(c===27&&_i(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Fs(t,i,a),t=t.sibling;t!==null;)Fs(t,i,a),t=t.sibling}function Oa(t,i,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(c!==4&&(c===27&&_i(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Oa(t,i,a),t=t.sibling;t!==null;)Oa(t,i,a),t=t.sibling}function md(t){var i=t.stateNode,a=t.memoizedProps;try{for(var c=t.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Ht(i,c,a),i[Nt]=t,i[qt]=a}catch(y){ft(t,t.return,y)}}var Kn=!1,St=!1,Os=!1,hd=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function Kg(t,i){if(t=t.containerInfo,hu=sr,t=wc(t),qr(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var m=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var E=0,D=-1,K=-1,ue=0,ye=0,_e=t,ce=null;t:for(;;){for(var me;_e!==a||m!==0&&_e.nodeType!==3||(D=E+m),_e!==y||c!==0&&_e.nodeType!==3||(K=E+c),_e.nodeType===3&&(E+=_e.nodeValue.length),(me=_e.firstChild)!==null;)ce=_e,_e=me;for(;;){if(_e===t)break t;if(ce===a&&++ue===m&&(D=E),ce===y&&++ye===c&&(K=E),(me=_e.nextSibling)!==null)break;_e=ce,ce=_e.parentNode}_e=me}a=D===-1||K===-1?null:{start:D,end:K}}else a=null}a=a||{start:0,end:0}}else a=null;for(pu={focusedElem:t,selectionRange:a},sr=!1,Ut=i;Ut!==null;)if(i=Ut,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Ut=t;else for(;Ut!==null;){switch(i=Ut,y=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&y!==null){t=void 0,a=i,m=y.memoizedProps,y=y.memoizedState,c=a.stateNode;try{var Ve=Ji(a.type,m,a.elementType===a.type);t=c.getSnapshotBeforeUpdate(Ve,y),c.__reactInternalSnapshotBeforeUpdate=t}catch(ze){ft(a,a.return,ze)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)vu(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":vu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=i.sibling,t!==null){t.return=i.return,Ut=t;break}Ut=i.return}}function pd(t,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:gi(t,a),c&4&&Tl(5,a);break;case 1:if(gi(t,a),c&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(E){ft(a,a.return,E)}else{var m=Ji(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(m,i,t.__reactInternalSnapshotBeforeUpdate)}catch(E){ft(a,a.return,E)}}c&64&&ud(a),c&512&&_l(a,a.return);break;case 3:if(gi(t,a),c&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Zc(t,i)}catch(E){ft(a,a.return,E)}}break;case 27:i===null&&c&4&&md(a);case 26:case 5:gi(t,a),i===null&&c&4&&fd(a),c&512&&_l(a,a.return);break;case 12:gi(t,a);break;case 13:gi(t,a),c&4&&vd(t,a),c&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=i0.bind(null,a),S0(t,a))));break;case 22:if(c=a.memoizedState!==null||Kn,!c){i=i!==null&&i.memoizedState!==null||St,m=Kn;var y=St;Kn=c,(St=i)&&!y?yi(t,a,(a.subtreeFlags&8772)!==0):gi(t,a),Kn=m,St=y}break;case 30:break;default:gi(t,a)}}function gd(t){var i=t.alternate;i!==null&&(t.alternate=null,gd(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&no(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,Wt=!1;function Zn(t,i,a){for(a=a.child;a!==null;)yd(t,i,a),a=a.sibling}function yd(t,i,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(Ue,a)}catch{}switch(a.tag){case 26:St||Un(a,i),Zn(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:St||Un(a,i);var c=ht,m=Wt;_i(a.type)&&(ht=a.stateNode,Wt=!1),Zn(t,i,a),kl(a.stateNode),ht=c,Wt=m;break;case 5:St||Un(a,i);case 6:if(c=ht,m=Wt,ht=null,Zn(t,i,a),ht=c,Wt=m,ht!==null)if(Wt)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(y){ft(a,i,y)}else try{ht.removeChild(a.stateNode)}catch(y){ft(a,i,y)}break;case 18:ht!==null&&(Wt?(t=ht,lm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Vl(t)):lm(ht,a.stateNode));break;case 4:c=ht,m=Wt,ht=a.stateNode.containerInfo,Wt=!0,Zn(t,i,a),ht=c,Wt=m;break;case 0:case 11:case 14:case 15:St||pi(2,a,i),St||pi(4,a,i),Zn(t,i,a);break;case 1:St||(Un(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&cd(a,i,c)),Zn(t,i,a);break;case 21:Zn(t,i,a);break;case 22:St=(c=St)||a.memoizedState!==null,Zn(t,i,a),St=c;break;default:Zn(t,i,a)}}function vd(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Vl(t)}catch(a){ft(i,i.return,a)}}function Zg(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new hd),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new hd),i;default:throw Error(l(435,t.tag))}}function Ys(t,i){var a=Zg(t);i.forEach(function(c){var m=o0.bind(null,t,c);a.has(c)||(a.add(c),c.then(m,m))})}function ln(t,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var m=a[c],y=t,E=i,D=E;e:for(;D!==null;){switch(D.tag){case 27:if(_i(D.type)){ht=D.stateNode,Wt=!1;break e}break;case 5:ht=D.stateNode,Wt=!1;break e;case 3:case 4:ht=D.stateNode.containerInfo,Wt=!0;break e}D=D.return}if(ht===null)throw Error(l(160));yd(y,E,m),ht=null,Wt=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)xd(i,t),i=i.sibling}var Mn=null;function xd(t,i){var a=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ln(i,t),an(t),c&4&&(pi(3,t,t.return),Tl(3,t),pi(5,t,t.return));break;case 1:ln(i,t),an(t),c&512&&(St||a===null||Un(a,a.return)),c&64&&Kn&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var m=Mn;if(ln(i,t),an(t),c&512&&(St||a===null||Un(a,a.return)),c&4){var y=a!==null?a.memoizedState:null;if(c=t.memoizedState,a===null)if(c===null)if(t.stateNode===null){e:{c=t.type,a=t.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Dn]||y[Nt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(c),m.head.insertBefore(y,m.querySelector("head > title"))),Ht(y,c,a),y[Nt]=t,xt(y),c=y;break e;case"link":var E=mm("link","href",m).get(c+(a.href||""));if(E){for(var D=0;D<E.length;D++)if(y=E[D],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(D,1);break t}}y=m.createElement(c),Ht(y,c,a),m.head.appendChild(y);break;case"meta":if(E=mm("meta","content",m).get(c+(a.content||""))){for(D=0;D<E.length;D++)if(y=E[D],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(D,1);break t}}y=m.createElement(c),Ht(y,c,a),m.head.appendChild(y);break;default:throw Error(l(468,c))}y[Nt]=t,xt(y),c=y}t.stateNode=c}else hm(m,t.type,t.stateNode);else t.stateNode=dm(m,c,t.memoizedProps);else y!==c?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,c===null?hm(m,t.type,t.stateNode):dm(m,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Hs(t,t.memoizedProps,a.memoizedProps)}break;case 27:ln(i,t),an(t),c&512&&(St||a===null||Un(a,a.return)),a!==null&&c&4&&Hs(t,t.memoizedProps,a.memoizedProps);break;case 5:if(ln(i,t),an(t),c&512&&(St||a===null||Un(a,a.return)),t.flags&32){m=t.stateNode;try{ri(m,"")}catch(me){ft(t,t.return,me)}}c&4&&t.stateNode!=null&&(m=t.memoizedProps,Hs(t,m,a!==null?a.memoizedProps:m)),c&1024&&(Os=!0);break;case 6:if(ln(i,t),an(t),c&4){if(t.stateNode===null)throw Error(l(162));c=t.memoizedProps,a=t.stateNode;try{a.nodeValue=c}catch(me){ft(t,t.return,me)}}break;case 3:if(lr=null,m=Mn,Mn=ir(i.containerInfo),ln(i,t),Mn=m,an(t),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Vl(i.containerInfo)}catch(me){ft(t,t.return,me)}Os&&(Os=!1,Cd(t));break;case 4:c=Mn,Mn=ir(t.stateNode.containerInfo),ln(i,t),an(t),Mn=c;break;case 12:ln(i,t),an(t);break;case 13:ln(i,t),an(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qs=G()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ys(t,c)));break;case 22:m=t.memoizedState!==null;var K=a!==null&&a.memoizedState!==null,ue=Kn,ye=St;if(Kn=ue||m,St=ye||K,ln(i,t),St=ye,Kn=ue,an(t),c&8192)e:for(i=t.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(a===null||K||Kn||St||Xi(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){K=a=i;try{if(y=K.stateNode,m)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{D=K.stateNode;var _e=K.memoizedProps.style,ce=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;D.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(me){ft(K,K.return,me)}}}else if(i.tag===6){if(a===null){K=i;try{K.stateNode.nodeValue=m?"":K.memoizedProps}catch(me){ft(K,K.return,me)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=t.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Ys(t,a))));break;case 19:ln(i,t),an(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ys(t,c)));break;case 30:break;case 21:break;default:ln(i,t),an(t)}}function an(t){var i=t.flags;if(i&2){try{for(var a,c=t.return;c!==null;){if(dd(c)){a=c;break}c=c.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var m=a.stateNode,y=qs(t);Oa(t,y,m);break;case 5:var E=a.stateNode;a.flags&32&&(ri(E,""),a.flags&=-33);var D=qs(t);Oa(t,D,E);break;case 3:case 4:var K=a.stateNode.containerInfo,ue=qs(t);Fs(t,ue,K);break;default:throw Error(l(161))}}catch(ye){ft(t,t.return,ye)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Cd(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Cd(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function gi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)pd(t,i.alternate,i),i=i.sibling}function Xi(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:pi(4,i,i.return),Xi(i);break;case 1:Un(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&cd(i,i.return,a),Xi(i);break;case 27:kl(i.stateNode);case 26:case 5:Un(i,i.return),Xi(i);break;case 22:i.memoizedState===null&&Xi(i);break;case 30:Xi(i);break;default:Xi(i)}t=t.sibling}}function yi(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,m=t,y=i,E=y.flags;switch(y.tag){case 0:case 11:case 15:yi(m,y,a),Tl(4,y);break;case 1:if(yi(m,y,a),c=y,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ue){ft(c,c.return,ue)}if(c=y,m=c.updateQueue,m!==null){var D=c.stateNode;try{var K=m.shared.hiddenCallbacks;if(K!==null)for(m.shared.hiddenCallbacks=null,m=0;m<K.length;m++)Kc(K[m],D)}catch(ue){ft(c,c.return,ue)}}a&&E&64&&ud(y),_l(y,y.return);break;case 27:md(y);case 26:case 5:yi(m,y,a),a&&c===null&&E&4&&fd(y),_l(y,y.return);break;case 12:yi(m,y,a);break;case 13:yi(m,y,a),a&&E&4&&vd(m,y);break;case 22:y.memoizedState===null&&yi(m,y,a),_l(y,y.return);break;case 30:break;default:yi(m,y,a)}i=i.sibling}}function Js(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&sl(a))}function Xs(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&sl(t))}function Pn(t,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sd(t,i,a,c),i=i.sibling}function Sd(t,i,a,c){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Pn(t,i,a,c),m&2048&&Tl(9,i);break;case 1:Pn(t,i,a,c);break;case 3:Pn(t,i,a,c),m&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&sl(t)));break;case 12:if(m&2048){Pn(t,i,a,c),t=i.stateNode;try{var y=i.memoizedProps,E=y.id,D=y.onPostCommit;typeof D=="function"&&D(E,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(K){ft(i,i.return,K)}}else Pn(t,i,a,c);break;case 13:Pn(t,i,a,c);break;case 23:break;case 22:y=i.stateNode,E=i.alternate,i.memoizedState!==null?y._visibility&2?Pn(t,i,a,c):wl(t,i):y._visibility&2?Pn(t,i,a,c):(y._visibility|=2,_o(t,i,a,c,(i.subtreeFlags&10256)!==0)),m&2048&&Js(E,i);break;case 24:Pn(t,i,a,c),m&2048&&Xs(i.alternate,i);break;default:Pn(t,i,a,c)}}function _o(t,i,a,c,m){for(m=m&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var y=t,E=i,D=a,K=c,ue=E.flags;switch(E.tag){case 0:case 11:case 15:_o(y,E,D,K,m),Tl(8,E);break;case 23:break;case 22:var ye=E.stateNode;E.memoizedState!==null?ye._visibility&2?_o(y,E,D,K,m):wl(y,E):(ye._visibility|=2,_o(y,E,D,K,m)),m&&ue&2048&&Js(E.alternate,E);break;case 24:_o(y,E,D,K,m),m&&ue&2048&&Xs(E.alternate,E);break;default:_o(y,E,D,K,m)}i=i.sibling}}function wl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,c=i,m=c.flags;switch(c.tag){case 22:wl(a,c),m&2048&&Js(c.alternate,c);break;case 24:wl(a,c),m&2048&&Xs(c.alternate,c);break;default:wl(a,c)}i=i.sibling}}var bl=8192;function wo(t){if(t.subtreeFlags&bl)for(t=t.child;t!==null;)Td(t),t=t.sibling}function Td(t){switch(t.tag){case 26:wo(t),t.flags&bl&&t.memoizedState!==null&&U0(Mn,t.memoizedState,t.memoizedProps);break;case 5:wo(t);break;case 3:case 4:var i=Mn;Mn=ir(t.stateNode.containerInfo),wo(t),Mn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=bl,bl=16777216,wo(t),bl=i):wo(t));break;default:wo(t)}}function _d(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function El(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];Ut=c,bd(c,t)}_d(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wd(t),t=t.sibling}function wd(t){switch(t.tag){case 0:case 11:case 15:El(t),t.flags&2048&&pi(9,t,t.return);break;case 3:El(t);break;case 12:El(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ya(t)):El(t);break;default:El(t)}}function Ya(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];Ut=c,bd(c,t)}_d(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:pi(8,i,i.return),Ya(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ya(i));break;default:Ya(i)}t=t.sibling}}function bd(t,i){for(;Ut!==null;){var a=Ut;switch(a.tag){case 0:case 11:case 15:pi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:sl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Ut=c;else e:for(a=t;Ut!==null;){c=Ut;var m=c.sibling,y=c.return;if(gd(c),c===a){Ut=null;break e}if(m!==null){m.return=y,Ut=m;break e}Ut=y}}}var $g={getCacheForType:function(t){var i=Ft(At),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},Qg=typeof WeakMap=="function"?WeakMap:Map,lt=0,dt=null,Ze=null,Qe=0,at=0,rn=null,vi=!1,bo=!1,Ks=!1,$n=0,vt=0,xi=0,Ki=0,Zs=0,Cn=0,Eo=0,Al=null,en=null,$s=!1,Qs=0,Ja=1/0,Xa=null,Ci=null,Vt=0,Si=null,Ao=null,Mo=0,js=0,Ws=null,Ed=null,Ml=0,eu=null;function sn(){if((lt&2)!==0&&Qe!==0)return Qe&-Qe;if(O.T!==null){var t=po;return t!==0?t:ru()}return Xe()}function Ad(){Cn===0&&(Cn=(Qe&536870912)===0||tt?Wn():536870912);var t=xn.current;return t!==null&&(t.flags|=32),Cn}function un(t,i,a){(t===dt&&(at===2||at===9)||t.cancelPendingCommit!==null)&&(Ro(t,0),Ti(t,Qe,Cn,!1)),gt(t,a),((lt&2)===0||t!==dt)&&(t===dt&&((lt&2)===0&&(Ki|=a),vt===4&&Ti(t,Qe,Cn,!1)),Ln(t))}function Md(t,i,a){if((lt&6)!==0)throw Error(l(327));var c=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Rt(t,i),m=c?e0(t,i):iu(t,i,!0),y=c;do{if(m===0){bo&&!c&&Ti(t,i,0,!1);break}else{if(a=t.current.alternate,y&&!jg(a)){m=iu(t,i,!1),y=!1;continue}if(m===2){if(y=i,t.errorRecoveryDisabledLanes&y)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var D=t;m=Al;var K=D.current.memoizedState.isDehydrated;if(K&&(Ro(D,E).flags|=256),E=iu(D,E,!1),E!==2){if(Ks&&!K){D.errorRecoveryDisabledLanes|=y,Ki|=y,m=4;break e}y=en,en=m,y!==null&&(en===null?en=y:en.push.apply(en,y))}m=E}if(y=!1,m!==2)continue}}if(m===1){Ro(t,0),Ti(t,i,0,!0);break}e:{switch(c=t,y=m,y){case 0:case 1:throw Error(l(345));case 4:if((i&4194048)!==i)break;case 6:Ti(c,i,Cn,!vi);break e;case 2:en=null;break;case 3:case 5:break;default:throw Error(l(329))}if((i&62914560)===i&&(m=Qs+300-G(),10<m)){if(Ti(c,i,Cn,!vi),ct(c,0,!0)!==0)break e;c.timeoutHandle=im(Rd.bind(null,c,a,en,Xa,$s,i,Cn,Ki,Eo,vi,y,2,-0,0),m);break e}Rd(c,a,en,Xa,$s,i,Cn,Ki,Eo,vi,y,0,-0,0)}}break}while(!0);Ln(t)}function Rd(t,i,a,c,m,y,E,D,K,ue,ye,_e,ce,me){if(t.timeoutHandle=-1,_e=i.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(Pl={stylesheets:null,count:0,unsuspend:I0},Td(i),_e=P0(),_e!==null)){t.cancelPendingCommit=_e(Ld.bind(null,t,i,y,a,c,m,E,D,K,ye,1,ce,me)),Ti(t,y,E,!ue);return}Ld(t,i,y,a,c,m,E,D,K)}function jg(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var m=a[c],y=m.getSnapshot;m=m.value;try{if(!nn(y(),m))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ti(t,i,a,c){i&=~Zs,i&=~Ki,t.suspendedLanes|=i,t.pingedLanes&=~i,c&&(t.warmLanes|=i),c=t.expirationTimes;for(var m=i;0<m;){var y=31-je(m),E=1<<y;c[y]=-1,m&=~E}a!==0&&Kl(t,a,i)}function Ka(){return(lt&6)===0?(Rl(0),!1):!0}function tu(){if(Ze!==null){if(at===0)var t=Ze.return;else t=Ze,qn=qi=null,vs(t),So=null,xl=0,t=Ze;for(;t!==null;)sd(t.alternate,t),t=t.return;Ze=null}}function Ro(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,g0(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),tu(),dt=t,Ze=a=Gn(t.current,null),Qe=i,at=0,rn=null,vi=!1,bo=Rt(t,i),Ks=!1,Eo=Cn=Zs=Ki=xi=vt=0,en=Al=null,$s=!1,(i&8)!==0&&(i|=i&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=i;0<c;){var m=31-je(c),y=1<<m;i|=t[m],c&=~y}return $n=i,ga(),a}function Nd(t,i){Je=null,O.H=Pa,i===cl||i===ba?(i=Jc(),at=3):i===Fc?(i=Jc(),at=4):at=i===Kf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,rn=i,Ze===null&&(vt=1,Va(t,pn(i,t.current)))}function Dd(){var t=O.H;return O.H=Pa,t===null?Pa:t}function kd(){var t=O.A;return O.A=$g,t}function nu(){vt=4,vi||(Qe&4194048)!==Qe&&xn.current!==null||(bo=!0),(xi&134217727)===0&&(Ki&134217727)===0||dt===null||Ti(dt,Qe,Cn,!1)}function iu(t,i,a){var c=lt;lt|=2;var m=Dd(),y=kd();(dt!==t||Qe!==i)&&(Xa=null,Ro(t,i)),i=!1;var E=vt;e:do try{if(at!==0&&Ze!==null){var D=Ze,K=rn;switch(at){case 8:tu(),E=6;break e;case 3:case 2:case 9:case 6:xn.current===null&&(i=!0);var ue=at;if(at=0,rn=null,No(t,D,K,ue),a&&bo){E=0;break e}break;default:ue=at,at=0,rn=null,No(t,D,K,ue)}}Wg(),E=vt;break}catch(ye){Nd(t,ye)}while(!0);return i&&t.shellSuspendCounter++,qn=qi=null,lt=c,O.H=m,O.A=y,Ze===null&&(dt=null,Qe=0,ga()),E}function Wg(){for(;Ze!==null;)Id(Ze)}function e0(t,i){var a=lt;lt|=2;var c=Dd(),m=kd();dt!==t||Qe!==i?(Xa=null,Ja=G()+500,Ro(t,i)):bo=Rt(t,i);e:do try{if(at!==0&&Ze!==null){i=Ze;var y=rn;t:switch(at){case 1:at=0,rn=null,No(t,i,y,1);break;case 2:case 9:if(Oc(y)){at=0,rn=null,Ud(i);break}i=function(){at!==2&&at!==9||dt!==t||(at=7),Ln(t)},y.then(i,i);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Oc(y)?(at=0,rn=null,Ud(i)):(at=0,rn=null,No(t,i,y,7));break;case 5:var E=null;switch(Ze.tag){case 26:E=Ze.memoizedState;case 5:case 27:var D=Ze;if(!E||pm(E)){at=0,rn=null;var K=D.sibling;if(K!==null)Ze=K;else{var ue=D.return;ue!==null?(Ze=ue,Za(ue)):Ze=null}break t}}at=0,rn=null,No(t,i,y,5);break;case 6:at=0,rn=null,No(t,i,y,6);break;case 8:tu(),vt=6;break e;default:throw Error(l(462))}}t0();break}catch(ye){Nd(t,ye)}while(!0);return qn=qi=null,O.H=c,O.A=m,lt=a,Ze!==null?0:(dt=null,Qe=0,ga(),vt)}function t0(){for(;Ze!==null&&!ge();)Id(Ze)}function Id(t){var i=ad(t.alternate,t,$n);t.memoizedProps=t.pendingProps,i===null?Za(t):Ze=i}function Ud(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=ed(a,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=ed(a,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:vs(i);default:sd(a,i),i=Ze=Uc(i,$n),i=ad(a,i,$n)}t.memoizedProps=t.pendingProps,i===null?Za(t):Ze=i}function No(t,i,a,c){qn=qi=null,vs(i),So=null,xl=0;var m=i.return;try{if(Og(t,m,i,a,Qe)){vt=1,Va(t,pn(a,t.current)),Ze=null;return}}catch(y){if(m!==null)throw Ze=m,y;vt=1,Va(t,pn(a,t.current)),Ze=null;return}i.flags&32768?(tt||c===1?t=!0:bo||(Qe&536870912)!==0?t=!1:(vi=t=!0,(c===2||c===9||c===3||c===6)&&(c=xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Pd(i,t)):Za(i)}function Za(t){var i=t;do{if((i.flags&32768)!==0){Pd(i,vi);return}t=i.return;var a=Jg(i.alternate,i,$n);if(a!==null){Ze=a;return}if(i=i.sibling,i!==null){Ze=i;return}Ze=i=t}while(i!==null);vt===0&&(vt=5)}function Pd(t,i){do{var a=Xg(t.alternate,t);if(a!==null){a.flags&=32767,Ze=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ze=t;return}Ze=t=a}while(t!==null);vt=6,Ze=null}function Ld(t,i,a,c,m,y,E,D,K){t.cancelPendingCommit=null;do $a();while(Vt!==0);if((lt&6)!==0)throw Error(l(327));if(i!==null){if(i===t.current)throw Error(l(177));if(y=i.lanes|i.childLanes,y|=Xr,Jt(t,a,y,E,D,K),t===dt&&(Ze=dt=null,Qe=0),Ao=i,Si=t,Mo=a,js=y,Ws=m,Ed=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,l0(Te,function(){return Hd(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,m=j.p,j.p=2,E=lt,lt|=4;try{Kg(t,i,a)}finally{lt=E,j.p=m,O.T=c}}Vt=1,zd(),Bd(),Gd()}}function zd(){if(Vt===1){Vt=0;var t=Si,i=Ao,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var c=j.p;j.p=2;var m=lt;lt|=4;try{xd(i,t);var y=pu,E=wc(t.containerInfo),D=y.focusedElem,K=y.selectionRange;if(E!==D&&D&&D.ownerDocument&&_c(D.ownerDocument.documentElement,D)){if(K!==null&&qr(D)){var ue=K.start,ye=K.end;if(ye===void 0&&(ye=ue),"selectionStart"in D)D.selectionStart=ue,D.selectionEnd=Math.min(ye,D.value.length);else{var _e=D.ownerDocument||document,ce=_e&&_e.defaultView||window;if(ce.getSelection){var me=ce.getSelection(),Ve=D.textContent.length,ze=Math.min(K.start,Ve),ut=K.end===void 0?ze:Math.min(K.end,Ve);!me.extend&&ze>ut&&(E=ut,ut=ze,ze=E);var ie=Tc(D,ze),Q=Tc(D,ut);if(ie&&Q&&(me.rangeCount!==1||me.anchorNode!==ie.node||me.anchorOffset!==ie.offset||me.focusNode!==Q.node||me.focusOffset!==Q.offset)){var se=_e.createRange();se.setStart(ie.node,ie.offset),me.removeAllRanges(),ze>ut?(me.addRange(se),me.extend(Q.node,Q.offset)):(se.setEnd(Q.node,Q.offset),me.addRange(se))}}}}for(_e=[],me=D;me=me.parentNode;)me.nodeType===1&&_e.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<_e.length;D++){var Ce=_e[D];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}sr=!!hu,pu=hu=null}finally{lt=m,j.p=c,O.T=a}}t.current=i,Vt=2}}function Bd(){if(Vt===2){Vt=0;var t=Si,i=Ao,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var c=j.p;j.p=2;var m=lt;lt|=4;try{pd(t,i.alternate,i)}finally{lt=m,j.p=c,O.T=a}}Vt=3}}function Gd(){if(Vt===4||Vt===3){Vt=0,he();var t=Si,i=Ao,a=Mo,c=Ed;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Vt=5:(Vt=0,Ao=Si=null,Vd(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&(Ci=null),mn(a),i=i.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(Ue,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=O.T,m=j.p,j.p=2,O.T=null;try{for(var y=t.onRecoverableError,E=0;E<c.length;E++){var D=c[E];y(D.value,{componentStack:D.stack})}}finally{O.T=i,j.p=m}}(Mo&3)!==0&&$a(),Ln(t),m=t.pendingLanes,(a&4194090)!==0&&(m&42)!==0?t===eu?Ml++:(Ml=0,eu=t):Ml=0,Rl(0)}}function Vd(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,sl(i)))}function $a(t){return zd(),Bd(),Gd(),Hd()}function Hd(){if(Vt!==5)return!1;var t=Si,i=js;js=0;var a=mn(Mo),c=O.T,m=j.p;try{j.p=32>a?32:a,O.T=null,a=Ws,Ws=null;var y=Si,E=Mo;if(Vt=0,Ao=Si=null,Mo=0,(lt&6)!==0)throw Error(l(331));var D=lt;if(lt|=4,wd(y.current),Sd(y,y.current,E,a),lt=D,Rl(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(Ue,y)}catch{}return!0}finally{j.p=m,O.T=c,Vd(t,i)}}function qd(t,i,a){i=pn(a,i),i=ks(t.stateNode,i,2),t=fi(t,i,2),t!==null&&(gt(t,2),Ln(t))}function ft(t,i,a){if(t.tag===3)qd(t,t,a);else for(;i!==null;){if(i.tag===3){qd(i,t,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ci===null||!Ci.has(c))){t=pn(a,t),a=Jf(2),c=fi(i,a,2),c!==null&&(Xf(a,c,i,t),gt(c,2),Ln(c));break}}i=i.return}}function ou(t,i,a){var c=t.pingCache;if(c===null){c=t.pingCache=new Qg;var m=new Set;c.set(i,m)}else m=c.get(i),m===void 0&&(m=new Set,c.set(i,m));m.has(a)||(Ks=!0,m.add(a),t=n0.bind(null,t,i,a),i.then(t,t))}function n0(t,i,a){var c=t.pingCache;c!==null&&c.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,dt===t&&(Qe&a)===a&&(vt===4||vt===3&&(Qe&62914560)===Qe&&300>G()-Qs?(lt&2)===0&&Ro(t,0):Zs|=a,Eo===Qe&&(Eo=0)),Ln(t)}function Fd(t,i){i===0&&(i=Wi()),t=co(t,i),t!==null&&(gt(t,i),Ln(t))}function i0(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Fd(t,a)}function o0(t,i){var a=0;switch(t.tag){case 13:var c=t.stateNode,m=t.memoizedState;m!==null&&(a=m.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(l(314))}c!==null&&c.delete(i),Fd(t,a)}function l0(t,i){return qe(t,i)}var Qa=null,Do=null,lu=!1,ja=!1,au=!1,Zi=0;function Ln(t){t!==Do&&t.next===null&&(Do===null?Qa=Do=t:Do=Do.next=t),ja=!0,lu||(lu=!0,r0())}function Rl(t,i){if(!au&&ja){au=!0;do for(var a=!1,c=Qa;c!==null;){if(t!==0){var m=c.pendingLanes;if(m===0)var y=0;else{var E=c.suspendedLanes,D=c.pingedLanes;y=(1<<31-je(42|t)+1)-1,y&=m&~(E&~D),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,Xd(c,y))}else y=Qe,y=ct(c,c===dt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Rt(c,y)||(a=!0,Xd(c,y));c=c.next}while(a);au=!1}}function a0(){Od()}function Od(){ja=lu=!1;var t=0;Zi!==0&&(p0()&&(t=Zi),Zi=0);for(var i=G(),a=null,c=Qa;c!==null;){var m=c.next,y=Yd(c,i);y===0?(c.next=null,a===null?Qa=m:a.next=m,m===null&&(Do=a)):(a=c,(t!==0||(y&3)!==0)&&(ja=!0)),c=m}Rl(t)}function Yd(t,i){for(var a=t.suspendedLanes,c=t.pingedLanes,m=t.expirationTimes,y=t.pendingLanes&-62914561;0<y;){var E=31-je(y),D=1<<E,K=m[E];K===-1?((D&a)===0||(D&c)!==0)&&(m[E]=Kt(D,i)):K<=i&&(t.expiredLanes|=D),y&=~D}if(i=dt,a=Qe,a=ct(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,a===0||t===i&&(at===2||at===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&b(c),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Rt(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(c!==null&&b(c),mn(a)){case 2:case 8:a=xe;break;case 32:a=Te;break;case 268435456:a=Ae;break;default:a=Te}return c=Jd.bind(null,t),a=qe(a,c),t.callbackPriority=i,t.callbackNode=a,i}return c!==null&&c!==null&&b(c),t.callbackPriority=2,t.callbackNode=null,2}function Jd(t,i){if(Vt!==0&&Vt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if($a()&&t.callbackNode!==a)return null;var c=Qe;return c=ct(t,t===dt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Md(t,c,i),Yd(t,G()),t.callbackNode!=null&&t.callbackNode===a?Jd.bind(null,t):null)}function Xd(t,i){if($a())return null;Md(t,i,!0)}function r0(){y0(function(){(lt&6)!==0?qe(ee,a0):Od()})}function ru(){return Zi===0&&(Zi=Wn()),Zi}function Kd(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ge(""+t)}function Zd(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function s0(t,i,a,c,m){if(i==="submit"&&a&&a.stateNode===m){var y=Kd((m[qt]||null).action),E=c.submitter;E&&(i=(i=E[qt]||null)?Kd(i.formAction):E.getAttribute("formAction"),i!==null&&(y=i,E=null));var D=new ma("action","action",null,c,m);t.push({event:D,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Zi!==0){var K=E?Zd(m,E):new FormData(m);As(a,{pending:!0,data:K,method:m.method,action:y},null,K)}}else typeof y=="function"&&(D.preventDefault(),K=E?Zd(m,E):new FormData(m),As(a,{pending:!0,data:K,method:m.method,action:y},y,K))},currentTarget:m}]})}}for(var su=0;su<Jr.length;su++){var uu=Jr[su],u0=uu.toLowerCase(),c0=uu[0].toUpperCase()+uu.slice(1);An(u0,"on"+c0)}An(Ac,"onAnimationEnd"),An(Mc,"onAnimationIteration"),An(Rc,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(Ag,"onTransitionRun"),An(Mg,"onTransitionStart"),An(Rg,"onTransitionCancel"),An(Nc,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function $d(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var c=t[a],m=c.event;c=c.listeners;e:{var y=void 0;if(i)for(var E=c.length-1;0<=E;E--){var D=c[E],K=D.instance,ue=D.currentTarget;if(D=D.listener,K!==y&&m.isPropagationStopped())break e;y=D,m.currentTarget=ue;try{y(m)}catch(ye){Ga(ye)}m.currentTarget=null,y=K}else for(E=0;E<c.length;E++){if(D=c[E],K=D.instance,ue=D.currentTarget,D=D.listener,K!==y&&m.isPropagationStopped())break e;y=D,m.currentTarget=ue;try{y(m)}catch(ye){Ga(ye)}m.currentTarget=null,y=K}}}}function $e(t,i){var a=i[to];a===void 0&&(a=i[to]=new Set);var c=t+"__bubble";a.has(c)||(Qd(i,t,2,!1),a.add(c))}function cu(t,i,a){var c=0;i&&(c|=4),Qd(a,t,c,i)}var Wa="_reactListening"+Math.random().toString(36).slice(2);function fu(t){if(!t[Wa]){t[Wa]=!0,Ql.forEach(function(a){a!=="selectionchange"&&(f0.has(a)||cu(a,!1,t),cu(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Wa]||(i[Wa]=!0,cu("selectionchange",!1,i))}}function Qd(t,i,a,c){switch(Sm(i)){case 2:var m=B0;break;case 8:m=G0;break;default:m=bu}a=m.bind(null,i,a,t),m=void 0,!Bt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),c?m!==void 0?t.addEventListener(i,a,{capture:!0,passive:m}):t.addEventListener(i,a,!0):m!==void 0?t.addEventListener(i,a,{passive:m}):t.addEventListener(i,a,!1)}function du(t,i,a,c,m){var y=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var D=c.stateNode.containerInfo;if(D===m)break;if(E===4)for(E=c.return;E!==null;){var K=E.tag;if((K===3||K===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;D!==null;){if(E=ti(D),E===null)return;if(K=E.tag,K===5||K===6||K===26||K===27){c=y=E;continue e}D=D.parentNode}}c=c.return}kt(function(){var ue=y,ye=it(a),_e=[];e:{var ce=Dc.get(t);if(ce!==void 0){var me=ma,Ve=t;switch(t){case"keypress":if(fa(a)===0)break e;case"keydown":case"keyup":me=lg;break;case"focusin":Ve="focus",me=zr;break;case"focusout":Ve="blur",me=zr;break;case"beforeblur":case"afterblur":me=zr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Xp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=sg;break;case Ac:case Mc:case Rc:me=$p;break;case Nc:me=cg;break;case"scroll":case"scrollend":me=Yp;break;case"wheel":me=dg;break;case"copy":case"cut":case"paste":me=jp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=sc;break;case"toggle":case"beforetoggle":me=hg}var ze=(i&4)!==0,ut=!ze&&(t==="scroll"||t==="scrollend"),ie=ze?ce!==null?ce+"Capture":null:ce;ze=[];for(var Q=ue,se;Q!==null;){var Ce=Q;if(se=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||se===null||ie===null||(Ce=zt(Q,ie),Ce!=null&&ze.push(Dl(Q,Ce,se))),ut)break;Q=Q.return}0<ze.length&&(ce=new me(ce,Ve,null,a,ye),_e.push({event:ce,listeners:ze}))}}if((i&7)===0){e:{if(ce=t==="mouseover"||t==="pointerover",me=t==="mouseout"||t==="pointerout",ce&&a!==Oe&&(Ve=a.relatedTarget||a.fromElement)&&(ti(Ve)||Ve[ei]))break e;if((me||ce)&&(ce=ye.window===ye?ye:(ce=ye.ownerDocument)?ce.defaultView||ce.parentWindow:window,me?(Ve=a.relatedTarget||a.toElement,me=ue,Ve=Ve?ti(Ve):null,Ve!==null&&(ut=f(Ve),ze=Ve.tag,Ve!==ut||ze!==5&&ze!==27&&ze!==6)&&(Ve=null)):(me=null,Ve=ue),me!==Ve)){if(ze=ac,Ce="onMouseLeave",ie="onMouseEnter",Q="mouse",(t==="pointerout"||t==="pointerover")&&(ze=sc,Ce="onPointerLeave",ie="onPointerEnter",Q="pointer"),ut=me==null?ce:ki(me),se=Ve==null?ce:ki(Ve),ce=new ze(Ce,Q+"leave",me,a,ye),ce.target=ut,ce.relatedTarget=se,Ce=null,ti(ye)===ue&&(ze=new ze(ie,Q+"enter",Ve,a,ye),ze.target=se,ze.relatedTarget=ut,Ce=ze),ut=Ce,me&&Ve)t:{for(ze=me,ie=Ve,Q=0,se=ze;se;se=ko(se))Q++;for(se=0,Ce=ie;Ce;Ce=ko(Ce))se++;for(;0<Q-se;)ze=ko(ze),Q--;for(;0<se-Q;)ie=ko(ie),se--;for(;Q--;){if(ze===ie||ie!==null&&ze===ie.alternate)break t;ze=ko(ze),ie=ko(ie)}ze=null}else ze=null;me!==null&&jd(_e,ce,me,ze,!1),Ve!==null&&ut!==null&&jd(_e,ut,Ve,ze,!0)}}e:{if(ce=ue?ki(ue):window,me=ce.nodeName&&ce.nodeName.toLowerCase(),me==="select"||me==="input"&&ce.type==="file")var ke=gc;else if(hc(ce))if(yc)ke=wg;else{ke=Tg;var Ke=Sg}else me=ce.nodeName,!me||me.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ue&&fe(ue.elementType)&&(ke=gc):ke=_g;if(ke&&(ke=ke(t,ue))){pc(_e,ke,a,ye);break e}Ke&&Ke(t,ce,ue),t==="focusout"&&ue&&ce.type==="number"&&ue.memoizedProps.value!=null&&$o(ce,"number",ce.value)}switch(Ke=ue?ki(ue):window,t){case"focusin":(hc(Ke)||Ke.contentEditable==="true")&&(ro=Ke,Fr=ue,il=null);break;case"focusout":il=Fr=ro=null;break;case"mousedown":Or=!0;break;case"contextmenu":case"mouseup":case"dragend":Or=!1,bc(_e,a,ye);break;case"selectionchange":if(Eg)break;case"keydown":case"keyup":bc(_e,a,ye)}var Pe;if(Gr)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else ao?dc(t,a)&&(Be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(uc&&a.locale!=="ko"&&(ao||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&ao&&(Pe=oc()):(En=ye,Ur="value"in En?En.value:En.textContent,ao=!0)),Ke=er(ue,Be),0<Ke.length&&(Be=new rc(Be,t,null,a,ye),_e.push({event:Be,listeners:Ke}),Pe?Be.data=Pe:(Pe=mc(a),Pe!==null&&(Be.data=Pe)))),(Pe=gg?yg(t,a):vg(t,a))&&(Be=er(ue,"onBeforeInput"),0<Be.length&&(Ke=new rc("onBeforeInput","beforeinput",null,a,ye),_e.push({event:Ke,listeners:Be}),Ke.data=Pe)),s0(_e,t,ue,a,ye)}$d(_e,i)})}function Dl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function er(t,i){for(var a=i+"Capture",c=[];t!==null;){var m=t,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=zt(t,a),m!=null&&c.unshift(Dl(t,m,y)),m=zt(t,i),m!=null&&c.push(Dl(t,m,y))),t.tag===3)return c;t=t.return}return[]}function ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function jd(t,i,a,c,m){for(var y=i._reactName,E=[];a!==null&&a!==c;){var D=a,K=D.alternate,ue=D.stateNode;if(D=D.tag,K!==null&&K===c)break;D!==5&&D!==26&&D!==27||ue===null||(K=ue,m?(ue=zt(a,y),ue!=null&&E.unshift(Dl(a,ue,K))):m||(ue=zt(a,y),ue!=null&&E.push(Dl(a,ue,K)))),a=a.return}E.length!==0&&t.push({event:i,listeners:E})}var d0=/\r\n?/g,m0=/\u0000|\uFFFD/g;function Wd(t){return(typeof t=="string"?t:""+t).replace(d0,`
`).replace(m0,"")}function em(t,i){return i=Wd(i),Wd(t)===i}function tr(){}function st(t,i,a,c,m,y){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||ri(t,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&ri(t,""+c);break;case"className":io(t,"class",c);break;case"tabIndex":io(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":io(t,a,c);break;case"style":oe(t,c,y);break;case"data":if(i!=="object"){io(t,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=Ge(""+c),t.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(i!=="input"&&st(t,i,"name",m.name,m,null),st(t,i,"formEncType",m.formEncType,m,null),st(t,i,"formMethod",m.formMethod,m,null),st(t,i,"formTarget",m.formTarget,m,null)):(st(t,i,"encType",m.encType,m,null),st(t,i,"method",m.method,m,null),st(t,i,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=Ge(""+c),t.setAttribute(a,c);break;case"onClick":c!=null&&(t.onclick=tr);break;case"onScroll":c!=null&&$e("scroll",t);break;case"onScrollEnd":c!=null&&$e("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(l(61));if(a=c.__html,a!=null){if(m.children!=null)throw Error(l(60));t.innerHTML=a}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}a=Ge(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""+c):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":c===!0?t.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,c):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(a,c):t.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(a):t.setAttribute(a,c);break;case"popover":$e("beforetoggle",t),$e("toggle",t),Ii(t,"popover",c);break;case"xlinkActuate":wn(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":wn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":wn(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":wn(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":wn(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":wn(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":wn(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":wn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":wn(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ii(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=we.get(a)||a,Ii(t,a,c))}}function mu(t,i,a,c,m,y){switch(a){case"style":oe(t,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(l(61));if(a=c.__html,a!=null){if(m.children!=null)throw Error(l(60));t.innerHTML=a}}break;case"children":typeof c=="string"?ri(t,c):(typeof c=="number"||typeof c=="bigint")&&ri(t,""+c);break;case"onScroll":c!=null&&$e("scroll",t);break;case"onScrollEnd":c!=null&&$e("scrollend",t);break;case"onClick":c!=null&&(t.onclick=tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),i=a.slice(2,m?a.length-7:void 0),y=t[qt]||null,y=y!=null?y[a]:null,typeof y=="function"&&t.removeEventListener(i,y,m),typeof c=="function")){typeof y!="function"&&y!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,c,m);break e}a in t?t[a]=c:c===!0?t.setAttribute(a,""):Ii(t,a,c)}}}function Ht(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",t),$e("load",t);var c=!1,m=!1,y;for(y in a)if(a.hasOwnProperty(y)){var E=a[y];if(E!=null)switch(y){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:st(t,i,y,E,a,null)}}m&&st(t,i,"srcSet",a.srcSet,a,null),c&&st(t,i,"src",a.src,a,null);return;case"input":$e("invalid",t);var D=y=E=m=null,K=null,ue=null;for(c in a)if(a.hasOwnProperty(c)){var ye=a[c];if(ye!=null)switch(c){case"name":m=ye;break;case"type":E=ye;break;case"checked":K=ye;break;case"defaultChecked":ue=ye;break;case"value":y=ye;break;case"defaultValue":D=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(l(137,i));break;default:st(t,i,c,ye,a,null)}}aa(t,y,D,K,ue,E,m,!1),oo(t);return;case"select":$e("invalid",t),c=E=y=null;for(m in a)if(a.hasOwnProperty(m)&&(D=a[m],D!=null))switch(m){case"value":y=D;break;case"defaultValue":E=D;break;case"multiple":c=D;default:st(t,i,m,D,a,null)}i=y,a=E,t.multiple=!!c,i!=null?ai(t,!!c,i,!1):a!=null&&ai(t,!!c,a,!0);return;case"textarea":$e("invalid",t),y=m=c=null;for(E in a)if(a.hasOwnProperty(E)&&(D=a[E],D!=null))switch(E){case"value":c=D;break;case"defaultValue":m=D;break;case"children":y=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(l(91));break;default:st(t,i,E,D,a,null)}sa(t,c,m,y),oo(t);return;case"option":for(K in a)if(a.hasOwnProperty(K)&&(c=a[K],c!=null))switch(K){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(t,i,K,c,a,null)}return;case"dialog":$e("beforetoggle",t),$e("toggle",t),$e("cancel",t),$e("close",t);break;case"iframe":case"object":$e("load",t);break;case"video":case"audio":for(c=0;c<Nl.length;c++)$e(Nl[c],t);break;case"image":$e("error",t),$e("load",t);break;case"details":$e("toggle",t);break;case"embed":case"source":case"link":$e("error",t),$e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in a)if(a.hasOwnProperty(ue)&&(c=a[ue],c!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:st(t,i,ue,c,a,null)}return;default:if(fe(i)){for(ye in a)a.hasOwnProperty(ye)&&(c=a[ye],c!==void 0&&mu(t,i,ye,c,a,void 0));return}}for(D in a)a.hasOwnProperty(D)&&(c=a[D],c!=null&&st(t,i,D,c,a,null))}function h0(t,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,E=null,D=null,K=null,ue=null,ye=null;for(me in a){var _e=a[me];if(a.hasOwnProperty(me)&&_e!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":K=_e;default:c.hasOwnProperty(me)||st(t,i,me,null,c,_e)}}for(var ce in c){var me=c[ce];if(_e=a[ce],c.hasOwnProperty(ce)&&(me!=null||_e!=null))switch(ce){case"type":y=me;break;case"name":m=me;break;case"checked":ue=me;break;case"defaultChecked":ye=me;break;case"value":E=me;break;case"defaultValue":D=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(l(137,i));break;default:me!==_e&&st(t,i,ce,me,c,_e)}}Zo(t,E,D,K,ue,ye,y,m);return;case"select":me=E=D=ce=null;for(y in a)if(K=a[y],a.hasOwnProperty(y)&&K!=null)switch(y){case"value":break;case"multiple":me=K;default:c.hasOwnProperty(y)||st(t,i,y,null,c,K)}for(m in c)if(y=c[m],K=a[m],c.hasOwnProperty(m)&&(y!=null||K!=null))switch(m){case"value":ce=y;break;case"defaultValue":D=y;break;case"multiple":E=y;default:y!==K&&st(t,i,m,y,c,K)}i=D,a=E,c=me,ce!=null?ai(t,!!a,ce,!1):!!c!=!!a&&(i!=null?ai(t,!!a,i,!0):ai(t,!!a,a?[]:"",!1));return;case"textarea":me=ce=null;for(D in a)if(m=a[D],a.hasOwnProperty(D)&&m!=null&&!c.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:st(t,i,D,null,c,m)}for(E in c)if(m=c[E],y=a[E],c.hasOwnProperty(E)&&(m!=null||y!=null))switch(E){case"value":ce=m;break;case"defaultValue":me=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(l(91));break;default:m!==y&&st(t,i,E,m,c,y)}ra(t,ce,me);return;case"option":for(var Ve in a)if(ce=a[Ve],a.hasOwnProperty(Ve)&&ce!=null&&!c.hasOwnProperty(Ve))switch(Ve){case"selected":t.selected=!1;break;default:st(t,i,Ve,null,c,ce)}for(K in c)if(ce=c[K],me=a[K],c.hasOwnProperty(K)&&ce!==me&&(ce!=null||me!=null))switch(K){case"selected":t.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:st(t,i,K,ce,c,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in a)ce=a[ze],a.hasOwnProperty(ze)&&ce!=null&&!c.hasOwnProperty(ze)&&st(t,i,ze,null,c,ce);for(ue in c)if(ce=c[ue],me=a[ue],c.hasOwnProperty(ue)&&ce!==me&&(ce!=null||me!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(l(137,i));break;default:st(t,i,ue,ce,c,me)}return;default:if(fe(i)){for(var ut in a)ce=a[ut],a.hasOwnProperty(ut)&&ce!==void 0&&!c.hasOwnProperty(ut)&&mu(t,i,ut,void 0,c,ce);for(ye in c)ce=c[ye],me=a[ye],!c.hasOwnProperty(ye)||ce===me||ce===void 0&&me===void 0||mu(t,i,ye,ce,c,me);return}}for(var ie in a)ce=a[ie],a.hasOwnProperty(ie)&&ce!=null&&!c.hasOwnProperty(ie)&&st(t,i,ie,null,c,ce);for(_e in c)ce=c[_e],me=a[_e],!c.hasOwnProperty(_e)||ce===me||ce==null&&me==null||st(t,i,_e,ce,c,me)}var hu=null,pu=null;function nr(t){return t.nodeType===9?t:t.ownerDocument}function tm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nm(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function gu(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var yu=null;function p0(){var t=window.event;return t&&t.type==="popstate"?t===yu?!1:(yu=t,!0):(yu=null,!1)}var im=typeof setTimeout=="function"?setTimeout:void 0,g0=typeof clearTimeout=="function"?clearTimeout:void 0,om=typeof Promise=="function"?Promise:void 0,y0=typeof queueMicrotask=="function"?queueMicrotask:typeof om<"u"?function(t){return om.resolve(null).then(t).catch(v0)}:im;function v0(t){setTimeout(function(){throw t})}function _i(t){return t==="head"}function lm(t,i){var a=i,c=0,m=0;do{var y=a.nextSibling;if(t.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(0<c&&8>c){a=c;var E=t.ownerDocument;if(a&1&&kl(E.documentElement),a&2&&kl(E.body),a&4)for(a=E.head,kl(a),E=a.firstChild;E;){var D=E.nextSibling,K=E.nodeName;E[Dn]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=D}}if(m===0){t.removeChild(y),Vl(i);return}m--}else a==="$"||a==="$?"||a==="$!"?m++:c=a.charCodeAt(0)-48;else c=0;a=y}while(a);Vl(i)}function vu(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":vu(a),no(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function x0(t,i,a,c){for(;t.nodeType===1;){var m=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Dn])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(y=t.getAttribute("rel"),y==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(y!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(y=t.getAttribute("src"),(y!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===y)return t}else return t;if(t=Rn(t.nextSibling),t===null)break}return null}function C0(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Rn(t.nextSibling),t===null))return null;return t}function xu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function S0(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Rn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Cu=null;function am(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function rm(t,i,a){switch(i=nr(a),t){case"html":if(t=i.documentElement,!t)throw Error(l(452));return t;case"head":if(t=i.head,!t)throw Error(l(453));return t;case"body":if(t=i.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function kl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);no(t)}var Sn=new Map,sm=new Set;function ir(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Qn=j.d;j.d={f:T0,r:_0,D:w0,C:b0,L:E0,m:A0,X:R0,S:M0,M:N0};function T0(){var t=Qn.f(),i=Ka();return t||i}function _0(t){var i=ni(t);i!==null&&i.tag===5&&i.type==="form"?Mf(i):Qn.r(t)}var Io=typeof document>"u"?null:document;function um(t,i,a){var c=Io;if(c&&typeof i=="string"&&i){var m=$t(i);m='link[rel="'+t+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),sm.has(m)||(sm.add(m),t={rel:t,crossOrigin:a,href:i},c.querySelector(m)===null&&(i=c.createElement("link"),Ht(i,"link",t),xt(i),c.head.appendChild(i)))}}function w0(t){Qn.D(t),um("dns-prefetch",t,null)}function b0(t,i){Qn.C(t,i),um("preconnect",t,i)}function E0(t,i,a){Qn.L(t,i,a);var c=Io;if(c&&t&&i){var m='link[rel="preload"][as="'+$t(i)+'"]';i==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+$t(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+$t(a.imageSizes)+'"]')):m+='[href="'+$t(t)+'"]';var y=m;switch(i){case"style":y=Uo(t);break;case"script":y=Po(t)}Sn.has(y)||(t=v({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Sn.set(y,t),c.querySelector(m)!==null||i==="style"&&c.querySelector(Il(y))||i==="script"&&c.querySelector(Ul(y))||(i=c.createElement("link"),Ht(i,"link",t),xt(i),c.head.appendChild(i)))}}function A0(t,i){Qn.m(t,i);var a=Io;if(a&&t){var c=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+$t(c)+'"][href="'+$t(t)+'"]',y=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Po(t)}if(!Sn.has(y)&&(t=v({rel:"modulepreload",href:t},i),Sn.set(y,t),a.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ul(y)))return}c=a.createElement("link"),Ht(c,"link",t),xt(c),a.head.appendChild(c)}}}function M0(t,i,a){Qn.S(t,i,a);var c=Io;if(c&&t){var m=ii(c).hoistableStyles,y=Uo(t);i=i||"default";var E=m.get(y);if(!E){var D={loading:0,preload:null};if(E=c.querySelector(Il(y)))D.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Sn.get(y))&&Su(t,a);var K=E=c.createElement("link");xt(K),Ht(K,"link",t),K._p=new Promise(function(ue,ye){K.onload=ue,K.onerror=ye}),K.addEventListener("load",function(){D.loading|=1}),K.addEventListener("error",function(){D.loading|=2}),D.loading|=4,or(E,i,c)}E={type:"stylesheet",instance:E,count:1,state:D},m.set(y,E)}}}function R0(t,i){Qn.X(t,i);var a=Io;if(a&&t){var c=ii(a).hoistableScripts,m=Po(t),y=c.get(m);y||(y=a.querySelector(Ul(m)),y||(t=v({src:t,async:!0},i),(i=Sn.get(m))&&Tu(t,i),y=a.createElement("script"),xt(y),Ht(y,"link",t),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(m,y))}}function N0(t,i){Qn.M(t,i);var a=Io;if(a&&t){var c=ii(a).hoistableScripts,m=Po(t),y=c.get(m);y||(y=a.querySelector(Ul(m)),y||(t=v({src:t,async:!0,type:"module"},i),(i=Sn.get(m))&&Tu(t,i),y=a.createElement("script"),xt(y),Ht(y,"link",t),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(m,y))}}function cm(t,i,a,c){var m=(m=ne.current)?ir(m):null;if(!m)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Uo(a.href),a=ii(m).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Uo(a.href);var y=ii(m).hoistableStyles,E=y.get(t);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(t,E),(y=m.querySelector(Il(t)))&&!y._p&&(E.instance=y,E.state.loading=5),Sn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Sn.set(t,a),y||D0(m,t,a,E.state))),i&&c===null)throw Error(l(528,""));return E}if(i&&c!==null)throw Error(l(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Po(a),a=ii(m).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function Uo(t){return'href="'+$t(t)+'"'}function Il(t){return'link[rel="stylesheet"]['+t+"]"}function fm(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function D0(t,i,a,c){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=t.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Ht(i,"link",a),xt(i),t.head.appendChild(i))}function Po(t){return'[src="'+$t(t)+'"]'}function Ul(t){return"script[async]"+t}function dm(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=t.querySelector('style[data-href~="'+$t(a.href)+'"]');if(c)return i.instance=c,xt(c),c;var m=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),xt(c),Ht(c,"style",m),or(c,a.precedence,t),i.instance=c;case"stylesheet":m=Uo(a.href);var y=t.querySelector(Il(m));if(y)return i.state.loading|=4,i.instance=y,xt(y),y;c=fm(a),(m=Sn.get(m))&&Su(c,m),y=(t.ownerDocument||t).createElement("link"),xt(y);var E=y;return E._p=new Promise(function(D,K){E.onload=D,E.onerror=K}),Ht(y,"link",c),i.state.loading|=4,or(y,a.precedence,t),i.instance=y;case"script":return y=Po(a.src),(m=t.querySelector(Ul(y)))?(i.instance=m,xt(m),m):(c=a,(m=Sn.get(y))&&(c=v({},a),Tu(c,m)),t=t.ownerDocument||t,m=t.createElement("script"),xt(m),Ht(m,"link",c),t.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(l(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,or(c,a.precedence,t));return i.instance}function or(t,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,y=m,E=0;E<c.length;E++){var D=c[E];if(D.dataset.precedence===i)y=D;else if(y!==m)break}y?y.parentNode.insertBefore(t,y.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Su(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Tu(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var lr=null;function mm(t,i,a){if(lr===null){var c=new Map,m=lr=new Map;m.set(a,c)}else m=lr,c=m.get(a),c||(c=new Map,m.set(a,c));if(c.has(t))return c;for(c.set(t,null),a=a.getElementsByTagName(t),m=0;m<a.length;m++){var y=a[m];if(!(y[Dn]||y[Nt]||t==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(i)||"";E=t+E;var D=c.get(E);D?D.push(y):c.set(E,[y])}}return c}function hm(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function k0(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function pm(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Pl=null;function I0(){}function U0(t,i,a){if(Pl===null)throw Error(l(475));var c=Pl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var m=Uo(a.href),y=t.querySelector(Il(m));if(y){t=y._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(c.count++,c=ar.bind(c),t.then(c,c)),i.state.loading|=4,i.instance=y,xt(y);return}y=t.ownerDocument||t,a=fm(a),(m=Sn.get(m))&&Su(a,m),y=y.createElement("link"),xt(y);var E=y;E._p=new Promise(function(D,K){E.onload=D,E.onerror=K}),Ht(y,"link",a),i.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=ar.bind(c),t.addEventListener("load",i),t.addEventListener("error",i))}}function P0(){if(Pl===null)throw Error(l(475));var t=Pl;return t.stylesheets&&t.count===0&&_u(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&_u(t,t.stylesheets),t.unsuspend){var c=t.unsuspend;t.unsuspend=null,c()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ar(){if(this.count--,this.count===0){if(this.stylesheets)_u(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var rr=null;function _u(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,rr=new Map,i.forEach(L0,t),rr=null,ar.call(t))}function L0(t,i){if(!(i.state.loading&4)){var a=rr.get(t);if(a)var c=a.get(null);else{a=new Map,rr.set(t,a);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var E=m[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),c=E)}c&&a.set(null,c)}m=i.instance,E=m.getAttribute("data-precedence"),y=a.get(E)||c,y===c&&a.set(null,m),a.set(E,m),this.count++,c=ar.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),y?y.parentNode.insertBefore(m,y.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),i.state.loading|=4}}var Ll={$$typeof:I,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function z0(t,i,a,c,m,y,E,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.hiddenUpdates=Nn(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function gm(t,i,a,c,m,y,E,D,K,ue,ye,_e){return t=new z0(t,i,a,E,D,K,ue,_e),i=1,y===!0&&(i|=24),y=on(3,null,null,i),t.current=y,y.stateNode=t,i=os(),i.refCount++,t.pooledCache=i,i.refCount++,y.memoizedState={element:c,isDehydrated:a,cache:i},ss(y),t}function ym(t){return t?(t=fo,t):fo}function vm(t,i,a,c,m,y){m=ym(m),c.context===null?c.context=m:c.pendingContext=m,c=ci(i),c.payload={element:a},y=y===void 0?null:y,y!==null&&(c.callback=y),a=fi(t,c,i),a!==null&&(un(a,t,i),dl(a,t,i))}function xm(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function wu(t,i){xm(t,i),(t=t.alternate)&&xm(t,i)}function Cm(t){if(t.tag===13){var i=co(t,67108864);i!==null&&un(i,t,67108864),wu(t,67108864)}}var sr=!0;function B0(t,i,a,c){var m=O.T;O.T=null;var y=j.p;try{j.p=2,bu(t,i,a,c)}finally{j.p=y,O.T=m}}function G0(t,i,a,c){var m=O.T;O.T=null;var y=j.p;try{j.p=8,bu(t,i,a,c)}finally{j.p=y,O.T=m}}function bu(t,i,a,c){if(sr){var m=Eu(c);if(m===null)du(t,i,c,ur,a),Tm(t,c);else if(H0(m,t,i,a,c))c.stopPropagation();else if(Tm(t,c),i&4&&-1<V0.indexOf(t)){for(;m!==null;){var y=ni(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=tn(y.pendingLanes);if(E!==0){var D=y;for(D.pendingLanes|=2,D.entangledLanes|=2;E;){var K=1<<31-je(E);D.entanglements[1]|=K,E&=~K}Ln(y),(lt&6)===0&&(Ja=G()+500,Rl(0))}}break;case 13:D=co(y,2),D!==null&&un(D,y,2),Ka(),wu(y,2)}if(y=Eu(c),y===null&&du(t,i,c,ur,a),y===m)break;m=y}m!==null&&c.stopPropagation()}else du(t,i,c,null,a)}}function Eu(t){return t=it(t),Au(t)}var ur=null;function Au(t){if(ur=null,t=ti(t),t!==null){var i=f(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return ur=t,null}function Sm(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(L()){case ee:return 2;case xe:return 8;case Te:case re:return 32;case Ae:return 268435456;default:return 32}default:return 32}}var Mu=!1,wi=null,bi=null,Ei=null,zl=new Map,Bl=new Map,Ai=[],V0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tm(t,i){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":zl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(i.pointerId)}}function Gl(t,i,a,c,m,y){return t===null||t.nativeEvent!==y?(t={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:y,targetContainers:[m]},i!==null&&(i=ni(i),i!==null&&Cm(i)),t):(t.eventSystemFlags|=c,i=t.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),t)}function H0(t,i,a,c,m){switch(i){case"focusin":return wi=Gl(wi,t,i,a,c,m),!0;case"dragenter":return bi=Gl(bi,t,i,a,c,m),!0;case"mouseover":return Ei=Gl(Ei,t,i,a,c,m),!0;case"pointerover":var y=m.pointerId;return zl.set(y,Gl(zl.get(y)||null,t,i,a,c,m)),!0;case"gotpointercapture":return y=m.pointerId,Bl.set(y,Gl(Bl.get(y)||null,t,i,a,c,m)),!0}return!1}function _m(t){var i=ti(t.target);if(i!==null){var a=f(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,Zl(t.priority,function(){if(a.tag===13){var c=sn();c=Lt(c);var m=co(a,c);m!==null&&un(m,a,c),wu(a,c)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cr(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Eu(t.nativeEvent);if(a===null){a=t.nativeEvent;var c=new a.constructor(a.type,a);Oe=c,a.target.dispatchEvent(c),Oe=null}else return i=ni(a),i!==null&&Cm(i),t.blockedOn=a,!1;i.shift()}return!0}function wm(t,i,a){cr(t)&&a.delete(i)}function q0(){Mu=!1,wi!==null&&cr(wi)&&(wi=null),bi!==null&&cr(bi)&&(bi=null),Ei!==null&&cr(Ei)&&(Ei=null),zl.forEach(wm),Bl.forEach(wm)}function fr(t,i){t.blockedOn===i&&(t.blockedOn=null,Mu||(Mu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,q0)))}var dr=null;function bm(t){dr!==t&&(dr=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){dr===t&&(dr=null);for(var i=0;i<t.length;i+=3){var a=t[i],c=t[i+1],m=t[i+2];if(typeof c!="function"){if(Au(c||a)===null)continue;break}var y=ni(a);y!==null&&(t.splice(i,3),i-=3,As(y,{pending:!0,data:m,method:a.method,action:c},c,m))}}))}function Vl(t){function i(K){return fr(K,t)}wi!==null&&fr(wi,t),bi!==null&&fr(bi,t),Ei!==null&&fr(Ei,t),zl.forEach(i),Bl.forEach(i);for(var a=0;a<Ai.length;a++){var c=Ai[a];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Ai.length&&(a=Ai[0],a.blockedOn===null);)_m(a),a.blockedOn===null&&Ai.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var m=a[c],y=a[c+1],E=m[qt]||null;if(typeof y=="function")E||bm(a);else if(E){var D=null;if(y&&y.hasAttribute("formAction")){if(m=y,E=y[qt]||null)D=E.formAction;else if(Au(m)!==null)continue}else D=E.action;typeof D=="function"?a[c+1]=D:(a.splice(c,3),c-=3),bm(a)}}}function Ru(t){this._internalRoot=t}mr.prototype.render=Ru.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(l(409));var a=i.current,c=sn();vm(a,c,t,i,null,null)},mr.prototype.unmount=Ru.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;vm(t.current,2,null,t,null,null),Ka(),i[ei]=null}};function mr(t){this._internalRoot=t}mr.prototype.unstable_scheduleHydration=function(t){if(t){var i=Xe();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Ai.length&&i!==0&&i<Ai[a].priority;a++);Ai.splice(a,0,t),a===0&&_m(t)}};var Em=e.version;if(Em!=="19.1.1")throw Error(l(527,Em,"19.1.1"));j.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=g(i),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var F0={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hr.isDisabled&&hr.supportsFiber)try{Ue=hr.inject(F0),Fe=hr}catch{}}return ql.createRoot=function(t,i){if(!u(t))throw Error(l(299));var a=!1,c="",m=qf,y=Ff,E=Of,D=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(D=i.unstable_transitionCallbacks)),i=gm(t,1,!1,null,null,a,c,m,y,E,D,null),t[ei]=i.current,fu(t),new Ru(i)},ql.hydrateRoot=function(t,i,a){if(!u(t))throw Error(l(299));var c=!1,m="",y=qf,E=Ff,D=Of,K=null,ue=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(K=a.unstable_transitionCallbacks),a.formState!==void 0&&(ue=a.formState)),i=gm(t,1,!0,i,a??null,c,m,y,E,D,K,ue),i.context=ym(null),a=i.current,c=sn(),c=Lt(c),m=ci(c),m.callback=null,fi(a,m,c),a=c,i.current.lanes=a,gt(i,a),Ln(i),t[ei]=i.current,fu(t),new mr(i)},ql.version="19.1.1",ql}var Lm;function ey(){if(Lm)return ku.exports;Lm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ku.exports=W0(),ku.exports}var ty=ey();const ny=Qu(ty),gr=[{id:"custom-prompt",title:"自定义提示词",prompt:"CUSTOM",emoji:"✍️",description:"描述你能想象到的任何变化，你的创意就是唯一的限制！",originalPrompt:"CUSTOM"},{id:"3d-figure",title:"3D手办",prompt:"turn this photo into a character figure. Behind it, place a box with the character's image printed on it, and a computer showing the Blender modeling process on its screen. In front of the box, add a round plastic base with the character figure standing on it. set the scene indoors if possible",emoji:"🧍",description:"将你的照片变成收藏级3D角色手办，配有完整包装。",originalPrompt:"turn this photo into a character figure. Behind it, place a box with the character's image printed on it, and a computer showing the Blender modeling process on its screen. In front of the box, add a round plastic base with the character figure standing on it. set the scene indoors if possible"},{id:"funko-pop",title:"Funko Pop手办",prompt:"Transform the person into a Funko Pop figure, shown inside and next to its packaging.",emoji:"📦",description:"将你的主题重新想象为可爱的Funko Pop！乙烯基手办，装在盒子里。",originalPrompt:"Transform the person into a Funko Pop figure, shown inside and next to its packaging."},{id:"lego-minifig",title:"乐高小人仔",prompt:"Transform the person into a LEGO minifigure, inside its packaging box.",emoji:"🧱",description:"构建你主题的乐高小人仔版本，准备好游戏。",originalPrompt:"Transform the person into a LEGO minifigure, inside its packaging box."},{id:"crochet-doll",title:"钩针娃娃",prompt:"Transform the subject into a handmade crocheted yarn doll with a cute, chibi-style appearance.",emoji:"🧶",description:"将你的图像转换为柔软的手工钩针娃娃。",originalPrompt:"Transform the subject into a handmade crocheted yarn doll with a cute, chibi-style appearance."},{id:"anime-to-cosplay",title:"动漫转Cosplay",prompt:"Generate a highly detailed, realistic photo of a person cosplaying the character in this illustration. Replicate the pose, expression, and framing.",emoji:"🎭",description:"将动漫角色变成真实的Cosplay照片。",originalPrompt:"Generate a highly detailed, realistic photo of a person cosplaying the character in this illustration. Replicate the pose, expression, and framing."},{id:"plushie-toy",title:"可爱毛绒玩具",prompt:"Turn the person in this photo into a cute, soft plushie doll.",emoji:"🧸",description:"将你的主题转换为可爱柔软的毛绒玩具。",originalPrompt:"Turn the person in this photo into a cute, soft plushie doll."},{id:"acrylic-keychain",title:"亚克力钥匙扣",prompt:"Turn the subject into a cute acrylic keychain, shown attached to a bag.",emoji:"🔑",description:"创建你主题的可爱亚克力钥匙扣，完美挂在包上。",originalPrompt:"Turn the subject into a cute acrylic keychain, shown attached to a bag."},{title:"高清增强",prompt:"Enhance this image to high resolution, improving sharpness and clarity.",emoji:"🔍",description:"提升图像分辨率，增加清晰度和细节，获得高分辨率效果。"},{title:"姿势参考",prompt:"Apply the pose from the second image to the character in the first image. Render as a professional studio photograph.",emoji:"💃",description:"将一张图像的姿势应用到另一张图像的角色上。",isMultiImage:!0,primaryUploaderTitle:"角色",primaryUploaderDescription:"主要角色",secondaryUploaderTitle:"姿势参考",secondaryUploaderDescription:"要应用的姿势"},{title:"转照片级真实",prompt:"Turn this illustration into a photorealistic version.",emoji:"🪄",description:"将绘画或插图转换为令人惊叹的真实照片。"},{title:"时尚杂志",prompt:"Transform the photo into a stylized, ultra-realistic fashion magazine portrait with cinematic lighting.",emoji:"📸",description:"为你的照片赋予高级时尚、编辑级的外观，值得登上杂志封面。"},{title:"超写实",prompt:"Generate a hyper-realistic, fashion-style photo with strong, direct flash lighting, grainy texture, and a cool, confident pose.",emoji:"✨",description:"应用粗糙的直接闪光摄影风格，营造酷炫的超写实氛围。"},{title:"建筑模型",prompt:"Convert this photo of a building into a miniature architecture model, placed on a cardstock in an indoor setting. Show a computer with modeling software in the background.",emoji:"🏗️",description:"将建筑物转换为详细的微型建筑模型。"},{title:"产品渲染",prompt:"Turn this product sketch into a photorealistic 3D render with studio lighting.",emoji:"💡",description:"将产品草图转换为专业的照片级3D渲染图。"},{title:"汽水罐设计",prompt:"Design a soda can using this image as the main graphic, and show it in a professional product shot.",emoji:"🥤",description:"将你的图像包装到汽水罐上，并放置在精美的产品拍摄中。"},{title:"工业设计渲染",prompt:"Turn this industrial design sketch into a realistic product photo, rendered with light brown leather and displayed in a minimalist museum setting.",emoji:"🛋️",description:"将工业设计草图渲染为博物馆环境中的真实产品。"},{title:"色彩调色板交换",prompt:"Turn this image into a clean, hand-drawn line art sketch.",stepTwoPrompt:"Color the line art using the colors from the second image.",emoji:"🎨",description:"将图像转换为线稿，然后使用第二张图像作为调色板进行着色。",isMultiImage:!0,isTwoStep:!0,primaryUploaderTitle:"原始图像",primaryUploaderDescription:"要转换的图像",secondaryUploaderTitle:"色彩调色板",secondaryUploaderDescription:"颜色参考"},{title:"线稿绘画",prompt:"Turn the image into a clean, hand-drawn line art sketch.",emoji:"✍🏻",description:"将你的照片简化为基本线条，创建干净的素描。"},{title:"绘画过程",prompt:"Generate a 4-panel grid showing the artistic process of creating this image, from sketch to final render.",emoji:"🖼️",description:"显示创建图像的4步网格，从草图到最终绘画。"},{title:"马克笔素描",prompt:"Redraw the image in the style of a Copic marker sketch, often used in design.",emoji:"🖊️",description:"将你的照片重新想象为用Copic马克笔制作的生动素描。"},{title:"添加插图",prompt:"Add a cute, cartoon-style illustrated couple into the real-world scene, sitting and talking.",emoji:"🧑‍🎨",description:"在你的真实世界照片中添加迷人的手绘角色。"},{title:"赛博朋克",prompt:"Transform the scene into a futuristic cyberpunk city.",emoji:"🤖",description:"将你的场景转换为霓虹灯浸润的未来赛博朋克城市。"},{title:"梵高风格",prompt:"Reimagine the photo in the style of Van Gogh's 'Starry Night'.",emoji:"🌌",description:"用《星夜》标志性的旋转笔触重新绘制你的照片。"},{title:"隔离和增强",prompt:"Isolate the person in the masked area and generate a high-definition photo of them against a neutral background.",emoji:"🎯",description:"剪切蒙版主题并创建干净的高清肖像。"},{title:"3D屏幕效果",prompt:"For an image with a screen, add content that appears to be glasses-free 3D, popping out of the screen.",emoji:"📺",description:"让照片中屏幕上的内容看起来以3D形式弹出。"},{title:"化妆分析",prompt:"Analyze the makeup in this photo and suggest improvements by drawing with a red pen.",emoji:"💄",description:"分析肖像中的化妆并用红笔标记建议改进。"},{title:"更换背景",prompt:"Change the background to a Y2K aesthetic style.",emoji:"🪩",description:"将现有背景替换为酷炫的复古Y2K美学。"}];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let iy,oy;function ly(){return{geminiUrl:iy,vertexUrl:oy}}function ay(n,e,o,l){var u,f;if(!(n!=null&&n.baseUrl)){const d=ly();return e?(u=d.vertexUrl)!==null&&u!==void 0?u:o:(f=d.geminiUrl)!==null&&f!==void 0?f:l}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qi{}function Ie(n,e){const o=/\{([^}]+)\}/g;return n.replace(o,(l,u)=>{if(Object.prototype.hasOwnProperty.call(e,u)){const f=e[u];return f!=null?String(f):""}else throw new Error(`Key '${u}' not found in valueMap.`)})}function s(n,e,o){for(let f=0;f<e.length-1;f++){const d=e[f];if(d.endsWith("[]")){const h=d.slice(0,-2);if(!(h in n))if(Array.isArray(o))n[h]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(n[h])){const g=n[h];if(Array.isArray(o))for(let p=0;p<g.length;p++){const v=g[p];s(v,e.slice(f+1),o[p])}else for(const p of g)s(p,e.slice(f+1),o)}return}else if(d.endsWith("[0]")){const h=d.slice(0,-3);h in n||(n[h]=[{}]);const g=n[h];s(g[0],e.slice(f+1),o);return}(!n[d]||typeof n[d]!="object")&&(n[d]={}),n=n[d]}const l=e[e.length-1],u=n[l];if(u!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===u)return;if(typeof u=="object"&&typeof o=="object"&&u!==null&&o!==null)Object.assign(u,o);else throw new Error(`Cannot set value for an existing key. Key: ${l}`)}else n[l]=o}function r(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const u=l.slice(0,-2);if(u in n){const f=n[u];return Array.isArray(f)?f.map(d=>r(d,e.slice(o+1))):void 0}else return}else n=n[l]}return n}catch(o){if(o instanceof TypeError)return;throw o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vu(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zm;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(zm||(zm={}));var Bm;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Bm||(Bm={}));var Ni;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ni||(Ni={}));var Gm;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Gm||(Gm={}));var Vm;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Vm||(Vm={}));var Hm;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Hm||(Hm={}));var qm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(qm||(qm={}));var Fm;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Fm||(Fm={}));var Om;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Om||(Om={}));var Ym;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ym||(Ym={}));var Jm;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Jm||(Jm={}));var Xm;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Xm||(Xm={}));var Km;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Km||(Km={}));var Zm;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Zm||(Zm={}));var $m;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($m||($m={}));var Di;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Di||(Di={}));var Qm;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Qm||(Qm={}));var Hu;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hu||(Hu={}));var jm;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(jm||(jm={}));var Wm;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Wm||(Wm={}));var eh;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(eh||(eh={}));var th;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(th||(th={}));var nh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(nh||(nh={}));var ih;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ih||(ih={}));var oh;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(oh||(oh={}));var lh;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(lh||(lh={}));var ah;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(ah||(ah={}));var rh;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(rh||(rh={}));var sh;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(sh||(sh={}));var uh;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(uh||(uh={}));var ch;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ch||(ch={}));var fh;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(fh||(fh={}));var dh;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(dh||(dh={}));var mh;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(mh||(mh={}));var hh;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(hh||(hh={}));var ph;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(ph||(ph={}));var gh;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(gh||(gh={}));var yh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(yh||(yh={}));var vh;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(vh||(vh={}));var xh;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(xh||(xh={}));var Ch;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Ch||(Ch={}));var Sh;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sh||(Sh={}));var Th;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Th||(Th={}));var _h;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_h||(_h={}));var wh;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(wh||(wh={}));var Lo;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Lo||(Lo={}));class qu{constructor(e){const o={};for(const l of e.headers.entries())o[l[0]]=l[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fl{get text(){var e,o,l,u,f,d,h,g;if(((u=(l=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const C=[];for(const S of(g=(h=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[T,w]of Object.entries(S))T!=="text"&&T!=="thought"&&(w!==null||w!==void 0)&&C.push(T);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return C.length>0&&console.warn(`there are non-text parts ${C} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,o,l,u,f,d,h,g;if(((u=(l=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const C of(g=(h=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,T]of Object.entries(C))S!=="inlineData"&&(T!==null||T!==void 0)&&v.push(S);C.inlineData&&typeof C.inlineData.data=="string"&&(p+=atob(C.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,o,l,u,f,d,h,g;if(((u=(l=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,o,l,u,f,d,h,g,p;if(((u=(l=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(C=>C.executableCode).map(C=>C.executableCode).filter(C=>C!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,o,l,u,f,d,h,g,p;if(((u=(l=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(d=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(C=>C.codeExecutionResult).map(C=>C.codeExecutionResult).filter(C=>C!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class bh{}class Eh{}class ry{}class sy{}class uy{}class cy{}class Ah{}class Mh{}class Rh{}class fy{}class Nh{}class br{_fromAPIResponse({apiResponse:e,isVertexAI:o}){const l=new br;if(l.name=e.name,l.metadata=e.metadata,l.done=e.done,l.error=e.error,o){const u=e.response;if(u){const f=new Nh,d=u.videos;f.generatedVideos=d==null?void 0:d.map(h=>({video:{uri:h.gcsUri,videoBytes:h.bytesBase64Encoded?Vu(h.bytesBase64Encoded):void 0,mimeType:h.mimeType}})),f.raiMediaFilteredCount=u.raiMediaFilteredCount,f.raiMediaFilteredReasons=u.raiMediaFilteredReasons,l.response=f}}else{const u=e.response;if(u){const f=new Nh,d=u.generateVideoResponse,h=d==null?void 0:d.generatedSamples;f.generatedVideos=h==null?void 0:h.map(g=>{const p=g.video;return{video:{uri:p==null?void 0:p.uri,videoBytes:p!=null&&p.encodedVideo?Vu(p==null?void 0:p.encodedVideo):void 0,mimeType:g.encoding}}}),f.raiMediaFilteredCount=d==null?void 0:d.raiMediaFilteredCount,f.raiMediaFilteredReasons=d==null?void 0:d.raiMediaFilteredReasons,l.response=f}}return l}}class Dh{}class kh{}class Ih{}class dy{}class my{}class hy{}class Uh{}class py{get text(){var e,o,l;let u="",f=!1;const d=[];for(const h of(l=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&d.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,u+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,o,l;let u="";const f=[];for(const d of(l=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[h,g]of Object.entries(d))h!=="inlineData"&&g!==null&&f.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(u+=atob(d.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}}class gy{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function sp(n,e){const o=nt(n,e);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function up(n){return Array.isArray(n)?n.map(e=>Er(e)):[Er(n)]}function Er(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function cp(n){const e=Er(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fp(n){const e=Er(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ph(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function dp(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Ph(e)):[Ph(n)]}function Fu(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Lh(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function zh(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Yt(n){if(n==null)throw new Error("ContentUnion is required");return Fu(n)?n:{role:"user",parts:dp(n)}}function mp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const l=Yt(o);return l.parts&&l.parts.length>0&&l.parts[0].text!==void 0?[l.parts[0].text]:[]});if(n.isVertexAI()){const o=Yt(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>Yt(o)):[Yt(e)]}function Tn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Lh(n)||zh(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Yt(n)]}const e=[],o=[],l=Fu(n[0]);for(const u of n){const f=Fu(u);if(f!=l)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(u);else{if(Lh(u)||zh(u))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(u)}}return l||e.push({role:"user",parts:dp(o)}),e}function yy(n,e){n.includes("null")&&(e.nullable=!0);const o=n.filter(l=>l!=="null");if(o.length===1)e.type=Object.values(Ni).includes(o[0].toUpperCase())?o[0].toUpperCase():Ni.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const l of o)e.anyOf.push({type:Object.values(Ni).includes(l.toUpperCase())?l.toUpperCase():Ni.TYPE_UNSPECIFIED})}}function zo(n){const e={},o=["items"],l=["anyOf"],u=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const f=n.anyOf;f!=null&&f.length==2&&(f[0].type==="null"?(e.nullable=!0,n=f[1]):f[1].type==="null"&&(e.nullable=!0,n=f[0])),n.type instanceof Array&&yy(n.type,e);for(const[d,h]of Object.entries(n))if(h!=null)if(d=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Ni).includes(h.toUpperCase())?h.toUpperCase():Ni.TYPE_UNSPECIFIED}else if(o.includes(d))e[d]=zo(h);else if(l.includes(d)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(zo(p))}e[d]=g}else if(u.includes(d)){const g={};for(const[p,v]of Object.entries(h))g[p]=zo(v);e[d]=g}else{if(d==="additionalProperties")continue;e[d]=h}return e}function Wu(n){return zo(n)}function ec(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function tc(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Vo(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=zo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=zo(e.response));return n}function Ho(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of n)e.push(o);return e}function vy(n,e,o,l=1){const u=!e.startsWith(`${o}/`)&&e.split("/").length===l;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:u?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${e}`:e:u?`${o}/${e}`:e}function jn(n,e){if(typeof e!="string")throw new Error("name must be a string");return vy(n,e,"cachedContents")}function hp(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ji(n){return Vu(n)}function xy(n){return n!=null&&typeof n=="object"&&"name"in n}function Cy(n){return n!=null&&typeof n=="object"&&"video"in n}function Sy(n){return n!=null&&typeof n=="object"&&"uri"in n}function pp(n){var e;let o;if(xy(n)&&(o=n.name),!(Sy(n)&&(o=n.uri,o===void 0))&&!(Cy(n)&&(o=(e=n.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const u=o.split("files/")[1].match(/[a-z0-9]+/);if(u===null)throw new Error(`Could not extract file name from URI ${o}`);o=u[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function gp(n,e){let o;return n.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function yp(n){for(const e of["models","tunedModels","publisherModels"])if(Ty(n,e))return n[e];return[]}function Ty(n,e){return n!==null&&typeof n=="object"&&e in n}function _y(n,e={}){const o=n,l={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(l.responseJsonSchema=o.outputSchema),e.behavior&&(l.behavior=e.behavior),{functionDeclarations:[l]}}function wy(n,e={}){const o=[],l=new Set;for(const u of n){const f=u.name;if(l.has(f))throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);l.add(f);const d=_y(u,e);d.functionDeclarations&&o.push(...d.functionDeclarations)}return{functionDeclarations:o}}function vp(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function by(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function qo(n,e){const o=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function xp(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ey(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function Ay(n){const e={};if(r(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(n,["data"]);o!=null&&s(e,["data"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function My(n){const e={};if(r(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function Ry(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],Ey(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],Ay(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],My(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function Cp(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>Ry(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function Ny(n){const e={},o=r(n,["anyOf"]);o!=null&&s(e,["anyOf"],o);const l=r(n,["default"]);l!=null&&s(e,["default"],l);const u=r(n,["description"]);u!=null&&s(e,["description"],u);const f=r(n,["enum"]);f!=null&&s(e,["enum"],f);const d=r(n,["example"]);d!=null&&s(e,["example"],d);const h=r(n,["format"]);h!=null&&s(e,["format"],h);const g=r(n,["items"]);g!=null&&s(e,["items"],g);const p=r(n,["maxItems"]);p!=null&&s(e,["maxItems"],p);const v=r(n,["maxLength"]);v!=null&&s(e,["maxLength"],v);const C=r(n,["maxProperties"]);C!=null&&s(e,["maxProperties"],C);const S=r(n,["maximum"]);S!=null&&s(e,["maximum"],S);const T=r(n,["minItems"]);T!=null&&s(e,["minItems"],T);const w=r(n,["minLength"]);w!=null&&s(e,["minLength"],w);const _=r(n,["minProperties"]);_!=null&&s(e,["minProperties"],_);const N=r(n,["minimum"]);N!=null&&s(e,["minimum"],N);const R=r(n,["nullable"]);R!=null&&s(e,["nullable"],R);const k=r(n,["pattern"]);k!=null&&s(e,["pattern"],k);const I=r(n,["properties"]);I!=null&&s(e,["properties"],I);const H=r(n,["propertyOrdering"]);H!=null&&s(e,["propertyOrdering"],H);const A=r(n,["required"]);A!=null&&s(e,["required"],A);const U=r(n,["title"]);U!=null&&s(e,["title"],U);const P=r(n,["type"]);return P!=null&&s(e,["type"],P),e}function Dy(n){const e={};if(r(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=r(n,["category"]);o!=null&&s(e,["category"],o);const l=r(n,["threshold"]);return l!=null&&s(e,["threshold"],l),e}function ky(n){const e={},o=r(n,["behavior"]);o!=null&&s(e,["behavior"],o);const l=r(n,["description"]);l!=null&&s(e,["description"],l);const u=r(n,["name"]);u!=null&&s(e,["name"],u);const f=r(n,["parameters"]);f!=null&&s(e,["parameters"],f);const d=r(n,["parametersJsonSchema"]);d!=null&&s(e,["parametersJsonSchema"],d);const h=r(n,["response"]);h!=null&&s(e,["response"],h);const g=r(n,["responseJsonSchema"]);return g!=null&&s(e,["responseJsonSchema"],g),e}function Iy(n){const e={},o=r(n,["startTime"]);o!=null&&s(e,["startTime"],o);const l=r(n,["endTime"]);return l!=null&&s(e,["endTime"],l),e}function Uy(n){const e={},o=r(n,["timeRangeFilter"]);if(o!=null&&s(e,["timeRangeFilter"],Iy(o)),r(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Py(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["dynamicThreshold"]);return l!=null&&s(e,["dynamicThreshold"],l),e}function Ly(n){const e={},o=r(n,["dynamicRetrievalConfig"]);return o!=null&&s(e,["dynamicRetrievalConfig"],Py(o)),e}function zy(){return{}}function By(n){const e={},o=r(n,["environment"]);return o!=null&&s(e,["environment"],o),e}function Gy(n){const e={},o=r(n,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>ky(p))),s(e,["functionDeclarations"],g)}if(r(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=r(n,["googleSearch"]);l!=null&&s(e,["googleSearch"],Uy(l));const u=r(n,["googleSearchRetrieval"]);if(u!=null&&s(e,["googleSearchRetrieval"],Ly(u)),r(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(n,["urlContext"])!=null&&s(e,["urlContext"],zy());const d=r(n,["computerUse"]);d!=null&&s(e,["computerUse"],By(d));const h=r(n,["codeExecution"]);return h!=null&&s(e,["codeExecution"],h),e}function Vy(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["allowedFunctionNames"]);return l!=null&&s(e,["allowedFunctionNames"],l),e}function Hy(n){const e={},o=r(n,["latitude"]);o!=null&&s(e,["latitude"],o);const l=r(n,["longitude"]);return l!=null&&s(e,["longitude"],l),e}function qy(n){const e={},o=r(n,["latLng"]);o!=null&&s(e,["latLng"],Hy(o));const l=r(n,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function Fy(n){const e={},o=r(n,["functionCallingConfig"]);o!=null&&s(e,["functionCallingConfig"],Vy(o));const l=r(n,["retrievalConfig"]);return l!=null&&s(e,["retrievalConfig"],qy(l)),e}function Oy(n){const e={},o=r(n,["voiceName"]);return o!=null&&s(e,["voiceName"],o),e}function Sp(n){const e={},o=r(n,["prebuiltVoiceConfig"]);return o!=null&&s(e,["prebuiltVoiceConfig"],Oy(o)),e}function Yy(n){const e={},o=r(n,["speaker"]);o!=null&&s(e,["speaker"],o);const l=r(n,["voiceConfig"]);return l!=null&&s(e,["voiceConfig"],Sp(l)),e}function Jy(n){const e={},o=r(n,["speakerVoiceConfigs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Yy(u))),s(e,["speakerVoiceConfigs"],l)}return e}function Xy(n){const e={},o=r(n,["voiceConfig"]);o!=null&&s(e,["voiceConfig"],Sp(o));const l=r(n,["multiSpeakerVoiceConfig"]);l!=null&&s(e,["multiSpeakerVoiceConfig"],Jy(l));const u=r(n,["languageCode"]);return u!=null&&s(e,["languageCode"],u),e}function Ky(n){const e={},o=r(n,["includeThoughts"]);o!=null&&s(e,["includeThoughts"],o);const l=r(n,["thinkingBudget"]);return l!=null&&s(e,["thinkingBudget"],l),e}function Zy(n,e,o){const l={},u=r(e,["systemInstruction"]);o!==void 0&&u!=null&&s(o,["systemInstruction"],Cp(Yt(u)));const f=r(e,["temperature"]);f!=null&&s(l,["temperature"],f);const d=r(e,["topP"]);d!=null&&s(l,["topP"],d);const h=r(e,["topK"]);h!=null&&s(l,["topK"],h);const g=r(e,["candidateCount"]);g!=null&&s(l,["candidateCount"],g);const p=r(e,["maxOutputTokens"]);p!=null&&s(l,["maxOutputTokens"],p);const v=r(e,["stopSequences"]);v!=null&&s(l,["stopSequences"],v);const C=r(e,["responseLogprobs"]);C!=null&&s(l,["responseLogprobs"],C);const S=r(e,["logprobs"]);S!=null&&s(l,["logprobs"],S);const T=r(e,["presencePenalty"]);T!=null&&s(l,["presencePenalty"],T);const w=r(e,["frequencyPenalty"]);w!=null&&s(l,["frequencyPenalty"],w);const _=r(e,["seed"]);_!=null&&s(l,["seed"],_);const N=r(e,["responseMimeType"]);N!=null&&s(l,["responseMimeType"],N);const R=r(e,["responseSchema"]);R!=null&&s(l,["responseSchema"],Ny(Wu(R)));const k=r(e,["responseJsonSchema"]);if(k!=null&&s(l,["responseJsonSchema"],k),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=r(e,["safetySettings"]);if(o!==void 0&&I!=null){let le=I;Array.isArray(le)&&(le=le.map(z=>Dy(z))),s(o,["safetySettings"],le)}const H=r(e,["tools"]);if(o!==void 0&&H!=null){let le=Ho(H);Array.isArray(le)&&(le=le.map(z=>Gy(Vo(z)))),s(o,["tools"],le)}const A=r(e,["toolConfig"]);if(o!==void 0&&A!=null&&s(o,["toolConfig"],Fy(A)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=r(e,["cachedContent"]);o!==void 0&&U!=null&&s(o,["cachedContent"],jn(n,U));const P=r(e,["responseModalities"]);P!=null&&s(l,["responseModalities"],P);const Y=r(e,["mediaResolution"]);Y!=null&&s(l,["mediaResolution"],Y);const B=r(e,["speechConfig"]);if(B!=null&&s(l,["speechConfig"],Xy(ec(B))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=r(e,["thinkingConfig"]);return q!=null&&s(l,["thinkingConfig"],Ky(q)),l}function $y(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["request","model"],nt(n,l));const u=r(e,["contents"]);if(u!=null){let d=Tn(u);Array.isArray(d)&&(d=d.map(h=>Cp(h))),s(o,["request","contents"],d)}const f=r(e,["config"]);return f!=null&&s(o,["request","generationConfig"],Zy(n,f,o)),o}function Qy(n,e){const o={};if(r(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const l=r(e,["fileName"]);l!=null&&s(o,["fileName"],l);const u=r(e,["inlinedRequests"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(d=>$y(n,d))),s(o,["requests","requests"],f)}return o}function jy(n,e){const o={},l=r(n,["displayName"]);if(e!==void 0&&l!=null&&s(e,["batch","displayName"],l),r(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function Bh(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["src"]);u!=null&&s(o,["batch","inputConfig"],Qy(n,vp(n,u)));const f=r(e,["config"]);return f!=null&&s(o,["config"],jy(f,o)),o}function Wy(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],qo(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function e1(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],qo(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function t1(n,e){const o={},l=r(n,["pageSize"]);e!==void 0&&l!=null&&s(e,["_query","pageSize"],l);const u=r(n,["pageToken"]);if(e!==void 0&&u!=null&&s(e,["_query","pageToken"],u),r(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function n1(n){const e={},o=r(n,["config"]);return o!=null&&s(e,["config"],t1(o,e)),e}function i1(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],qo(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function o1(n){const e={},o=r(n,["format"]);o!=null&&s(e,["instancesFormat"],o);const l=r(n,["gcsUri"]);l!=null&&s(e,["gcsSource","uris"],l);const u=r(n,["bigqueryUri"]);if(u!=null&&s(e,["bigquerySource","inputUri"],u),r(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function l1(n){const e={},o=r(n,["format"]);o!=null&&s(e,["predictionsFormat"],o);const l=r(n,["gcsUri"]);l!=null&&s(e,["gcsDestination","outputUriPrefix"],l);const u=r(n,["bigqueryUri"]);if(u!=null&&s(e,["bigqueryDestination","outputUri"],u),r(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function a1(n,e){const o={},l=r(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const u=r(n,["dest"]);return e!==void 0&&u!=null&&s(e,["outputConfig"],l1(by(u))),o}function r1(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["model"],nt(n,l));const u=r(e,["src"]);u!=null&&s(o,["inputConfig"],o1(vp(n,u)));const f=r(e,["config"]);return f!=null&&s(o,["config"],a1(f,o)),o}function s1(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],qo(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function u1(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],qo(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function c1(n,e){const o={},l=r(n,["pageSize"]);e!==void 0&&l!=null&&s(e,["_query","pageSize"],l);const u=r(n,["pageToken"]);e!==void 0&&u!=null&&s(e,["_query","pageToken"],u);const f=r(n,["filter"]);return e!==void 0&&f!=null&&s(e,["_query","filter"],f),o}function f1(n){const e={},o=r(n,["config"]);return o!=null&&s(e,["config"],c1(o,e)),e}function d1(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],qo(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function m1(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function h1(n){const e={},o=r(n,["data"]);o!=null&&s(e,["data"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function p1(n){const e={},o=r(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function g1(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],m1(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],h1(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],p1(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function y1(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>g1(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function v1(n){const e={},o=r(n,["citationSources"]);return o!=null&&s(e,["citations"],o),e}function x1(n){const e={},o=r(n,["retrievedUrl"]);o!=null&&s(e,["retrievedUrl"],o);const l=r(n,["urlRetrievalStatus"]);return l!=null&&s(e,["urlRetrievalStatus"],l),e}function C1(n){const e={},o=r(n,["urlMetadata"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>x1(u))),s(e,["urlMetadata"],l)}return e}function S1(n){const e={},o=r(n,["content"]);o!=null&&s(e,["content"],y1(o));const l=r(n,["citationMetadata"]);l!=null&&s(e,["citationMetadata"],v1(l));const u=r(n,["tokenCount"]);u!=null&&s(e,["tokenCount"],u);const f=r(n,["finishReason"]);f!=null&&s(e,["finishReason"],f);const d=r(n,["urlContextMetadata"]);d!=null&&s(e,["urlContextMetadata"],C1(d));const h=r(n,["avgLogprobs"]);h!=null&&s(e,["avgLogprobs"],h);const g=r(n,["groundingMetadata"]);g!=null&&s(e,["groundingMetadata"],g);const p=r(n,["index"]);p!=null&&s(e,["index"],p);const v=r(n,["logprobsResult"]);v!=null&&s(e,["logprobsResult"],v);const C=r(n,["safetyRatings"]);return C!=null&&s(e,["safetyRatings"],C),e}function T1(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["candidates"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(p=>S1(p))),s(e,["candidates"],g)}const u=r(n,["modelVersion"]);u!=null&&s(e,["modelVersion"],u);const f=r(n,["promptFeedback"]);f!=null&&s(e,["promptFeedback"],f);const d=r(n,["responseId"]);d!=null&&s(e,["responseId"],d);const h=r(n,["usageMetadata"]);return h!=null&&s(e,["usageMetadata"],h),e}function Tp(n){const e={},o=r(n,["details"]);o!=null&&s(e,["details"],o);const l=r(n,["code"]);l!=null&&s(e,["code"],l);const u=r(n,["message"]);return u!=null&&s(e,["message"],u),e}function _1(n){const e={},o=r(n,["response"]);o!=null&&s(e,["response"],T1(o));const l=r(n,["error"]);return l!=null&&s(e,["error"],Tp(l)),e}function w1(n){const e={},o=r(n,["responsesFile"]);o!=null&&s(e,["fileName"],o);const l=r(n,["inlinedResponses","inlinedResponses"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>_1(f))),s(e,["inlinedResponses"],u)}return e}function Sr(n){const e={},o=r(n,["name"]);o!=null&&s(e,["name"],o);const l=r(n,["metadata","displayName"]);l!=null&&s(e,["displayName"],l);const u=r(n,["metadata","state"]);u!=null&&s(e,["state"],xp(u));const f=r(n,["metadata","createTime"]);f!=null&&s(e,["createTime"],f);const d=r(n,["metadata","endTime"]);d!=null&&s(e,["endTime"],d);const h=r(n,["metadata","updateTime"]);h!=null&&s(e,["updateTime"],h);const g=r(n,["metadata","model"]);g!=null&&s(e,["model"],g);const p=r(n,["metadata","output"]);return p!=null&&s(e,["dest"],w1(p)),e}function b1(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["nextPageToken"]);l!=null&&s(e,["nextPageToken"],l);const u=r(n,["operations"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(d=>Sr(d))),s(e,["batchJobs"],f)}return e}function E1(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["name"]);l!=null&&s(e,["name"],l);const u=r(n,["done"]);u!=null&&s(e,["done"],u);const f=r(n,["error"]);return f!=null&&s(e,["error"],Tp(f)),e}function _p(n){const e={},o=r(n,["details"]);o!=null&&s(e,["details"],o);const l=r(n,["code"]);l!=null&&s(e,["code"],l);const u=r(n,["message"]);return u!=null&&s(e,["message"],u),e}function A1(n){const e={},o=r(n,["instancesFormat"]);o!=null&&s(e,["format"],o);const l=r(n,["gcsSource","uris"]);l!=null&&s(e,["gcsUri"],l);const u=r(n,["bigquerySource","inputUri"]);return u!=null&&s(e,["bigqueryUri"],u),e}function M1(n){const e={},o=r(n,["predictionsFormat"]);o!=null&&s(e,["format"],o);const l=r(n,["gcsDestination","outputUriPrefix"]);l!=null&&s(e,["gcsUri"],l);const u=r(n,["bigqueryDestination","outputUri"]);return u!=null&&s(e,["bigqueryUri"],u),e}function Ou(n){const e={},o=r(n,["name"]);o!=null&&s(e,["name"],o);const l=r(n,["displayName"]);l!=null&&s(e,["displayName"],l);const u=r(n,["state"]);u!=null&&s(e,["state"],xp(u));const f=r(n,["error"]);f!=null&&s(e,["error"],_p(f));const d=r(n,["createTime"]);d!=null&&s(e,["createTime"],d);const h=r(n,["startTime"]);h!=null&&s(e,["startTime"],h);const g=r(n,["endTime"]);g!=null&&s(e,["endTime"],g);const p=r(n,["updateTime"]);p!=null&&s(e,["updateTime"],p);const v=r(n,["model"]);v!=null&&s(e,["model"],v);const C=r(n,["inputConfig"]);C!=null&&s(e,["src"],A1(C));const S=r(n,["outputConfig"]);return S!=null&&s(e,["dest"],M1(S)),e}function R1(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["nextPageToken"]);l!=null&&s(e,["nextPageToken"],l);const u=r(n,["batchPredictionJobs"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(d=>Ou(d))),s(e,["batchJobs"],f)}return e}function N1(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["name"]);l!=null&&s(e,["name"],l);const u=r(n,["done"]);u!=null&&s(e,["done"],u);const f=r(n,["error"]);return f!=null&&s(e,["error"],_p(f)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $i;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})($i||($i={}));class Xl{constructor(e,o,l,u){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,l,u)}init(e,o,l){var u,f;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!l||Object.keys(l).length===0?d={config:{}}:typeof l=="object"?d=Object.assign({},l):d=l,d.config&&(d.config.pageToken=o.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(f=(u=d.config)===null||u===void 0?void 0:u.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D1 extends Qi{constructor(e){super(),this.apiClient=e,this.create=async o=>{var l,u;if(this.apiClient.isVertexAI()){const d=Date.now().toString();if(Array.isArray(o.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(o.config=o.config||{},o.config.displayName===void 0&&(o.config.displayName="genaiBatchJob_${timestampStr}"),o.config.dest===void 0&&typeof o.src=="string")if(o.src.startsWith("gs://")&&o.src.endsWith(".jsonl"))o.config.dest=`${o.src.slice(0,-6)}/dest`;else if(o.src.startsWith("bq://"))o.config.dest=`${o.src}_dest_${d}`;else throw new Error("Unsupported source:"+o.src)}else if(Array.isArray(o.src)||typeof o.src!="string"&&o.src.inlinedRequests){let f="",d={};const h=Bh(this.apiClient,o);f=Ie("{model}:batchGenerateContent",h._url),d=h._query;const v=h.batch.inputConfig.requests,C=v.requests,S=[];for(const w of C){const _=w;if(_.systemInstruction){const N=_.systemInstruction;delete _.systemInstruction;const R=_.request;R.systemInstruction=N,_.request=R}S.push(_)}return v.requests=S,delete h.config,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=o.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(u=o.config)===null||u===void 0?void 0:u.abortSignal}).then(w=>w.json()).then(w=>Sr(w))}return await this.createInternal(o)},this.list=async(o={})=>new Xl($i.PAGED_ITEM_BATCH_JOBS,l=>this.listInternal(l),await this.listInternal(o),o)}async createInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=r1(this.apiClient,e);return h=Ie("batchPredictionJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>Ou(v))}else{const p=Bh(this.apiClient,e);return h=Ie("{model}:batchGenerateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>Sr(v))}}async get(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=s1(this.apiClient,e);return h=Ie("batchPredictionJobs/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>Ou(v))}else{const p=Wy(this.apiClient,e);return h=Ie("batches/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>Sr(v))}}async cancel(e){var o,l,u,f;let d="",h={};if(this.apiClient.isVertexAI()){const g=u1(this.apiClient,e);d=Ie("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}else{const g=e1(this.apiClient,e);d=Ie("batches/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async listInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=f1(e);return h=Ie("batchPredictionJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=R1(v),S=new Uh;return Object.assign(S,C),S})}else{const p=n1(e);return h=Ie("batches",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=b1(v),S=new Uh;return Object.assign(S,C),S})}}async delete(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=d1(this.apiClient,e);return h=Ie("batchPredictionJobs/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>N1(v))}else{const p=i1(this.apiClient,e);return h=Ie("batches/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>E1(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k1(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function I1(n){const e={};if(r(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(n,["data"]);o!=null&&s(e,["data"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function U1(n){const e={};if(r(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function P1(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],k1(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],I1(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],U1(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function Gh(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>P1(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function L1(n){const e={},o=r(n,["behavior"]);o!=null&&s(e,["behavior"],o);const l=r(n,["description"]);l!=null&&s(e,["description"],l);const u=r(n,["name"]);u!=null&&s(e,["name"],u);const f=r(n,["parameters"]);f!=null&&s(e,["parameters"],f);const d=r(n,["parametersJsonSchema"]);d!=null&&s(e,["parametersJsonSchema"],d);const h=r(n,["response"]);h!=null&&s(e,["response"],h);const g=r(n,["responseJsonSchema"]);return g!=null&&s(e,["responseJsonSchema"],g),e}function z1(n){const e={},o=r(n,["startTime"]);o!=null&&s(e,["startTime"],o);const l=r(n,["endTime"]);return l!=null&&s(e,["endTime"],l),e}function B1(n){const e={},o=r(n,["timeRangeFilter"]);if(o!=null&&s(e,["timeRangeFilter"],z1(o)),r(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function G1(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["dynamicThreshold"]);return l!=null&&s(e,["dynamicThreshold"],l),e}function V1(n){const e={},o=r(n,["dynamicRetrievalConfig"]);return o!=null&&s(e,["dynamicRetrievalConfig"],G1(o)),e}function H1(){return{}}function q1(n){const e={},o=r(n,["environment"]);return o!=null&&s(e,["environment"],o),e}function F1(n){const e={},o=r(n,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>L1(p))),s(e,["functionDeclarations"],g)}if(r(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=r(n,["googleSearch"]);l!=null&&s(e,["googleSearch"],B1(l));const u=r(n,["googleSearchRetrieval"]);if(u!=null&&s(e,["googleSearchRetrieval"],V1(u)),r(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(n,["urlContext"])!=null&&s(e,["urlContext"],H1());const d=r(n,["computerUse"]);d!=null&&s(e,["computerUse"],q1(d));const h=r(n,["codeExecution"]);return h!=null&&s(e,["codeExecution"],h),e}function O1(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["allowedFunctionNames"]);return l!=null&&s(e,["allowedFunctionNames"],l),e}function Y1(n){const e={},o=r(n,["latitude"]);o!=null&&s(e,["latitude"],o);const l=r(n,["longitude"]);return l!=null&&s(e,["longitude"],l),e}function J1(n){const e={},o=r(n,["latLng"]);o!=null&&s(e,["latLng"],Y1(o));const l=r(n,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function X1(n){const e={},o=r(n,["functionCallingConfig"]);o!=null&&s(e,["functionCallingConfig"],O1(o));const l=r(n,["retrievalConfig"]);return l!=null&&s(e,["retrievalConfig"],J1(l)),e}function K1(n,e){const o={},l=r(n,["ttl"]);e!==void 0&&l!=null&&s(e,["ttl"],l);const u=r(n,["expireTime"]);e!==void 0&&u!=null&&s(e,["expireTime"],u);const f=r(n,["displayName"]);e!==void 0&&f!=null&&s(e,["displayName"],f);const d=r(n,["contents"]);if(e!==void 0&&d!=null){let v=Tn(d);Array.isArray(v)&&(v=v.map(C=>Gh(C))),s(e,["contents"],v)}const h=r(n,["systemInstruction"]);e!==void 0&&h!=null&&s(e,["systemInstruction"],Gh(Yt(h)));const g=r(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(C=>F1(C))),s(e,["tools"],v)}const p=r(n,["toolConfig"]);if(e!==void 0&&p!=null&&s(e,["toolConfig"],X1(p)),r(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function Z1(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["model"],sp(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],K1(u,o)),o}function $1(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],jn(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function Q1(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],jn(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function j1(n,e){const o={},l=r(n,["ttl"]);e!==void 0&&l!=null&&s(e,["ttl"],l);const u=r(n,["expireTime"]);return e!==void 0&&u!=null&&s(e,["expireTime"],u),o}function W1(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],jn(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],j1(u,o)),o}function ev(n,e){const o={},l=r(n,["pageSize"]);e!==void 0&&l!=null&&s(e,["_query","pageSize"],l);const u=r(n,["pageToken"]);return e!==void 0&&u!=null&&s(e,["_query","pageToken"],u),o}function tv(n){const e={},o=r(n,["config"]);return o!=null&&s(e,["config"],ev(o,e)),e}function nv(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function iv(n){const e={},o=r(n,["displayName"]);o!=null&&s(e,["displayName"],o);const l=r(n,["data"]);l!=null&&s(e,["data"],l);const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function ov(n){const e={},o=r(n,["displayName"]);o!=null&&s(e,["displayName"],o);const l=r(n,["fileUri"]);l!=null&&s(e,["fileUri"],l);const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function lv(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],nv(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],iv(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],ov(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function Vh(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>lv(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function av(n){const e={};if(r(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=r(n,["description"]);o!=null&&s(e,["description"],o);const l=r(n,["name"]);l!=null&&s(e,["name"],l);const u=r(n,["parameters"]);u!=null&&s(e,["parameters"],u);const f=r(n,["parametersJsonSchema"]);f!=null&&s(e,["parametersJsonSchema"],f);const d=r(n,["response"]);d!=null&&s(e,["response"],d);const h=r(n,["responseJsonSchema"]);return h!=null&&s(e,["responseJsonSchema"],h),e}function rv(n){const e={},o=r(n,["startTime"]);o!=null&&s(e,["startTime"],o);const l=r(n,["endTime"]);return l!=null&&s(e,["endTime"],l),e}function sv(n){const e={},o=r(n,["timeRangeFilter"]);o!=null&&s(e,["timeRangeFilter"],rv(o));const l=r(n,["excludeDomains"]);return l!=null&&s(e,["excludeDomains"],l),e}function uv(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["dynamicThreshold"]);return l!=null&&s(e,["dynamicThreshold"],l),e}function cv(n){const e={},o=r(n,["dynamicRetrievalConfig"]);return o!=null&&s(e,["dynamicRetrievalConfig"],uv(o)),e}function fv(n){const e={},o=r(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function dv(n){const e={},o=r(n,["apiKeyString"]);return o!=null&&s(e,["apiKeyString"],o),e}function mv(n){const e={},o=r(n,["apiKeyConfig"]);o!=null&&s(e,["apiKeyConfig"],dv(o));const l=r(n,["authType"]);l!=null&&s(e,["authType"],l);const u=r(n,["googleServiceAccountConfig"]);u!=null&&s(e,["googleServiceAccountConfig"],u);const f=r(n,["httpBasicAuthConfig"]);f!=null&&s(e,["httpBasicAuthConfig"],f);const d=r(n,["oauthConfig"]);d!=null&&s(e,["oauthConfig"],d);const h=r(n,["oidcConfig"]);return h!=null&&s(e,["oidcConfig"],h),e}function hv(n){const e={},o=r(n,["authConfig"]);return o!=null&&s(e,["authConfig"],mv(o)),e}function pv(){return{}}function gv(n){const e={},o=r(n,["environment"]);return o!=null&&s(e,["environment"],o),e}function yv(n){const e={},o=r(n,["functionDeclarations"]);if(o!=null){let C=o;Array.isArray(C)&&(C=C.map(S=>av(S))),s(e,["functionDeclarations"],C)}const l=r(n,["retrieval"]);l!=null&&s(e,["retrieval"],l);const u=r(n,["googleSearch"]);u!=null&&s(e,["googleSearch"],sv(u));const f=r(n,["googleSearchRetrieval"]);f!=null&&s(e,["googleSearchRetrieval"],cv(f));const d=r(n,["enterpriseWebSearch"]);d!=null&&s(e,["enterpriseWebSearch"],fv(d));const h=r(n,["googleMaps"]);h!=null&&s(e,["googleMaps"],hv(h)),r(n,["urlContext"])!=null&&s(e,["urlContext"],pv());const p=r(n,["computerUse"]);p!=null&&s(e,["computerUse"],gv(p));const v=r(n,["codeExecution"]);return v!=null&&s(e,["codeExecution"],v),e}function vv(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["allowedFunctionNames"]);return l!=null&&s(e,["allowedFunctionNames"],l),e}function xv(n){const e={},o=r(n,["latitude"]);o!=null&&s(e,["latitude"],o);const l=r(n,["longitude"]);return l!=null&&s(e,["longitude"],l),e}function Cv(n){const e={},o=r(n,["latLng"]);o!=null&&s(e,["latLng"],xv(o));const l=r(n,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function Sv(n){const e={},o=r(n,["functionCallingConfig"]);o!=null&&s(e,["functionCallingConfig"],vv(o));const l=r(n,["retrievalConfig"]);return l!=null&&s(e,["retrievalConfig"],Cv(l)),e}function Tv(n,e){const o={},l=r(n,["ttl"]);e!==void 0&&l!=null&&s(e,["ttl"],l);const u=r(n,["expireTime"]);e!==void 0&&u!=null&&s(e,["expireTime"],u);const f=r(n,["displayName"]);e!==void 0&&f!=null&&s(e,["displayName"],f);const d=r(n,["contents"]);if(e!==void 0&&d!=null){let C=Tn(d);Array.isArray(C)&&(C=C.map(S=>Vh(S))),s(e,["contents"],C)}const h=r(n,["systemInstruction"]);e!==void 0&&h!=null&&s(e,["systemInstruction"],Vh(Yt(h)));const g=r(n,["tools"]);if(e!==void 0&&g!=null){let C=g;Array.isArray(C)&&(C=C.map(S=>yv(S))),s(e,["tools"],C)}const p=r(n,["toolConfig"]);e!==void 0&&p!=null&&s(e,["toolConfig"],Sv(p));const v=r(n,["kmsKeyName"]);return e!==void 0&&v!=null&&s(e,["encryption_spec","kmsKeyName"],v),o}function _v(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["model"],sp(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],Tv(u,o)),o}function wv(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],jn(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function bv(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],jn(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function Ev(n,e){const o={},l=r(n,["ttl"]);e!==void 0&&l!=null&&s(e,["ttl"],l);const u=r(n,["expireTime"]);return e!==void 0&&u!=null&&s(e,["expireTime"],u),o}function Av(n,e){const o={},l=r(e,["name"]);l!=null&&s(o,["_url","name"],jn(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],Ev(u,o)),o}function Mv(n,e){const o={},l=r(n,["pageSize"]);e!==void 0&&l!=null&&s(e,["_query","pageSize"],l);const u=r(n,["pageToken"]);return e!==void 0&&u!=null&&s(e,["_query","pageToken"],u),o}function Rv(n){const e={},o=r(n,["config"]);return o!=null&&s(e,["config"],Mv(o,e)),e}function Tr(n){const e={},o=r(n,["name"]);o!=null&&s(e,["name"],o);const l=r(n,["displayName"]);l!=null&&s(e,["displayName"],l);const u=r(n,["model"]);u!=null&&s(e,["model"],u);const f=r(n,["createTime"]);f!=null&&s(e,["createTime"],f);const d=r(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const h=r(n,["expireTime"]);h!=null&&s(e,["expireTime"],h);const g=r(n,["usageMetadata"]);return g!=null&&s(e,["usageMetadata"],g),e}function Nv(n){const e={},o=r(n,["sdkHttpResponse"]);return o!=null&&s(e,["sdkHttpResponse"],o),e}function Dv(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["nextPageToken"]);l!=null&&s(e,["nextPageToken"],l);const u=r(n,["cachedContents"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(d=>Tr(d))),s(e,["cachedContents"],f)}return e}function _r(n){const e={},o=r(n,["name"]);o!=null&&s(e,["name"],o);const l=r(n,["displayName"]);l!=null&&s(e,["displayName"],l);const u=r(n,["model"]);u!=null&&s(e,["model"],u);const f=r(n,["createTime"]);f!=null&&s(e,["createTime"],f);const d=r(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const h=r(n,["expireTime"]);h!=null&&s(e,["expireTime"],h);const g=r(n,["usageMetadata"]);return g!=null&&s(e,["usageMetadata"],g),e}function kv(n){const e={},o=r(n,["sdkHttpResponse"]);return o!=null&&s(e,["sdkHttpResponse"],o),e}function Iv(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["nextPageToken"]);l!=null&&s(e,["nextPageToken"],l);const u=r(n,["cachedContents"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(d=>_r(d))),s(e,["cachedContents"],f)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uv extends Qi{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Xl($i.PAGED_ITEM_CACHED_CONTENTS,l=>this.listInternal(l),await this.listInternal(o),o)}async create(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=_v(this.apiClient,e);return h=Ie("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>_r(v))}else{const p=Z1(this.apiClient,e);return h=Ie("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>Tr(v))}}async get(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=wv(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>_r(v))}else{const p=$1(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>Tr(v))}}async delete(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=bv(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=kv(v),S=new kh;return Object.assign(S,C),S})}else{const p=Q1(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=Nv(v),S=new kh;return Object.assign(S,C),S})}}async update(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Av(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>_r(v))}else{const p=W1(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>Tr(v))}}async listInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Rv(e);return h=Ie("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=Iv(v),S=new Ih;return Object.assign(S,C),S})}else{const p=tv(e);return h=Ie("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=Dv(v),S=new Ih;return Object.assign(S,C),S})}}}function Hh(n){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&n[e],l=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&l>=n.length&&(n=void 0),{value:n&&n[l++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(n){return this instanceof mt?(this.v=n,this):new mt(n)}function Bo(n,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=o.apply(n,e||[]),u,f=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),u[Symbol.asyncIterator]=function(){return this},u;function d(T){return function(w){return Promise.resolve(w).then(T,C)}}function h(T,w){l[T]&&(u[T]=function(_){return new Promise(function(N,R){f.push([T,_,N,R])>1||g(T,_)})},w&&(u[T]=w(u[T])))}function g(T,w){try{p(l[T](w))}catch(_){S(f[0][3],_)}}function p(T){T.value instanceof mt?Promise.resolve(T.value.v).then(v,C):S(f[0][2],T)}function v(T){g("next",T)}function C(T){g("throw",T)}function S(T,w){T(w),f.shift(),f.length&&g(f[0][0],f[0][1])}}function Yl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],o;return e?e.call(n):(n=typeof Hh=="function"?Hh(n):n[Symbol.iterator](),o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o);function l(f){o[f]=n[f]&&function(d){return new Promise(function(h,g){d=n[f](d),u(h,g,d.done,d.value)})}}function u(f,d,h,g){Promise.resolve(g).then(function(p){f({value:p,done:h})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pv(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const o=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:wp(o)}function wp(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Lv(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function qh(n){if(n===void 0||n.length===0)return[];const e=[],o=n.length;let l=0;for(;l<o;)if(n[l].role==="user")e.push(n[l]),l++;else{const u=[];let f=!0;for(;l<o&&n[l].role==="model";)u.push(n[l]),f&&!wp(n[l])&&(f=!1),l++;f?e.push(...u):e.pop()}return e}class zv{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new Bv(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Bv{constructor(e,o,l,u={},f=[]){this.apiClient=e,this.modelsModule=o,this.model=l,this.config=u,this.history=f,this.sendPromise=Promise.resolve(),Lv(f)}async sendMessage(e){var o;await this.sendPromise;const l=Yt(e.message),u=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(l),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var f,d,h;const g=await u,p=(d=(f=g.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content,v=g.automaticFunctionCallingHistory,C=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(C))!==null&&h!==void 0?h:[]);const T=p?[p]:[];this.recordHistory(l,T,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),u}async sendMessageStream(e){var o;await this.sendPromise;const l=Yt(e.message),u=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(l),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=u.then(()=>{}).catch(()=>{});const f=await u;return this.processStreamResponse(f,l)}getHistory(e=!1){const o=e?qh(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){var l,u;return Bo(this,arguments,function*(){var d,h,g,p;const v=[];try{for(var C=!0,S=Yl(e),T;T=yield mt(S.next()),d=T.done,!d;C=!0){p=T.value,C=!1;const w=p;if(Pv(w)){const _=(u=(l=w.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;_!==void 0&&v.push(_)}yield yield mt(w)}}catch(w){h={error:w}}finally{try{!C&&!d&&(g=S.return)&&(yield mt(g.call(S)))}finally{if(h)throw h.error}}this.recordHistory(o,v)})}recordHistory(e,o,l){let u=[];o.length>0&&o.every(f=>f.role!==void 0)?u=o:u.push({role:"model",parts:[]}),l&&l.length>0?this.history.push(...qh(l)):this.history.push(e),this.history.push(...u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ar extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ar.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gv(n,e){const o={},l=r(n,["pageSize"]);e!==void 0&&l!=null&&s(e,["_query","pageSize"],l);const u=r(n,["pageToken"]);return e!==void 0&&u!=null&&s(e,["_query","pageToken"],u),o}function Vv(n){const e={},o=r(n,["config"]);return o!=null&&s(e,["config"],Gv(o,e)),e}function Hv(n){const e={},o=r(n,["details"]);o!=null&&s(e,["details"],o);const l=r(n,["message"]);l!=null&&s(e,["message"],l);const u=r(n,["code"]);return u!=null&&s(e,["code"],u),e}function qv(n){const e={},o=r(n,["name"]);o!=null&&s(e,["name"],o);const l=r(n,["displayName"]);l!=null&&s(e,["displayName"],l);const u=r(n,["mimeType"]);u!=null&&s(e,["mimeType"],u);const f=r(n,["sizeBytes"]);f!=null&&s(e,["sizeBytes"],f);const d=r(n,["createTime"]);d!=null&&s(e,["createTime"],d);const h=r(n,["expirationTime"]);h!=null&&s(e,["expirationTime"],h);const g=r(n,["updateTime"]);g!=null&&s(e,["updateTime"],g);const p=r(n,["sha256Hash"]);p!=null&&s(e,["sha256Hash"],p);const v=r(n,["uri"]);v!=null&&s(e,["uri"],v);const C=r(n,["downloadUri"]);C!=null&&s(e,["downloadUri"],C);const S=r(n,["state"]);S!=null&&s(e,["state"],S);const T=r(n,["source"]);T!=null&&s(e,["source"],T);const w=r(n,["videoMetadata"]);w!=null&&s(e,["videoMetadata"],w);const _=r(n,["error"]);return _!=null&&s(e,["error"],Hv(_)),e}function Fv(n){const e={},o=r(n,["file"]);o!=null&&s(e,["file"],qv(o));const l=r(n,["config"]);return l!=null&&s(e,["config"],l),e}function Ov(n){const e={},o=r(n,["name"]);o!=null&&s(e,["_url","file"],pp(o));const l=r(n,["config"]);return l!=null&&s(e,["config"],l),e}function Yv(n){const e={},o=r(n,["name"]);o!=null&&s(e,["_url","file"],pp(o));const l=r(n,["config"]);return l!=null&&s(e,["config"],l),e}function Jv(n){const e={},o=r(n,["details"]);o!=null&&s(e,["details"],o);const l=r(n,["message"]);l!=null&&s(e,["message"],l);const u=r(n,["code"]);return u!=null&&s(e,["code"],u),e}function Yu(n){const e={},o=r(n,["name"]);o!=null&&s(e,["name"],o);const l=r(n,["displayName"]);l!=null&&s(e,["displayName"],l);const u=r(n,["mimeType"]);u!=null&&s(e,["mimeType"],u);const f=r(n,["sizeBytes"]);f!=null&&s(e,["sizeBytes"],f);const d=r(n,["createTime"]);d!=null&&s(e,["createTime"],d);const h=r(n,["expirationTime"]);h!=null&&s(e,["expirationTime"],h);const g=r(n,["updateTime"]);g!=null&&s(e,["updateTime"],g);const p=r(n,["sha256Hash"]);p!=null&&s(e,["sha256Hash"],p);const v=r(n,["uri"]);v!=null&&s(e,["uri"],v);const C=r(n,["downloadUri"]);C!=null&&s(e,["downloadUri"],C);const S=r(n,["state"]);S!=null&&s(e,["state"],S);const T=r(n,["source"]);T!=null&&s(e,["source"],T);const w=r(n,["videoMetadata"]);w!=null&&s(e,["videoMetadata"],w);const _=r(n,["error"]);return _!=null&&s(e,["error"],Jv(_)),e}function Xv(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["nextPageToken"]);l!=null&&s(e,["nextPageToken"],l);const u=r(n,["files"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(d=>Yu(d))),s(e,["files"],f)}return e}function Kv(n){const e={},o=r(n,["sdkHttpResponse"]);return o!=null&&s(e,["sdkHttpResponse"],o),e}function Zv(n){const e={},o=r(n,["sdkHttpResponse"]);return o!=null&&s(e,["sdkHttpResponse"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $v extends Qi{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new Xl($i.PAGED_ITEM_FILES,l=>this.listInternal(l),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>Yu(o))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Vv(e);return f=Ie("files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const p=Xv(g),v=new dy;return Object.assign(v,p),v})}}async createInternal(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Fv(e);return f=Ie("upload/v1beta/files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>{const p=Kv(g),v=new my;return Object.assign(v,p),v})}}async get(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Ov(e);return f=Ie("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>Yu(g))}}async delete(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Yv(e);return f=Ie("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const p=Zv(g),v=new hy;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qv(n){const e={},o=r(n,["voiceName"]);return o!=null&&s(e,["voiceName"],o),e}function bp(n){const e={},o=r(n,["prebuiltVoiceConfig"]);return o!=null&&s(e,["prebuiltVoiceConfig"],Qv(o)),e}function jv(n){const e={},o=r(n,["speaker"]);o!=null&&s(e,["speaker"],o);const l=r(n,["voiceConfig"]);return l!=null&&s(e,["voiceConfig"],bp(l)),e}function Wv(n){const e={},o=r(n,["speakerVoiceConfigs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>jv(u))),s(e,["speakerVoiceConfigs"],l)}return e}function ex(n){const e={},o=r(n,["voiceConfig"]);o!=null&&s(e,["voiceConfig"],bp(o));const l=r(n,["multiSpeakerVoiceConfig"]);l!=null&&s(e,["multiSpeakerVoiceConfig"],Wv(l));const u=r(n,["languageCode"]);return u!=null&&s(e,["languageCode"],u),e}function tx(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function nx(n){const e={};if(r(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(n,["data"]);o!=null&&s(e,["data"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function ix(n){const e={};if(r(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function ox(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],tx(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],nx(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],ix(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function lx(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>ox(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function ax(n){const e={},o=r(n,["behavior"]);o!=null&&s(e,["behavior"],o);const l=r(n,["description"]);l!=null&&s(e,["description"],l);const u=r(n,["name"]);u!=null&&s(e,["name"],u);const f=r(n,["parameters"]);f!=null&&s(e,["parameters"],f);const d=r(n,["parametersJsonSchema"]);d!=null&&s(e,["parametersJsonSchema"],d);const h=r(n,["response"]);h!=null&&s(e,["response"],h);const g=r(n,["responseJsonSchema"]);return g!=null&&s(e,["responseJsonSchema"],g),e}function rx(n){const e={},o=r(n,["startTime"]);o!=null&&s(e,["startTime"],o);const l=r(n,["endTime"]);return l!=null&&s(e,["endTime"],l),e}function sx(n){const e={},o=r(n,["timeRangeFilter"]);if(o!=null&&s(e,["timeRangeFilter"],rx(o)),r(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function ux(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["dynamicThreshold"]);return l!=null&&s(e,["dynamicThreshold"],l),e}function cx(n){const e={},o=r(n,["dynamicRetrievalConfig"]);return o!=null&&s(e,["dynamicRetrievalConfig"],ux(o)),e}function fx(){return{}}function dx(n){const e={},o=r(n,["environment"]);return o!=null&&s(e,["environment"],o),e}function mx(n){const e={},o=r(n,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>ax(p))),s(e,["functionDeclarations"],g)}if(r(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=r(n,["googleSearch"]);l!=null&&s(e,["googleSearch"],sx(l));const u=r(n,["googleSearchRetrieval"]);if(u!=null&&s(e,["googleSearchRetrieval"],cx(u)),r(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(n,["urlContext"])!=null&&s(e,["urlContext"],fx());const d=r(n,["computerUse"]);d!=null&&s(e,["computerUse"],dx(d));const h=r(n,["codeExecution"]);return h!=null&&s(e,["codeExecution"],h),e}function hx(n){const e={},o=r(n,["handle"]);if(o!=null&&s(e,["handle"],o),r(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fh(){return{}}function px(n){const e={},o=r(n,["disabled"]);o!=null&&s(e,["disabled"],o);const l=r(n,["startOfSpeechSensitivity"]);l!=null&&s(e,["startOfSpeechSensitivity"],l);const u=r(n,["endOfSpeechSensitivity"]);u!=null&&s(e,["endOfSpeechSensitivity"],u);const f=r(n,["prefixPaddingMs"]);f!=null&&s(e,["prefixPaddingMs"],f);const d=r(n,["silenceDurationMs"]);return d!=null&&s(e,["silenceDurationMs"],d),e}function gx(n){const e={},o=r(n,["automaticActivityDetection"]);o!=null&&s(e,["automaticActivityDetection"],px(o));const l=r(n,["activityHandling"]);l!=null&&s(e,["activityHandling"],l);const u=r(n,["turnCoverage"]);return u!=null&&s(e,["turnCoverage"],u),e}function yx(n){const e={},o=r(n,["targetTokens"]);return o!=null&&s(e,["targetTokens"],o),e}function vx(n){const e={},o=r(n,["triggerTokens"]);o!=null&&s(e,["triggerTokens"],o);const l=r(n,["slidingWindow"]);return l!=null&&s(e,["slidingWindow"],yx(l)),e}function xx(n){const e={},o=r(n,["proactiveAudio"]);return o!=null&&s(e,["proactiveAudio"],o),e}function Cx(n,e){const o={},l=r(n,["generationConfig"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig"],l);const u=r(n,["responseModalities"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","responseModalities"],u);const f=r(n,["temperature"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","temperature"],f);const d=r(n,["topP"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","topP"],d);const h=r(n,["topK"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","topK"],h);const g=r(n,["maxOutputTokens"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","maxOutputTokens"],g);const p=r(n,["mediaResolution"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","mediaResolution"],p);const v=r(n,["seed"]);e!==void 0&&v!=null&&s(e,["setup","generationConfig","seed"],v);const C=r(n,["speechConfig"]);e!==void 0&&C!=null&&s(e,["setup","generationConfig","speechConfig"],ex(tc(C)));const S=r(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],S);const T=r(n,["systemInstruction"]);e!==void 0&&T!=null&&s(e,["setup","systemInstruction"],lx(Yt(T)));const w=r(n,["tools"]);if(e!==void 0&&w!=null){let A=Ho(w);Array.isArray(A)&&(A=A.map(U=>mx(Vo(U)))),s(e,["setup","tools"],A)}const _=r(n,["sessionResumption"]);e!==void 0&&_!=null&&s(e,["setup","sessionResumption"],hx(_));const N=r(n,["inputAudioTranscription"]);e!==void 0&&N!=null&&s(e,["setup","inputAudioTranscription"],Fh());const R=r(n,["outputAudioTranscription"]);e!==void 0&&R!=null&&s(e,["setup","outputAudioTranscription"],Fh());const k=r(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],gx(k));const I=r(n,["contextWindowCompression"]);e!==void 0&&I!=null&&s(e,["setup","contextWindowCompression"],vx(I));const H=r(n,["proactivity"]);return e!==void 0&&H!=null&&s(e,["setup","proactivity"],xx(H)),o}function Sx(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["setup","model"],nt(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],Cx(u,o)),o}function Tx(){return{}}function _x(){return{}}function wx(n){const e={},o=r(n,["media"]);o!=null&&s(e,["mediaChunks"],up(o));const l=r(n,["audio"]);l!=null&&s(e,["audio"],fp(l));const u=r(n,["audioStreamEnd"]);u!=null&&s(e,["audioStreamEnd"],u);const f=r(n,["video"]);f!=null&&s(e,["video"],cp(f));const d=r(n,["text"]);return d!=null&&s(e,["text"],d),r(n,["activityStart"])!=null&&s(e,["activityStart"],Tx()),r(n,["activityEnd"])!=null&&s(e,["activityEnd"],_x()),e}function Ep(n){const e={},o=r(n,["text"]);o!=null&&s(e,["text"],o);const l=r(n,["weight"]);return l!=null&&s(e,["weight"],l),e}function bx(n){const e={},o=r(n,["weightedPrompts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Ep(u))),s(e,["weightedPrompts"],l)}return e}function Ap(n){const e={},o=r(n,["temperature"]);o!=null&&s(e,["temperature"],o);const l=r(n,["topK"]);l!=null&&s(e,["topK"],l);const u=r(n,["seed"]);u!=null&&s(e,["seed"],u);const f=r(n,["guidance"]);f!=null&&s(e,["guidance"],f);const d=r(n,["bpm"]);d!=null&&s(e,["bpm"],d);const h=r(n,["density"]);h!=null&&s(e,["density"],h);const g=r(n,["brightness"]);g!=null&&s(e,["brightness"],g);const p=r(n,["scale"]);p!=null&&s(e,["scale"],p);const v=r(n,["muteBass"]);v!=null&&s(e,["muteBass"],v);const C=r(n,["muteDrums"]);C!=null&&s(e,["muteDrums"],C);const S=r(n,["onlyBassAndDrums"]);S!=null&&s(e,["onlyBassAndDrums"],S);const T=r(n,["musicGenerationMode"]);return T!=null&&s(e,["musicGenerationMode"],T),e}function Ex(n){const e={},o=r(n,["musicGenerationConfig"]);return o!=null&&s(e,["musicGenerationConfig"],Ap(o)),e}function Mp(n){const e={},o=r(n,["model"]);return o!=null&&s(e,["model"],o),e}function Rp(n){const e={},o=r(n,["weightedPrompts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Ep(u))),s(e,["weightedPrompts"],l)}return e}function Ju(n){const e={},o=r(n,["setup"]);o!=null&&s(e,["setup"],Mp(o));const l=r(n,["clientContent"]);l!=null&&s(e,["clientContent"],Rp(l));const u=r(n,["musicGenerationConfig"]);u!=null&&s(e,["musicGenerationConfig"],Ap(u));const f=r(n,["playbackControl"]);return f!=null&&s(e,["playbackControl"],f),e}function Ax(n){const e={},o=r(n,["voiceName"]);return o!=null&&s(e,["voiceName"],o),e}function Mx(n){const e={},o=r(n,["prebuiltVoiceConfig"]);return o!=null&&s(e,["prebuiltVoiceConfig"],Ax(o)),e}function Rx(n){const e={},o=r(n,["voiceConfig"]);if(o!=null&&s(e,["voiceConfig"],Mx(o)),r(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const l=r(n,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function Nx(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function Dx(n){const e={},o=r(n,["displayName"]);o!=null&&s(e,["displayName"],o);const l=r(n,["data"]);l!=null&&s(e,["data"],l);const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function kx(n){const e={},o=r(n,["displayName"]);o!=null&&s(e,["displayName"],o);const l=r(n,["fileUri"]);l!=null&&s(e,["fileUri"],l);const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function Ix(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],Nx(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],Dx(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],kx(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function Ux(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>Ix(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function Px(n){const e={};if(r(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=r(n,["description"]);o!=null&&s(e,["description"],o);const l=r(n,["name"]);l!=null&&s(e,["name"],l);const u=r(n,["parameters"]);u!=null&&s(e,["parameters"],u);const f=r(n,["parametersJsonSchema"]);f!=null&&s(e,["parametersJsonSchema"],f);const d=r(n,["response"]);d!=null&&s(e,["response"],d);const h=r(n,["responseJsonSchema"]);return h!=null&&s(e,["responseJsonSchema"],h),e}function Lx(n){const e={},o=r(n,["startTime"]);o!=null&&s(e,["startTime"],o);const l=r(n,["endTime"]);return l!=null&&s(e,["endTime"],l),e}function zx(n){const e={},o=r(n,["timeRangeFilter"]);o!=null&&s(e,["timeRangeFilter"],Lx(o));const l=r(n,["excludeDomains"]);return l!=null&&s(e,["excludeDomains"],l),e}function Bx(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["dynamicThreshold"]);return l!=null&&s(e,["dynamicThreshold"],l),e}function Gx(n){const e={},o=r(n,["dynamicRetrievalConfig"]);return o!=null&&s(e,["dynamicRetrievalConfig"],Bx(o)),e}function Vx(n){const e={},o=r(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Hx(n){const e={},o=r(n,["apiKeyString"]);return o!=null&&s(e,["apiKeyString"],o),e}function qx(n){const e={},o=r(n,["apiKeyConfig"]);o!=null&&s(e,["apiKeyConfig"],Hx(o));const l=r(n,["authType"]);l!=null&&s(e,["authType"],l);const u=r(n,["googleServiceAccountConfig"]);u!=null&&s(e,["googleServiceAccountConfig"],u);const f=r(n,["httpBasicAuthConfig"]);f!=null&&s(e,["httpBasicAuthConfig"],f);const d=r(n,["oauthConfig"]);d!=null&&s(e,["oauthConfig"],d);const h=r(n,["oidcConfig"]);return h!=null&&s(e,["oidcConfig"],h),e}function Fx(n){const e={},o=r(n,["authConfig"]);return o!=null&&s(e,["authConfig"],qx(o)),e}function Ox(){return{}}function Yx(n){const e={},o=r(n,["environment"]);return o!=null&&s(e,["environment"],o),e}function Jx(n){const e={},o=r(n,["functionDeclarations"]);if(o!=null){let C=o;Array.isArray(C)&&(C=C.map(S=>Px(S))),s(e,["functionDeclarations"],C)}const l=r(n,["retrieval"]);l!=null&&s(e,["retrieval"],l);const u=r(n,["googleSearch"]);u!=null&&s(e,["googleSearch"],zx(u));const f=r(n,["googleSearchRetrieval"]);f!=null&&s(e,["googleSearchRetrieval"],Gx(f));const d=r(n,["enterpriseWebSearch"]);d!=null&&s(e,["enterpriseWebSearch"],Vx(d));const h=r(n,["googleMaps"]);h!=null&&s(e,["googleMaps"],Fx(h)),r(n,["urlContext"])!=null&&s(e,["urlContext"],Ox());const p=r(n,["computerUse"]);p!=null&&s(e,["computerUse"],Yx(p));const v=r(n,["codeExecution"]);return v!=null&&s(e,["codeExecution"],v),e}function Xx(n){const e={},o=r(n,["handle"]);o!=null&&s(e,["handle"],o);const l=r(n,["transparent"]);return l!=null&&s(e,["transparent"],l),e}function Oh(){return{}}function Kx(n){const e={},o=r(n,["disabled"]);o!=null&&s(e,["disabled"],o);const l=r(n,["startOfSpeechSensitivity"]);l!=null&&s(e,["startOfSpeechSensitivity"],l);const u=r(n,["endOfSpeechSensitivity"]);u!=null&&s(e,["endOfSpeechSensitivity"],u);const f=r(n,["prefixPaddingMs"]);f!=null&&s(e,["prefixPaddingMs"],f);const d=r(n,["silenceDurationMs"]);return d!=null&&s(e,["silenceDurationMs"],d),e}function Zx(n){const e={},o=r(n,["automaticActivityDetection"]);o!=null&&s(e,["automaticActivityDetection"],Kx(o));const l=r(n,["activityHandling"]);l!=null&&s(e,["activityHandling"],l);const u=r(n,["turnCoverage"]);return u!=null&&s(e,["turnCoverage"],u),e}function $x(n){const e={},o=r(n,["targetTokens"]);return o!=null&&s(e,["targetTokens"],o),e}function Qx(n){const e={},o=r(n,["triggerTokens"]);o!=null&&s(e,["triggerTokens"],o);const l=r(n,["slidingWindow"]);return l!=null&&s(e,["slidingWindow"],$x(l)),e}function jx(n){const e={},o=r(n,["proactiveAudio"]);return o!=null&&s(e,["proactiveAudio"],o),e}function Wx(n,e){const o={},l=r(n,["generationConfig"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig"],l);const u=r(n,["responseModalities"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","responseModalities"],u);const f=r(n,["temperature"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","temperature"],f);const d=r(n,["topP"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","topP"],d);const h=r(n,["topK"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","topK"],h);const g=r(n,["maxOutputTokens"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","maxOutputTokens"],g);const p=r(n,["mediaResolution"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","mediaResolution"],p);const v=r(n,["seed"]);e!==void 0&&v!=null&&s(e,["setup","generationConfig","seed"],v);const C=r(n,["speechConfig"]);e!==void 0&&C!=null&&s(e,["setup","generationConfig","speechConfig"],Rx(tc(C)));const S=r(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],S);const T=r(n,["systemInstruction"]);e!==void 0&&T!=null&&s(e,["setup","systemInstruction"],Ux(Yt(T)));const w=r(n,["tools"]);if(e!==void 0&&w!=null){let A=Ho(w);Array.isArray(A)&&(A=A.map(U=>Jx(Vo(U)))),s(e,["setup","tools"],A)}const _=r(n,["sessionResumption"]);e!==void 0&&_!=null&&s(e,["setup","sessionResumption"],Xx(_));const N=r(n,["inputAudioTranscription"]);e!==void 0&&N!=null&&s(e,["setup","inputAudioTranscription"],Oh());const R=r(n,["outputAudioTranscription"]);e!==void 0&&R!=null&&s(e,["setup","outputAudioTranscription"],Oh());const k=r(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],Zx(k));const I=r(n,["contextWindowCompression"]);e!==void 0&&I!=null&&s(e,["setup","contextWindowCompression"],Qx(I));const H=r(n,["proactivity"]);return e!==void 0&&H!=null&&s(e,["setup","proactivity"],jx(H)),o}function e2(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["setup","model"],nt(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],Wx(u,o)),o}function t2(){return{}}function n2(){return{}}function i2(n){const e={},o=r(n,["media"]);o!=null&&s(e,["mediaChunks"],up(o));const l=r(n,["audio"]);l!=null&&s(e,["audio"],fp(l));const u=r(n,["audioStreamEnd"]);u!=null&&s(e,["audioStreamEnd"],u);const f=r(n,["video"]);f!=null&&s(e,["video"],cp(f));const d=r(n,["text"]);return d!=null&&s(e,["text"],d),r(n,["activityStart"])!=null&&s(e,["activityStart"],t2()),r(n,["activityEnd"])!=null&&s(e,["activityEnd"],n2()),e}function o2(){return{}}function l2(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function a2(n){const e={},o=r(n,["data"]);o!=null&&s(e,["data"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function r2(n){const e={},o=r(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function s2(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],l2(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],a2(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],r2(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function u2(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>s2(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function Yh(n){const e={},o=r(n,["text"]);o!=null&&s(e,["text"],o);const l=r(n,["finished"]);return l!=null&&s(e,["finished"],l),e}function c2(n){const e={},o=r(n,["retrievedUrl"]);o!=null&&s(e,["retrievedUrl"],o);const l=r(n,["urlRetrievalStatus"]);return l!=null&&s(e,["urlRetrievalStatus"],l),e}function f2(n){const e={},o=r(n,["urlMetadata"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>c2(u))),s(e,["urlMetadata"],l)}return e}function d2(n){const e={},o=r(n,["modelTurn"]);o!=null&&s(e,["modelTurn"],u2(o));const l=r(n,["turnComplete"]);l!=null&&s(e,["turnComplete"],l);const u=r(n,["interrupted"]);u!=null&&s(e,["interrupted"],u);const f=r(n,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const d=r(n,["generationComplete"]);d!=null&&s(e,["generationComplete"],d);const h=r(n,["inputTranscription"]);h!=null&&s(e,["inputTranscription"],Yh(h));const g=r(n,["outputTranscription"]);g!=null&&s(e,["outputTranscription"],Yh(g));const p=r(n,["urlContextMetadata"]);return p!=null&&s(e,["urlContextMetadata"],f2(p)),e}function m2(n){const e={},o=r(n,["id"]);o!=null&&s(e,["id"],o);const l=r(n,["args"]);l!=null&&s(e,["args"],l);const u=r(n,["name"]);return u!=null&&s(e,["name"],u),e}function h2(n){const e={},o=r(n,["functionCalls"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>m2(u))),s(e,["functionCalls"],l)}return e}function p2(n){const e={},o=r(n,["ids"]);return o!=null&&s(e,["ids"],o),e}function yr(n){const e={},o=r(n,["modality"]);o!=null&&s(e,["modality"],o);const l=r(n,["tokenCount"]);return l!=null&&s(e,["tokenCount"],l),e}function g2(n){const e={},o=r(n,["promptTokenCount"]);o!=null&&s(e,["promptTokenCount"],o);const l=r(n,["cachedContentTokenCount"]);l!=null&&s(e,["cachedContentTokenCount"],l);const u=r(n,["responseTokenCount"]);u!=null&&s(e,["responseTokenCount"],u);const f=r(n,["toolUsePromptTokenCount"]);f!=null&&s(e,["toolUsePromptTokenCount"],f);const d=r(n,["thoughtsTokenCount"]);d!=null&&s(e,["thoughtsTokenCount"],d);const h=r(n,["totalTokenCount"]);h!=null&&s(e,["totalTokenCount"],h);const g=r(n,["promptTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(T=>yr(T))),s(e,["promptTokensDetails"],S)}const p=r(n,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(T=>yr(T))),s(e,["cacheTokensDetails"],S)}const v=r(n,["responseTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(T=>yr(T))),s(e,["responseTokensDetails"],S)}const C=r(n,["toolUsePromptTokensDetails"]);if(C!=null){let S=C;Array.isArray(S)&&(S=S.map(T=>yr(T))),s(e,["toolUsePromptTokensDetails"],S)}return e}function y2(n){const e={},o=r(n,["timeLeft"]);return o!=null&&s(e,["timeLeft"],o),e}function v2(n){const e={},o=r(n,["newHandle"]);o!=null&&s(e,["newHandle"],o);const l=r(n,["resumable"]);l!=null&&s(e,["resumable"],l);const u=r(n,["lastConsumedClientMessageIndex"]);return u!=null&&s(e,["lastConsumedClientMessageIndex"],u),e}function x2(n){const e={};r(n,["setupComplete"])!=null&&s(e,["setupComplete"],o2());const l=r(n,["serverContent"]);l!=null&&s(e,["serverContent"],d2(l));const u=r(n,["toolCall"]);u!=null&&s(e,["toolCall"],h2(u));const f=r(n,["toolCallCancellation"]);f!=null&&s(e,["toolCallCancellation"],p2(f));const d=r(n,["usageMetadata"]);d!=null&&s(e,["usageMetadata"],g2(d));const h=r(n,["goAway"]);h!=null&&s(e,["goAway"],y2(h));const g=r(n,["sessionResumptionUpdate"]);return g!=null&&s(e,["sessionResumptionUpdate"],v2(g)),e}function C2(){return{}}function S2(n){const e={},o=r(n,["text"]);o!=null&&s(e,["text"],o);const l=r(n,["weight"]);return l!=null&&s(e,["weight"],l),e}function T2(n){const e={},o=r(n,["weightedPrompts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>S2(u))),s(e,["weightedPrompts"],l)}return e}function _2(n){const e={},o=r(n,["temperature"]);o!=null&&s(e,["temperature"],o);const l=r(n,["topK"]);l!=null&&s(e,["topK"],l);const u=r(n,["seed"]);u!=null&&s(e,["seed"],u);const f=r(n,["guidance"]);f!=null&&s(e,["guidance"],f);const d=r(n,["bpm"]);d!=null&&s(e,["bpm"],d);const h=r(n,["density"]);h!=null&&s(e,["density"],h);const g=r(n,["brightness"]);g!=null&&s(e,["brightness"],g);const p=r(n,["scale"]);p!=null&&s(e,["scale"],p);const v=r(n,["muteBass"]);v!=null&&s(e,["muteBass"],v);const C=r(n,["muteDrums"]);C!=null&&s(e,["muteDrums"],C);const S=r(n,["onlyBassAndDrums"]);S!=null&&s(e,["onlyBassAndDrums"],S);const T=r(n,["musicGenerationMode"]);return T!=null&&s(e,["musicGenerationMode"],T),e}function w2(n){const e={},o=r(n,["clientContent"]);o!=null&&s(e,["clientContent"],T2(o));const l=r(n,["musicGenerationConfig"]);return l!=null&&s(e,["musicGenerationConfig"],_2(l)),e}function b2(n){const e={},o=r(n,["data"]);o!=null&&s(e,["data"],o);const l=r(n,["mimeType"]);l!=null&&s(e,["mimeType"],l);const u=r(n,["sourceMetadata"]);return u!=null&&s(e,["sourceMetadata"],w2(u)),e}function E2(n){const e={},o=r(n,["audioChunks"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>b2(u))),s(e,["audioChunks"],l)}return e}function A2(n){const e={},o=r(n,["text"]);o!=null&&s(e,["text"],o);const l=r(n,["filteredReason"]);return l!=null&&s(e,["filteredReason"],l),e}function M2(n){const e={};r(n,["setupComplete"])!=null&&s(e,["setupComplete"],C2());const l=r(n,["serverContent"]);l!=null&&s(e,["serverContent"],E2(l));const u=r(n,["filteredPrompt"]);return u!=null&&s(e,["filteredPrompt"],A2(u)),e}function R2(n){const e={},o=r(n,["sessionId"]);return o!=null&&s(e,["sessionId"],o),e}function N2(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function D2(n){const e={},o=r(n,["displayName"]);o!=null&&s(e,["displayName"],o);const l=r(n,["data"]);l!=null&&s(e,["data"],l);const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function k2(n){const e={},o=r(n,["displayName"]);o!=null&&s(e,["displayName"],o);const l=r(n,["fileUri"]);l!=null&&s(e,["fileUri"],l);const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function I2(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],N2(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],D2(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],k2(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function U2(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>I2(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function Jh(n){const e={},o=r(n,["text"]);o!=null&&s(e,["text"],o);const l=r(n,["finished"]);return l!=null&&s(e,["finished"],l),e}function P2(n){const e={},o=r(n,["modelTurn"]);o!=null&&s(e,["modelTurn"],U2(o));const l=r(n,["turnComplete"]);l!=null&&s(e,["turnComplete"],l);const u=r(n,["interrupted"]);u!=null&&s(e,["interrupted"],u);const f=r(n,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const d=r(n,["generationComplete"]);d!=null&&s(e,["generationComplete"],d);const h=r(n,["inputTranscription"]);h!=null&&s(e,["inputTranscription"],Jh(h));const g=r(n,["outputTranscription"]);return g!=null&&s(e,["outputTranscription"],Jh(g)),e}function L2(n){const e={},o=r(n,["args"]);o!=null&&s(e,["args"],o);const l=r(n,["name"]);return l!=null&&s(e,["name"],l),e}function z2(n){const e={},o=r(n,["functionCalls"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>L2(u))),s(e,["functionCalls"],l)}return e}function B2(n){const e={},o=r(n,["ids"]);return o!=null&&s(e,["ids"],o),e}function vr(n){const e={},o=r(n,["modality"]);o!=null&&s(e,["modality"],o);const l=r(n,["tokenCount"]);return l!=null&&s(e,["tokenCount"],l),e}function G2(n){const e={},o=r(n,["promptTokenCount"]);o!=null&&s(e,["promptTokenCount"],o);const l=r(n,["cachedContentTokenCount"]);l!=null&&s(e,["cachedContentTokenCount"],l);const u=r(n,["candidatesTokenCount"]);u!=null&&s(e,["responseTokenCount"],u);const f=r(n,["toolUsePromptTokenCount"]);f!=null&&s(e,["toolUsePromptTokenCount"],f);const d=r(n,["thoughtsTokenCount"]);d!=null&&s(e,["thoughtsTokenCount"],d);const h=r(n,["totalTokenCount"]);h!=null&&s(e,["totalTokenCount"],h);const g=r(n,["promptTokensDetails"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(w=>vr(w))),s(e,["promptTokensDetails"],T)}const p=r(n,["cacheTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(w=>vr(w))),s(e,["cacheTokensDetails"],T)}const v=r(n,["candidatesTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(w=>vr(w))),s(e,["responseTokensDetails"],T)}const C=r(n,["toolUsePromptTokensDetails"]);if(C!=null){let T=C;Array.isArray(T)&&(T=T.map(w=>vr(w))),s(e,["toolUsePromptTokensDetails"],T)}const S=r(n,["trafficType"]);return S!=null&&s(e,["trafficType"],S),e}function V2(n){const e={},o=r(n,["timeLeft"]);return o!=null&&s(e,["timeLeft"],o),e}function H2(n){const e={},o=r(n,["newHandle"]);o!=null&&s(e,["newHandle"],o);const l=r(n,["resumable"]);l!=null&&s(e,["resumable"],l);const u=r(n,["lastConsumedClientMessageIndex"]);return u!=null&&s(e,["lastConsumedClientMessageIndex"],u),e}function q2(n){const e={},o=r(n,["setupComplete"]);o!=null&&s(e,["setupComplete"],R2(o));const l=r(n,["serverContent"]);l!=null&&s(e,["serverContent"],P2(l));const u=r(n,["toolCall"]);u!=null&&s(e,["toolCall"],z2(u));const f=r(n,["toolCallCancellation"]);f!=null&&s(e,["toolCallCancellation"],B2(f));const d=r(n,["usageMetadata"]);d!=null&&s(e,["usageMetadata"],G2(d));const h=r(n,["goAway"]);h!=null&&s(e,["goAway"],V2(h));const g=r(n,["sessionResumptionUpdate"]);return g!=null&&s(e,["sessionResumptionUpdate"],H2(g)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F2(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function O2(n){const e={};if(r(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(n,["data"]);o!=null&&s(e,["data"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function Y2(n){const e={};if(r(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function J2(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],F2(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],O2(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],Y2(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function Mr(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>J2(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function X2(n){const e={},o=r(n,["anyOf"]);o!=null&&s(e,["anyOf"],o);const l=r(n,["default"]);l!=null&&s(e,["default"],l);const u=r(n,["description"]);u!=null&&s(e,["description"],u);const f=r(n,["enum"]);f!=null&&s(e,["enum"],f);const d=r(n,["example"]);d!=null&&s(e,["example"],d);const h=r(n,["format"]);h!=null&&s(e,["format"],h);const g=r(n,["items"]);g!=null&&s(e,["items"],g);const p=r(n,["maxItems"]);p!=null&&s(e,["maxItems"],p);const v=r(n,["maxLength"]);v!=null&&s(e,["maxLength"],v);const C=r(n,["maxProperties"]);C!=null&&s(e,["maxProperties"],C);const S=r(n,["maximum"]);S!=null&&s(e,["maximum"],S);const T=r(n,["minItems"]);T!=null&&s(e,["minItems"],T);const w=r(n,["minLength"]);w!=null&&s(e,["minLength"],w);const _=r(n,["minProperties"]);_!=null&&s(e,["minProperties"],_);const N=r(n,["minimum"]);N!=null&&s(e,["minimum"],N);const R=r(n,["nullable"]);R!=null&&s(e,["nullable"],R);const k=r(n,["pattern"]);k!=null&&s(e,["pattern"],k);const I=r(n,["properties"]);I!=null&&s(e,["properties"],I);const H=r(n,["propertyOrdering"]);H!=null&&s(e,["propertyOrdering"],H);const A=r(n,["required"]);A!=null&&s(e,["required"],A);const U=r(n,["title"]);U!=null&&s(e,["title"],U);const P=r(n,["type"]);return P!=null&&s(e,["type"],P),e}function K2(n){const e={};if(r(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=r(n,["category"]);o!=null&&s(e,["category"],o);const l=r(n,["threshold"]);return l!=null&&s(e,["threshold"],l),e}function Z2(n){const e={},o=r(n,["behavior"]);o!=null&&s(e,["behavior"],o);const l=r(n,["description"]);l!=null&&s(e,["description"],l);const u=r(n,["name"]);u!=null&&s(e,["name"],u);const f=r(n,["parameters"]);f!=null&&s(e,["parameters"],f);const d=r(n,["parametersJsonSchema"]);d!=null&&s(e,["parametersJsonSchema"],d);const h=r(n,["response"]);h!=null&&s(e,["response"],h);const g=r(n,["responseJsonSchema"]);return g!=null&&s(e,["responseJsonSchema"],g),e}function $2(n){const e={},o=r(n,["startTime"]);o!=null&&s(e,["startTime"],o);const l=r(n,["endTime"]);return l!=null&&s(e,["endTime"],l),e}function Q2(n){const e={},o=r(n,["timeRangeFilter"]);if(o!=null&&s(e,["timeRangeFilter"],$2(o)),r(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function j2(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["dynamicThreshold"]);return l!=null&&s(e,["dynamicThreshold"],l),e}function W2(n){const e={},o=r(n,["dynamicRetrievalConfig"]);return o!=null&&s(e,["dynamicRetrievalConfig"],j2(o)),e}function eC(){return{}}function tC(n){const e={},o=r(n,["environment"]);return o!=null&&s(e,["environment"],o),e}function nC(n){const e={},o=r(n,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>Z2(p))),s(e,["functionDeclarations"],g)}if(r(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=r(n,["googleSearch"]);l!=null&&s(e,["googleSearch"],Q2(l));const u=r(n,["googleSearchRetrieval"]);if(u!=null&&s(e,["googleSearchRetrieval"],W2(u)),r(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(n,["urlContext"])!=null&&s(e,["urlContext"],eC());const d=r(n,["computerUse"]);d!=null&&s(e,["computerUse"],tC(d));const h=r(n,["codeExecution"]);return h!=null&&s(e,["codeExecution"],h),e}function iC(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["allowedFunctionNames"]);return l!=null&&s(e,["allowedFunctionNames"],l),e}function oC(n){const e={},o=r(n,["latitude"]);o!=null&&s(e,["latitude"],o);const l=r(n,["longitude"]);return l!=null&&s(e,["longitude"],l),e}function lC(n){const e={},o=r(n,["latLng"]);o!=null&&s(e,["latLng"],oC(o));const l=r(n,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function aC(n){const e={},o=r(n,["functionCallingConfig"]);o!=null&&s(e,["functionCallingConfig"],iC(o));const l=r(n,["retrievalConfig"]);return l!=null&&s(e,["retrievalConfig"],lC(l)),e}function rC(n){const e={},o=r(n,["voiceName"]);return o!=null&&s(e,["voiceName"],o),e}function Np(n){const e={},o=r(n,["prebuiltVoiceConfig"]);return o!=null&&s(e,["prebuiltVoiceConfig"],rC(o)),e}function sC(n){const e={},o=r(n,["speaker"]);o!=null&&s(e,["speaker"],o);const l=r(n,["voiceConfig"]);return l!=null&&s(e,["voiceConfig"],Np(l)),e}function uC(n){const e={},o=r(n,["speakerVoiceConfigs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>sC(u))),s(e,["speakerVoiceConfigs"],l)}return e}function cC(n){const e={},o=r(n,["voiceConfig"]);o!=null&&s(e,["voiceConfig"],Np(o));const l=r(n,["multiSpeakerVoiceConfig"]);l!=null&&s(e,["multiSpeakerVoiceConfig"],uC(l));const u=r(n,["languageCode"]);return u!=null&&s(e,["languageCode"],u),e}function fC(n){const e={},o=r(n,["includeThoughts"]);o!=null&&s(e,["includeThoughts"],o);const l=r(n,["thinkingBudget"]);return l!=null&&s(e,["thinkingBudget"],l),e}function dC(n,e,o){const l={},u=r(e,["systemInstruction"]);o!==void 0&&u!=null&&s(o,["systemInstruction"],Mr(Yt(u)));const f=r(e,["temperature"]);f!=null&&s(l,["temperature"],f);const d=r(e,["topP"]);d!=null&&s(l,["topP"],d);const h=r(e,["topK"]);h!=null&&s(l,["topK"],h);const g=r(e,["candidateCount"]);g!=null&&s(l,["candidateCount"],g);const p=r(e,["maxOutputTokens"]);p!=null&&s(l,["maxOutputTokens"],p);const v=r(e,["stopSequences"]);v!=null&&s(l,["stopSequences"],v);const C=r(e,["responseLogprobs"]);C!=null&&s(l,["responseLogprobs"],C);const S=r(e,["logprobs"]);S!=null&&s(l,["logprobs"],S);const T=r(e,["presencePenalty"]);T!=null&&s(l,["presencePenalty"],T);const w=r(e,["frequencyPenalty"]);w!=null&&s(l,["frequencyPenalty"],w);const _=r(e,["seed"]);_!=null&&s(l,["seed"],_);const N=r(e,["responseMimeType"]);N!=null&&s(l,["responseMimeType"],N);const R=r(e,["responseSchema"]);R!=null&&s(l,["responseSchema"],X2(Wu(R)));const k=r(e,["responseJsonSchema"]);if(k!=null&&s(l,["responseJsonSchema"],k),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=r(e,["safetySettings"]);if(o!==void 0&&I!=null){let le=I;Array.isArray(le)&&(le=le.map(z=>K2(z))),s(o,["safetySettings"],le)}const H=r(e,["tools"]);if(o!==void 0&&H!=null){let le=Ho(H);Array.isArray(le)&&(le=le.map(z=>nC(Vo(z)))),s(o,["tools"],le)}const A=r(e,["toolConfig"]);if(o!==void 0&&A!=null&&s(o,["toolConfig"],aC(A)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=r(e,["cachedContent"]);o!==void 0&&U!=null&&s(o,["cachedContent"],jn(n,U));const P=r(e,["responseModalities"]);P!=null&&s(l,["responseModalities"],P);const Y=r(e,["mediaResolution"]);Y!=null&&s(l,["mediaResolution"],Y);const B=r(e,["speechConfig"]);if(B!=null&&s(l,["speechConfig"],cC(ec(B))),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=r(e,["thinkingConfig"]);return q!=null&&s(l,["thinkingConfig"],fC(q)),l}function Xh(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["contents"]);if(u!=null){let d=Tn(u);Array.isArray(d)&&(d=d.map(h=>Mr(h))),s(o,["contents"],d)}const f=r(e,["config"]);return f!=null&&s(o,["generationConfig"],dC(n,f,o)),o}function mC(n,e){const o={},l=r(n,["taskType"]);e!==void 0&&l!=null&&s(e,["requests[]","taskType"],l);const u=r(n,["title"]);e!==void 0&&u!=null&&s(e,["requests[]","title"],u);const f=r(n,["outputDimensionality"]);if(e!==void 0&&f!=null&&s(e,["requests[]","outputDimensionality"],f),r(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function hC(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["contents"]);u!=null&&s(o,["requests[]","content"],mp(n,u));const f=r(e,["config"]);f!=null&&s(o,["config"],mC(f,o));const d=r(e,["model"]);return d!==void 0&&s(o,["requests[]","model"],nt(n,d)),o}function pC(n,e){const o={};if(r(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const l=r(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const u=r(n,["aspectRatio"]);e!==void 0&&u!=null&&s(e,["parameters","aspectRatio"],u);const f=r(n,["guidanceScale"]);if(e!==void 0&&f!=null&&s(e,["parameters","guidanceScale"],f),r(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=r(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);const h=r(n,["personGeneration"]);e!==void 0&&h!=null&&s(e,["parameters","personGeneration"],h);const g=r(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&s(e,["parameters","includeSafetyAttributes"],g);const p=r(n,["includeRaiReason"]);e!==void 0&&p!=null&&s(e,["parameters","includeRaiReason"],p);const v=r(n,["language"]);e!==void 0&&v!=null&&s(e,["parameters","language"],v);const C=r(n,["outputMimeType"]);e!==void 0&&C!=null&&s(e,["parameters","outputOptions","mimeType"],C);const S=r(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&s(e,["parameters","outputOptions","compressionQuality"],S),r(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const T=r(n,["imageSize"]);if(e!==void 0&&T!=null&&s(e,["parameters","sampleImageSize"],T),r(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function gC(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["prompt"]);u!=null&&s(o,["instances[0]","prompt"],u);const f=r(e,["config"]);return f!=null&&s(o,["config"],pC(f,o)),o}function yC(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","name"],nt(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function vC(n,e,o){const l={},u=r(e,["pageSize"]);o!==void 0&&u!=null&&s(o,["_query","pageSize"],u);const f=r(e,["pageToken"]);o!==void 0&&f!=null&&s(o,["_query","pageToken"],f);const d=r(e,["filter"]);o!==void 0&&d!=null&&s(o,["_query","filter"],d);const h=r(e,["queryBase"]);return o!==void 0&&h!=null&&s(o,["_url","models_url"],gp(n,h)),l}function xC(n,e){const o={},l=r(e,["config"]);return l!=null&&s(o,["config"],vC(n,l,o)),o}function CC(n,e){const o={},l=r(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const u=r(n,["description"]);e!==void 0&&u!=null&&s(e,["description"],u);const f=r(n,["defaultCheckpointId"]);return e!==void 0&&f!=null&&s(e,["defaultCheckpointId"],f),o}function SC(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","name"],nt(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],CC(u,o)),o}function TC(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","name"],nt(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function _C(n){const e={};if(r(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function wC(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["contents"]);if(u!=null){let d=Tn(u);Array.isArray(d)&&(d=d.map(h=>Mr(h))),s(o,["contents"],d)}const f=r(e,["config"]);return f!=null&&s(o,["config"],_C(f)),o}function Dp(n){const e={};if(r(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=r(n,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],ji(o));const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function bC(n,e){const o={},l=r(n,["prompt"]);e!==void 0&&l!=null&&s(e,["instances[0]","prompt"],l);const u=r(n,["image"]);if(e!==void 0&&u!=null&&s(e,["instances[0]","image"],Dp(u)),r(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return o}function EC(n,e){const o={},l=r(n,["numberOfVideos"]);if(e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l),r(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=r(n,["durationSeconds"]);if(e!==void 0&&u!=null&&s(e,["parameters","durationSeconds"],u),r(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=r(n,["aspectRatio"]);e!==void 0&&f!=null&&s(e,["parameters","aspectRatio"],f);const d=r(n,["resolution"]);e!==void 0&&d!=null&&s(e,["parameters","resolution"],d);const h=r(n,["personGeneration"]);if(e!==void 0&&h!=null&&s(e,["parameters","personGeneration"],h),r(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=r(n,["negativePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","negativePrompt"],g);const p=r(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&s(e,["parameters","enhancePrompt"],p),r(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(r(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(r(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(r(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function AC(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["prompt"]);u!=null&&s(o,["instances[0]","prompt"],u);const f=r(e,["image"]);if(f!=null&&s(o,["instances[0]","image"],Dp(f)),r(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const d=r(e,["source"]);d!=null&&s(o,["config"],bC(d,o));const h=r(e,["config"]);return h!=null&&s(o,["config"],EC(h,o)),o}function MC(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function RC(n){const e={},o=r(n,["displayName"]);o!=null&&s(e,["displayName"],o);const l=r(n,["data"]);l!=null&&s(e,["data"],l);const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function NC(n){const e={},o=r(n,["displayName"]);o!=null&&s(e,["displayName"],o);const l=r(n,["fileUri"]);l!=null&&s(e,["fileUri"],l);const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function DC(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],MC(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],RC(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],NC(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function Fo(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>DC(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function kC(n){const e={},o=r(n,["anyOf"]);o!=null&&s(e,["anyOf"],o);const l=r(n,["default"]);l!=null&&s(e,["default"],l);const u=r(n,["description"]);u!=null&&s(e,["description"],u);const f=r(n,["enum"]);f!=null&&s(e,["enum"],f);const d=r(n,["example"]);d!=null&&s(e,["example"],d);const h=r(n,["format"]);h!=null&&s(e,["format"],h);const g=r(n,["items"]);g!=null&&s(e,["items"],g);const p=r(n,["maxItems"]);p!=null&&s(e,["maxItems"],p);const v=r(n,["maxLength"]);v!=null&&s(e,["maxLength"],v);const C=r(n,["maxProperties"]);C!=null&&s(e,["maxProperties"],C);const S=r(n,["maximum"]);S!=null&&s(e,["maximum"],S);const T=r(n,["minItems"]);T!=null&&s(e,["minItems"],T);const w=r(n,["minLength"]);w!=null&&s(e,["minLength"],w);const _=r(n,["minProperties"]);_!=null&&s(e,["minProperties"],_);const N=r(n,["minimum"]);N!=null&&s(e,["minimum"],N);const R=r(n,["nullable"]);R!=null&&s(e,["nullable"],R);const k=r(n,["pattern"]);k!=null&&s(e,["pattern"],k);const I=r(n,["properties"]);I!=null&&s(e,["properties"],I);const H=r(n,["propertyOrdering"]);H!=null&&s(e,["propertyOrdering"],H);const A=r(n,["required"]);A!=null&&s(e,["required"],A);const U=r(n,["title"]);U!=null&&s(e,["title"],U);const P=r(n,["type"]);return P!=null&&s(e,["type"],P),e}function IC(n){const e={},o=r(n,["featureSelectionPreference"]);return o!=null&&s(e,["featureSelectionPreference"],o),e}function UC(n){const e={},o=r(n,["method"]);o!=null&&s(e,["method"],o);const l=r(n,["category"]);l!=null&&s(e,["category"],l);const u=r(n,["threshold"]);return u!=null&&s(e,["threshold"],u),e}function PC(n){const e={};if(r(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=r(n,["description"]);o!=null&&s(e,["description"],o);const l=r(n,["name"]);l!=null&&s(e,["name"],l);const u=r(n,["parameters"]);u!=null&&s(e,["parameters"],u);const f=r(n,["parametersJsonSchema"]);f!=null&&s(e,["parametersJsonSchema"],f);const d=r(n,["response"]);d!=null&&s(e,["response"],d);const h=r(n,["responseJsonSchema"]);return h!=null&&s(e,["responseJsonSchema"],h),e}function LC(n){const e={},o=r(n,["startTime"]);o!=null&&s(e,["startTime"],o);const l=r(n,["endTime"]);return l!=null&&s(e,["endTime"],l),e}function zC(n){const e={},o=r(n,["timeRangeFilter"]);o!=null&&s(e,["timeRangeFilter"],LC(o));const l=r(n,["excludeDomains"]);return l!=null&&s(e,["excludeDomains"],l),e}function BC(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["dynamicThreshold"]);return l!=null&&s(e,["dynamicThreshold"],l),e}function GC(n){const e={},o=r(n,["dynamicRetrievalConfig"]);return o!=null&&s(e,["dynamicRetrievalConfig"],BC(o)),e}function VC(n){const e={},o=r(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function HC(n){const e={},o=r(n,["apiKeyString"]);return o!=null&&s(e,["apiKeyString"],o),e}function qC(n){const e={},o=r(n,["apiKeyConfig"]);o!=null&&s(e,["apiKeyConfig"],HC(o));const l=r(n,["authType"]);l!=null&&s(e,["authType"],l);const u=r(n,["googleServiceAccountConfig"]);u!=null&&s(e,["googleServiceAccountConfig"],u);const f=r(n,["httpBasicAuthConfig"]);f!=null&&s(e,["httpBasicAuthConfig"],f);const d=r(n,["oauthConfig"]);d!=null&&s(e,["oauthConfig"],d);const h=r(n,["oidcConfig"]);return h!=null&&s(e,["oidcConfig"],h),e}function FC(n){const e={},o=r(n,["authConfig"]);return o!=null&&s(e,["authConfig"],qC(o)),e}function OC(){return{}}function YC(n){const e={},o=r(n,["environment"]);return o!=null&&s(e,["environment"],o),e}function kp(n){const e={},o=r(n,["functionDeclarations"]);if(o!=null){let C=o;Array.isArray(C)&&(C=C.map(S=>PC(S))),s(e,["functionDeclarations"],C)}const l=r(n,["retrieval"]);l!=null&&s(e,["retrieval"],l);const u=r(n,["googleSearch"]);u!=null&&s(e,["googleSearch"],zC(u));const f=r(n,["googleSearchRetrieval"]);f!=null&&s(e,["googleSearchRetrieval"],GC(f));const d=r(n,["enterpriseWebSearch"]);d!=null&&s(e,["enterpriseWebSearch"],VC(d));const h=r(n,["googleMaps"]);h!=null&&s(e,["googleMaps"],FC(h)),r(n,["urlContext"])!=null&&s(e,["urlContext"],OC());const p=r(n,["computerUse"]);p!=null&&s(e,["computerUse"],YC(p));const v=r(n,["codeExecution"]);return v!=null&&s(e,["codeExecution"],v),e}function JC(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["allowedFunctionNames"]);return l!=null&&s(e,["allowedFunctionNames"],l),e}function XC(n){const e={},o=r(n,["latitude"]);o!=null&&s(e,["latitude"],o);const l=r(n,["longitude"]);return l!=null&&s(e,["longitude"],l),e}function KC(n){const e={},o=r(n,["latLng"]);o!=null&&s(e,["latLng"],XC(o));const l=r(n,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function ZC(n){const e={},o=r(n,["functionCallingConfig"]);o!=null&&s(e,["functionCallingConfig"],JC(o));const l=r(n,["retrievalConfig"]);return l!=null&&s(e,["retrievalConfig"],KC(l)),e}function $C(n){const e={},o=r(n,["voiceName"]);return o!=null&&s(e,["voiceName"],o),e}function QC(n){const e={},o=r(n,["prebuiltVoiceConfig"]);return o!=null&&s(e,["prebuiltVoiceConfig"],$C(o)),e}function jC(n){const e={},o=r(n,["voiceConfig"]);if(o!=null&&s(e,["voiceConfig"],QC(o)),r(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const l=r(n,["languageCode"]);return l!=null&&s(e,["languageCode"],l),e}function WC(n){const e={},o=r(n,["includeThoughts"]);o!=null&&s(e,["includeThoughts"],o);const l=r(n,["thinkingBudget"]);return l!=null&&s(e,["thinkingBudget"],l),e}function eS(n,e,o){const l={},u=r(e,["systemInstruction"]);o!==void 0&&u!=null&&s(o,["systemInstruction"],Fo(Yt(u)));const f=r(e,["temperature"]);f!=null&&s(l,["temperature"],f);const d=r(e,["topP"]);d!=null&&s(l,["topP"],d);const h=r(e,["topK"]);h!=null&&s(l,["topK"],h);const g=r(e,["candidateCount"]);g!=null&&s(l,["candidateCount"],g);const p=r(e,["maxOutputTokens"]);p!=null&&s(l,["maxOutputTokens"],p);const v=r(e,["stopSequences"]);v!=null&&s(l,["stopSequences"],v);const C=r(e,["responseLogprobs"]);C!=null&&s(l,["responseLogprobs"],C);const S=r(e,["logprobs"]);S!=null&&s(l,["logprobs"],S);const T=r(e,["presencePenalty"]);T!=null&&s(l,["presencePenalty"],T);const w=r(e,["frequencyPenalty"]);w!=null&&s(l,["frequencyPenalty"],w);const _=r(e,["seed"]);_!=null&&s(l,["seed"],_);const N=r(e,["responseMimeType"]);N!=null&&s(l,["responseMimeType"],N);const R=r(e,["responseSchema"]);R!=null&&s(l,["responseSchema"],kC(Wu(R)));const k=r(e,["responseJsonSchema"]);k!=null&&s(l,["responseJsonSchema"],k);const I=r(e,["routingConfig"]);I!=null&&s(l,["routingConfig"],I);const H=r(e,["modelSelectionConfig"]);H!=null&&s(l,["modelConfig"],IC(H));const A=r(e,["safetySettings"]);if(o!==void 0&&A!=null){let Z=A;Array.isArray(Z)&&(Z=Z.map(O=>UC(O))),s(o,["safetySettings"],Z)}const U=r(e,["tools"]);if(o!==void 0&&U!=null){let Z=Ho(U);Array.isArray(Z)&&(Z=Z.map(O=>kp(Vo(O)))),s(o,["tools"],Z)}const P=r(e,["toolConfig"]);o!==void 0&&P!=null&&s(o,["toolConfig"],ZC(P));const Y=r(e,["labels"]);o!==void 0&&Y!=null&&s(o,["labels"],Y);const B=r(e,["cachedContent"]);o!==void 0&&B!=null&&s(o,["cachedContent"],jn(n,B));const q=r(e,["responseModalities"]);q!=null&&s(l,["responseModalities"],q);const le=r(e,["mediaResolution"]);le!=null&&s(l,["mediaResolution"],le);const z=r(e,["speechConfig"]);z!=null&&s(l,["speechConfig"],jC(ec(z)));const W=r(e,["audioTimestamp"]);W!=null&&s(l,["audioTimestamp"],W);const M=r(e,["thinkingConfig"]);return M!=null&&s(l,["thinkingConfig"],WC(M)),l}function Kh(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["contents"]);if(u!=null){let d=Tn(u);Array.isArray(d)&&(d=d.map(h=>Fo(h))),s(o,["contents"],d)}const f=r(e,["config"]);return f!=null&&s(o,["generationConfig"],eS(n,f,o)),o}function tS(n,e){const o={},l=r(n,["taskType"]);e!==void 0&&l!=null&&s(e,["instances[]","task_type"],l);const u=r(n,["title"]);e!==void 0&&u!=null&&s(e,["instances[]","title"],u);const f=r(n,["outputDimensionality"]);e!==void 0&&f!=null&&s(e,["parameters","outputDimensionality"],f);const d=r(n,["mimeType"]);e!==void 0&&d!=null&&s(e,["instances[]","mimeType"],d);const h=r(n,["autoTruncate"]);return e!==void 0&&h!=null&&s(e,["parameters","autoTruncate"],h),o}function nS(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["contents"]);u!=null&&s(o,["instances[]","content"],mp(n,u));const f=r(e,["config"]);return f!=null&&s(o,["config"],tS(f,o)),o}function iS(n,e){const o={},l=r(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const u=r(n,["negativePrompt"]);e!==void 0&&u!=null&&s(e,["parameters","negativePrompt"],u);const f=r(n,["numberOfImages"]);e!==void 0&&f!=null&&s(e,["parameters","sampleCount"],f);const d=r(n,["aspectRatio"]);e!==void 0&&d!=null&&s(e,["parameters","aspectRatio"],d);const h=r(n,["guidanceScale"]);e!==void 0&&h!=null&&s(e,["parameters","guidanceScale"],h);const g=r(n,["seed"]);e!==void 0&&g!=null&&s(e,["parameters","seed"],g);const p=r(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&s(e,["parameters","safetySetting"],p);const v=r(n,["personGeneration"]);e!==void 0&&v!=null&&s(e,["parameters","personGeneration"],v);const C=r(n,["includeSafetyAttributes"]);e!==void 0&&C!=null&&s(e,["parameters","includeSafetyAttributes"],C);const S=r(n,["includeRaiReason"]);e!==void 0&&S!=null&&s(e,["parameters","includeRaiReason"],S);const T=r(n,["language"]);e!==void 0&&T!=null&&s(e,["parameters","language"],T);const w=r(n,["outputMimeType"]);e!==void 0&&w!=null&&s(e,["parameters","outputOptions","mimeType"],w);const _=r(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&s(e,["parameters","outputOptions","compressionQuality"],_);const N=r(n,["addWatermark"]);e!==void 0&&N!=null&&s(e,["parameters","addWatermark"],N);const R=r(n,["imageSize"]);e!==void 0&&R!=null&&s(e,["parameters","sampleImageSize"],R);const k=r(n,["enhancePrompt"]);return e!==void 0&&k!=null&&s(e,["parameters","enhancePrompt"],k),o}function oS(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["prompt"]);u!=null&&s(o,["instances[0]","prompt"],u);const f=r(e,["config"]);return f!=null&&s(o,["config"],iS(f,o)),o}function zn(n){const e={},o=r(n,["gcsUri"]);o!=null&&s(e,["gcsUri"],o);const l=r(n,["imageBytes"]);l!=null&&s(e,["bytesBase64Encoded"],ji(l));const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function lS(n){const e={},o=r(n,["maskMode"]);o!=null&&s(e,["maskMode"],o);const l=r(n,["segmentationClasses"]);l!=null&&s(e,["maskClasses"],l);const u=r(n,["maskDilation"]);return u!=null&&s(e,["dilation"],u),e}function aS(n){const e={},o=r(n,["controlType"]);o!=null&&s(e,["controlType"],o);const l=r(n,["enableControlImageComputation"]);return l!=null&&s(e,["computeControl"],l),e}function rS(n){const e={},o=r(n,["styleDescription"]);return o!=null&&s(e,["styleDescription"],o),e}function sS(n){const e={},o=r(n,["subjectType"]);o!=null&&s(e,["subjectType"],o);const l=r(n,["subjectDescription"]);return l!=null&&s(e,["subjectDescription"],l),e}function uS(n){const e={},o=r(n,["referenceImage"]);o!=null&&s(e,["referenceImage"],zn(o));const l=r(n,["referenceId"]);l!=null&&s(e,["referenceId"],l);const u=r(n,["referenceType"]);u!=null&&s(e,["referenceType"],u);const f=r(n,["maskImageConfig"]);f!=null&&s(e,["maskImageConfig"],lS(f));const d=r(n,["controlImageConfig"]);d!=null&&s(e,["controlImageConfig"],aS(d));const h=r(n,["styleImageConfig"]);h!=null&&s(e,["styleImageConfig"],rS(h));const g=r(n,["subjectImageConfig"]);return g!=null&&s(e,["subjectImageConfig"],sS(g)),e}function cS(n,e){const o={},l=r(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const u=r(n,["negativePrompt"]);e!==void 0&&u!=null&&s(e,["parameters","negativePrompt"],u);const f=r(n,["numberOfImages"]);e!==void 0&&f!=null&&s(e,["parameters","sampleCount"],f);const d=r(n,["aspectRatio"]);e!==void 0&&d!=null&&s(e,["parameters","aspectRatio"],d);const h=r(n,["guidanceScale"]);e!==void 0&&h!=null&&s(e,["parameters","guidanceScale"],h);const g=r(n,["seed"]);e!==void 0&&g!=null&&s(e,["parameters","seed"],g);const p=r(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&s(e,["parameters","safetySetting"],p);const v=r(n,["personGeneration"]);e!==void 0&&v!=null&&s(e,["parameters","personGeneration"],v);const C=r(n,["includeSafetyAttributes"]);e!==void 0&&C!=null&&s(e,["parameters","includeSafetyAttributes"],C);const S=r(n,["includeRaiReason"]);e!==void 0&&S!=null&&s(e,["parameters","includeRaiReason"],S);const T=r(n,["language"]);e!==void 0&&T!=null&&s(e,["parameters","language"],T);const w=r(n,["outputMimeType"]);e!==void 0&&w!=null&&s(e,["parameters","outputOptions","mimeType"],w);const _=r(n,["outputCompressionQuality"]);e!==void 0&&_!=null&&s(e,["parameters","outputOptions","compressionQuality"],_);const N=r(n,["addWatermark"]);e!==void 0&&N!=null&&s(e,["parameters","addWatermark"],N);const R=r(n,["editMode"]);e!==void 0&&R!=null&&s(e,["parameters","editMode"],R);const k=r(n,["baseSteps"]);return e!==void 0&&k!=null&&s(e,["parameters","editConfig","baseSteps"],k),o}function fS(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["prompt"]);u!=null&&s(o,["instances[0]","prompt"],u);const f=r(e,["referenceImages"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>uS(g))),s(o,["instances[0]","referenceImages"],h)}const d=r(e,["config"]);return d!=null&&s(o,["config"],cS(d,o)),o}function dS(n,e){const o={},l=r(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const u=r(n,["includeRaiReason"]);e!==void 0&&u!=null&&s(e,["parameters","includeRaiReason"],u);const f=r(n,["outputMimeType"]);e!==void 0&&f!=null&&s(e,["parameters","outputOptions","mimeType"],f);const d=r(n,["outputCompressionQuality"]);e!==void 0&&d!=null&&s(e,["parameters","outputOptions","compressionQuality"],d);const h=r(n,["enhanceInputImage"]);e!==void 0&&h!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],h);const g=r(n,["imagePreservationFactor"]);e!==void 0&&g!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const p=r(n,["numberOfImages"]);e!==void 0&&p!=null&&s(e,["parameters","sampleCount"],p);const v=r(n,["mode"]);return e!==void 0&&v!=null&&s(e,["parameters","mode"],v),o}function mS(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["image"]);u!=null&&s(o,["instances[0]","image"],zn(u));const f=r(e,["upscaleFactor"]);f!=null&&s(o,["parameters","upscaleConfig","upscaleFactor"],f);const d=r(e,["config"]);return d!=null&&s(o,["config"],dS(d,o)),o}function hS(n){const e={},o=r(n,["productImage"]);return o!=null&&s(e,["image"],zn(o)),e}function pS(n,e){const o={},l=r(n,["prompt"]);e!==void 0&&l!=null&&s(e,["instances[0]","prompt"],l);const u=r(n,["personImage"]);e!==void 0&&u!=null&&s(e,["instances[0]","personImage","image"],zn(u));const f=r(n,["productImages"]);if(e!==void 0&&f!=null){let d=f;Array.isArray(d)&&(d=d.map(h=>hS(h))),s(e,["instances[0]","productImages"],d)}return o}function gS(n,e){const o={},l=r(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const u=r(n,["baseSteps"]);e!==void 0&&u!=null&&s(e,["parameters","editConfig","baseSteps"],u);const f=r(n,["outputGcsUri"]);e!==void 0&&f!=null&&s(e,["parameters","storageUri"],f);const d=r(n,["seed"]);e!==void 0&&d!=null&&s(e,["parameters","seed"],d);const h=r(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&s(e,["parameters","safetySetting"],h);const g=r(n,["personGeneration"]);e!==void 0&&g!=null&&s(e,["parameters","personGeneration"],g);const p=r(n,["addWatermark"]);e!==void 0&&p!=null&&s(e,["parameters","addWatermark"],p);const v=r(n,["outputMimeType"]);e!==void 0&&v!=null&&s(e,["parameters","outputOptions","mimeType"],v);const C=r(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&s(e,["parameters","outputOptions","compressionQuality"],C);const S=r(n,["enhancePrompt"]);return e!==void 0&&S!=null&&s(e,["parameters","enhancePrompt"],S),o}function yS(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["source"]);u!=null&&s(o,["config"],pS(u,o));const f=r(e,["config"]);return f!=null&&s(o,["config"],gS(f,o)),o}function vS(n){const e={},o=r(n,["image"]);return o!=null&&s(e,["image"],zn(o)),e}function xS(n,e){const o={},l=r(n,["prompt"]);e!==void 0&&l!=null&&s(e,["instances[0]","prompt"],l);const u=r(n,["image"]);e!==void 0&&u!=null&&s(e,["instances[0]","image"],zn(u));const f=r(n,["scribbleImage"]);return e!==void 0&&f!=null&&s(e,["instances[0]","scribble"],vS(f)),o}function CS(n,e){const o={},l=r(n,["mode"]);e!==void 0&&l!=null&&s(e,["parameters","mode"],l);const u=r(n,["maxPredictions"]);e!==void 0&&u!=null&&s(e,["parameters","maxPredictions"],u);const f=r(n,["confidenceThreshold"]);e!==void 0&&f!=null&&s(e,["parameters","confidenceThreshold"],f);const d=r(n,["maskDilation"]);e!==void 0&&d!=null&&s(e,["parameters","maskDilation"],d);const h=r(n,["binaryColorThreshold"]);return e!==void 0&&h!=null&&s(e,["parameters","binaryColorThreshold"],h),o}function SS(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["source"]);u!=null&&s(o,["config"],xS(u,o));const f=r(e,["config"]);return f!=null&&s(o,["config"],CS(f,o)),o}function TS(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","name"],nt(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function _S(n,e,o){const l={},u=r(e,["pageSize"]);o!==void 0&&u!=null&&s(o,["_query","pageSize"],u);const f=r(e,["pageToken"]);o!==void 0&&f!=null&&s(o,["_query","pageToken"],f);const d=r(e,["filter"]);o!==void 0&&d!=null&&s(o,["_query","filter"],d);const h=r(e,["queryBase"]);return o!==void 0&&h!=null&&s(o,["_url","models_url"],gp(n,h)),l}function wS(n,e){const o={},l=r(e,["config"]);return l!=null&&s(o,["config"],_S(n,l,o)),o}function bS(n,e){const o={},l=r(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const u=r(n,["description"]);e!==void 0&&u!=null&&s(e,["description"],u);const f=r(n,["defaultCheckpointId"]);return e!==void 0&&f!=null&&s(e,["defaultCheckpointId"],f),o}function ES(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],bS(u,o)),o}function AS(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","name"],nt(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],u),o}function MS(n,e){const o={},l=r(n,["systemInstruction"]);e!==void 0&&l!=null&&s(e,["systemInstruction"],Fo(Yt(l)));const u=r(n,["tools"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(h=>kp(h))),s(e,["tools"],d)}const f=r(n,["generationConfig"]);return e!==void 0&&f!=null&&s(e,["generationConfig"],f),o}function RS(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["contents"]);if(u!=null){let d=Tn(u);Array.isArray(d)&&(d=d.map(h=>Fo(h))),s(o,["contents"],d)}const f=r(e,["config"]);return f!=null&&s(o,["config"],MS(f,o)),o}function NS(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["contents"]);if(u!=null){let d=Tn(u);Array.isArray(d)&&(d=d.map(h=>Fo(h))),s(o,["contents"],d)}const f=r(e,["config"]);return f!=null&&s(o,["config"],f),o}function Ip(n){const e={},o=r(n,["uri"]);o!=null&&s(e,["gcsUri"],o);const l=r(n,["videoBytes"]);l!=null&&s(e,["bytesBase64Encoded"],ji(l));const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function DS(n,e){const o={},l=r(n,["prompt"]);e!==void 0&&l!=null&&s(e,["instances[0]","prompt"],l);const u=r(n,["image"]);e!==void 0&&u!=null&&s(e,["instances[0]","image"],zn(u));const f=r(n,["video"]);return e!==void 0&&f!=null&&s(e,["instances[0]","video"],Ip(f)),o}function kS(n){const e={},o=r(n,["image"]);o!=null&&s(e,["image"],zn(o));const l=r(n,["referenceType"]);return l!=null&&s(e,["referenceType"],l),e}function IS(n,e){const o={},l=r(n,["numberOfVideos"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const u=r(n,["outputGcsUri"]);e!==void 0&&u!=null&&s(e,["parameters","storageUri"],u);const f=r(n,["fps"]);e!==void 0&&f!=null&&s(e,["parameters","fps"],f);const d=r(n,["durationSeconds"]);e!==void 0&&d!=null&&s(e,["parameters","durationSeconds"],d);const h=r(n,["seed"]);e!==void 0&&h!=null&&s(e,["parameters","seed"],h);const g=r(n,["aspectRatio"]);e!==void 0&&g!=null&&s(e,["parameters","aspectRatio"],g);const p=r(n,["resolution"]);e!==void 0&&p!=null&&s(e,["parameters","resolution"],p);const v=r(n,["personGeneration"]);e!==void 0&&v!=null&&s(e,["parameters","personGeneration"],v);const C=r(n,["pubsubTopic"]);e!==void 0&&C!=null&&s(e,["parameters","pubsubTopic"],C);const S=r(n,["negativePrompt"]);e!==void 0&&S!=null&&s(e,["parameters","negativePrompt"],S);const T=r(n,["enhancePrompt"]);e!==void 0&&T!=null&&s(e,["parameters","enhancePrompt"],T);const w=r(n,["generateAudio"]);e!==void 0&&w!=null&&s(e,["parameters","generateAudio"],w);const _=r(n,["lastFrame"]);e!==void 0&&_!=null&&s(e,["instances[0]","lastFrame"],zn(_));const N=r(n,["referenceImages"]);if(e!==void 0&&N!=null){let k=N;Array.isArray(k)&&(k=k.map(I=>kS(I))),s(e,["instances[0]","referenceImages"],k)}const R=r(n,["compressionQuality"]);return e!==void 0&&R!=null&&s(e,["parameters","compressionQuality"],R),o}function US(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["_url","model"],nt(n,l));const u=r(e,["prompt"]);u!=null&&s(o,["instances[0]","prompt"],u);const f=r(e,["image"]);f!=null&&s(o,["instances[0]","image"],zn(f));const d=r(e,["video"]);d!=null&&s(o,["instances[0]","video"],Ip(d));const h=r(e,["source"]);h!=null&&s(o,["config"],DS(h,o));const g=r(e,["config"]);return g!=null&&s(o,["config"],IS(g,o)),o}function PS(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function LS(n){const e={},o=r(n,["data"]);o!=null&&s(e,["data"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function zS(n){const e={},o=r(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function BS(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],PS(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],LS(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],zS(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function GS(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>BS(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function VS(n){const e={},o=r(n,["citationSources"]);return o!=null&&s(e,["citations"],o),e}function HS(n){const e={},o=r(n,["retrievedUrl"]);o!=null&&s(e,["retrievedUrl"],o);const l=r(n,["urlRetrievalStatus"]);return l!=null&&s(e,["urlRetrievalStatus"],l),e}function qS(n){const e={},o=r(n,["urlMetadata"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>HS(u))),s(e,["urlMetadata"],l)}return e}function FS(n){const e={},o=r(n,["content"]);o!=null&&s(e,["content"],GS(o));const l=r(n,["citationMetadata"]);l!=null&&s(e,["citationMetadata"],VS(l));const u=r(n,["tokenCount"]);u!=null&&s(e,["tokenCount"],u);const f=r(n,["finishReason"]);f!=null&&s(e,["finishReason"],f);const d=r(n,["urlContextMetadata"]);d!=null&&s(e,["urlContextMetadata"],qS(d));const h=r(n,["avgLogprobs"]);h!=null&&s(e,["avgLogprobs"],h);const g=r(n,["groundingMetadata"]);g!=null&&s(e,["groundingMetadata"],g);const p=r(n,["index"]);p!=null&&s(e,["index"],p);const v=r(n,["logprobsResult"]);v!=null&&s(e,["logprobsResult"],v);const C=r(n,["safetyRatings"]);return C!=null&&s(e,["safetyRatings"],C),e}function Zh(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["candidates"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(p=>FS(p))),s(e,["candidates"],g)}const u=r(n,["modelVersion"]);u!=null&&s(e,["modelVersion"],u);const f=r(n,["promptFeedback"]);f!=null&&s(e,["promptFeedback"],f);const d=r(n,["responseId"]);d!=null&&s(e,["responseId"],d);const h=r(n,["usageMetadata"]);return h!=null&&s(e,["usageMetadata"],h),e}function OS(n){const e={},o=r(n,["values"]);return o!=null&&s(e,["values"],o),e}function YS(){return{}}function JS(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["embeddings"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>OS(d))),s(e,["embeddings"],f)}return r(n,["metadata"])!=null&&s(e,["metadata"],YS()),e}function XS(n){const e={},o=r(n,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],ji(o));const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function Up(n){const e={},o=r(n,["safetyAttributes","categories"]);o!=null&&s(e,["categories"],o);const l=r(n,["safetyAttributes","scores"]);l!=null&&s(e,["scores"],l);const u=r(n,["contentType"]);return u!=null&&s(e,["contentType"],u),e}function KS(n){const e={},o=r(n,["_self"]);o!=null&&s(e,["image"],XS(o));const l=r(n,["raiFilteredReason"]);l!=null&&s(e,["raiFilteredReason"],l);const u=r(n,["_self"]);return u!=null&&s(e,["safetyAttributes"],Up(u)),e}function ZS(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["predictions"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>KS(d))),s(e,["generatedImages"],f)}const u=r(n,["positivePromptSafetyAttributes"]);return u!=null&&s(e,["positivePromptSafetyAttributes"],Up(u)),e}function $S(n){const e={},o=r(n,["baseModel"]);o!=null&&s(e,["baseModel"],o);const l=r(n,["createTime"]);l!=null&&s(e,["createTime"],l);const u=r(n,["updateTime"]);return u!=null&&s(e,["updateTime"],u),e}function Xu(n){const e={},o=r(n,["name"]);o!=null&&s(e,["name"],o);const l=r(n,["displayName"]);l!=null&&s(e,["displayName"],l);const u=r(n,["description"]);u!=null&&s(e,["description"],u);const f=r(n,["version"]);f!=null&&s(e,["version"],f);const d=r(n,["_self"]);d!=null&&s(e,["tunedModelInfo"],$S(d));const h=r(n,["inputTokenLimit"]);h!=null&&s(e,["inputTokenLimit"],h);const g=r(n,["outputTokenLimit"]);g!=null&&s(e,["outputTokenLimit"],g);const p=r(n,["supportedGenerationMethods"]);return p!=null&&s(e,["supportedActions"],p),e}function QS(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["nextPageToken"]);l!=null&&s(e,["nextPageToken"],l);const u=r(n,["_self"]);if(u!=null){let f=yp(u);Array.isArray(f)&&(f=f.map(d=>Xu(d))),s(e,["models"],f)}return e}function jS(n){const e={},o=r(n,["sdkHttpResponse"]);return o!=null&&s(e,["sdkHttpResponse"],o),e}function WS(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["totalTokens"]);l!=null&&s(e,["totalTokens"],l);const u=r(n,["cachedContentTokenCount"]);return u!=null&&s(e,["cachedContentTokenCount"],u),e}function eT(n){const e={},o=r(n,["video","uri"]);o!=null&&s(e,["uri"],o);const l=r(n,["video","encodedVideo"]);l!=null&&s(e,["videoBytes"],ji(l));const u=r(n,["encoding"]);return u!=null&&s(e,["mimeType"],u),e}function tT(n){const e={},o=r(n,["_self"]);return o!=null&&s(e,["video"],eT(o)),e}function nT(n){const e={},o=r(n,["generatedSamples"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>tT(d))),s(e,["generatedVideos"],f)}const l=r(n,["raiMediaFilteredCount"]);l!=null&&s(e,["raiMediaFilteredCount"],l);const u=r(n,["raiMediaFilteredReasons"]);return u!=null&&s(e,["raiMediaFilteredReasons"],u),e}function iT(n){const e={},o=r(n,["name"]);o!=null&&s(e,["name"],o);const l=r(n,["metadata"]);l!=null&&s(e,["metadata"],l);const u=r(n,["done"]);u!=null&&s(e,["done"],u);const f=r(n,["error"]);f!=null&&s(e,["error"],f);const d=r(n,["response","generateVideoResponse"]);return d!=null&&s(e,["response"],nT(d)),e}function oT(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function lT(n){const e={},o=r(n,["displayName"]);o!=null&&s(e,["displayName"],o);const l=r(n,["data"]);l!=null&&s(e,["data"],l);const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function aT(n){const e={},o=r(n,["displayName"]);o!=null&&s(e,["displayName"],o);const l=r(n,["fileUri"]);l!=null&&s(e,["fileUri"],l);const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function rT(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],oT(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],lT(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],aT(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function sT(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>rT(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function uT(n){const e={},o=r(n,["citations"]);return o!=null&&s(e,["citations"],o),e}function cT(n){const e={},o=r(n,["retrievedUrl"]);o!=null&&s(e,["retrievedUrl"],o);const l=r(n,["urlRetrievalStatus"]);return l!=null&&s(e,["urlRetrievalStatus"],l),e}function fT(n){const e={},o=r(n,["urlMetadata"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>cT(u))),s(e,["urlMetadata"],l)}return e}function dT(n){const e={},o=r(n,["content"]);o!=null&&s(e,["content"],sT(o));const l=r(n,["citationMetadata"]);l!=null&&s(e,["citationMetadata"],uT(l));const u=r(n,["finishMessage"]);u!=null&&s(e,["finishMessage"],u);const f=r(n,["finishReason"]);f!=null&&s(e,["finishReason"],f);const d=r(n,["urlContextMetadata"]);d!=null&&s(e,["urlContextMetadata"],fT(d));const h=r(n,["avgLogprobs"]);h!=null&&s(e,["avgLogprobs"],h);const g=r(n,["groundingMetadata"]);g!=null&&s(e,["groundingMetadata"],g);const p=r(n,["index"]);p!=null&&s(e,["index"],p);const v=r(n,["logprobsResult"]);v!=null&&s(e,["logprobsResult"],v);const C=r(n,["safetyRatings"]);return C!=null&&s(e,["safetyRatings"],C),e}function $h(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["candidates"]);if(l!=null){let p=l;Array.isArray(p)&&(p=p.map(v=>dT(v))),s(e,["candidates"],p)}const u=r(n,["createTime"]);u!=null&&s(e,["createTime"],u);const f=r(n,["modelVersion"]);f!=null&&s(e,["modelVersion"],f);const d=r(n,["promptFeedback"]);d!=null&&s(e,["promptFeedback"],d);const h=r(n,["responseId"]);h!=null&&s(e,["responseId"],h);const g=r(n,["usageMetadata"]);return g!=null&&s(e,["usageMetadata"],g),e}function mT(n){const e={},o=r(n,["truncated"]);o!=null&&s(e,["truncated"],o);const l=r(n,["token_count"]);return l!=null&&s(e,["tokenCount"],l),e}function hT(n){const e={},o=r(n,["values"]);o!=null&&s(e,["values"],o);const l=r(n,["statistics"]);return l!=null&&s(e,["statistics"],mT(l)),e}function pT(n){const e={},o=r(n,["billableCharacterCount"]);return o!=null&&s(e,["billableCharacterCount"],o),e}function gT(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["predictions[]","embeddings"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>hT(d))),s(e,["embeddings"],f)}const u=r(n,["metadata"]);return u!=null&&s(e,["metadata"],pT(u)),e}function Pp(n){const e={},o=r(n,["gcsUri"]);o!=null&&s(e,["gcsUri"],o);const l=r(n,["bytesBase64Encoded"]);l!=null&&s(e,["imageBytes"],ji(l));const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function Lp(n){const e={},o=r(n,["safetyAttributes","categories"]);o!=null&&s(e,["categories"],o);const l=r(n,["safetyAttributes","scores"]);l!=null&&s(e,["scores"],l);const u=r(n,["contentType"]);return u!=null&&s(e,["contentType"],u),e}function Rr(n){const e={},o=r(n,["_self"]);o!=null&&s(e,["image"],Pp(o));const l=r(n,["raiFilteredReason"]);l!=null&&s(e,["raiFilteredReason"],l);const u=r(n,["_self"]);u!=null&&s(e,["safetyAttributes"],Lp(u));const f=r(n,["prompt"]);return f!=null&&s(e,["enhancedPrompt"],f),e}function yT(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["predictions"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>Rr(d))),s(e,["generatedImages"],f)}const u=r(n,["positivePromptSafetyAttributes"]);return u!=null&&s(e,["positivePromptSafetyAttributes"],Lp(u)),e}function vT(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["predictions"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>Rr(f))),s(e,["generatedImages"],u)}return e}function xT(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["predictions"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>Rr(f))),s(e,["generatedImages"],u)}return e}function CT(n){const e={},o=r(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Rr(u))),s(e,["generatedImages"],l)}return e}function ST(n){const e={},o=r(n,["label"]);o!=null&&s(e,["label"],o);const l=r(n,["score"]);return l!=null&&s(e,["score"],l),e}function TT(n){const e={},o=r(n,["_self"]);o!=null&&s(e,["mask"],Pp(o));const l=r(n,["labels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>ST(f))),s(e,["labels"],u)}return e}function _T(n){const e={},o=r(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>TT(u))),s(e,["generatedMasks"],l)}return e}function wT(n){const e={},o=r(n,["endpoint"]);o!=null&&s(e,["name"],o);const l=r(n,["deployedModelId"]);return l!=null&&s(e,["deployedModelId"],l),e}function bT(n){const e={},o=r(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&s(e,["baseModel"],o);const l=r(n,["createTime"]);l!=null&&s(e,["createTime"],l);const u=r(n,["updateTime"]);return u!=null&&s(e,["updateTime"],u),e}function ET(n){const e={},o=r(n,["checkpointId"]);o!=null&&s(e,["checkpointId"],o);const l=r(n,["epoch"]);l!=null&&s(e,["epoch"],l);const u=r(n,["step"]);return u!=null&&s(e,["step"],u),e}function Ku(n){const e={},o=r(n,["name"]);o!=null&&s(e,["name"],o);const l=r(n,["displayName"]);l!=null&&s(e,["displayName"],l);const u=r(n,["description"]);u!=null&&s(e,["description"],u);const f=r(n,["versionId"]);f!=null&&s(e,["version"],f);const d=r(n,["deployedModels"]);if(d!=null){let C=d;Array.isArray(C)&&(C=C.map(S=>wT(S))),s(e,["endpoints"],C)}const h=r(n,["labels"]);h!=null&&s(e,["labels"],h);const g=r(n,["_self"]);g!=null&&s(e,["tunedModelInfo"],bT(g));const p=r(n,["defaultCheckpointId"]);p!=null&&s(e,["defaultCheckpointId"],p);const v=r(n,["checkpoints"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(S=>ET(S))),s(e,["checkpoints"],C)}return e}function AT(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["nextPageToken"]);l!=null&&s(e,["nextPageToken"],l);const u=r(n,["_self"]);if(u!=null){let f=yp(u);Array.isArray(f)&&(f=f.map(d=>Ku(d))),s(e,["models"],f)}return e}function MT(n){const e={},o=r(n,["sdkHttpResponse"]);return o!=null&&s(e,["sdkHttpResponse"],o),e}function RT(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["totalTokens"]);return l!=null&&s(e,["totalTokens"],l),e}function NT(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["tokensInfo"]);return l!=null&&s(e,["tokensInfo"],l),e}function DT(n){const e={},o=r(n,["gcsUri"]);o!=null&&s(e,["uri"],o);const l=r(n,["bytesBase64Encoded"]);l!=null&&s(e,["videoBytes"],ji(l));const u=r(n,["mimeType"]);return u!=null&&s(e,["mimeType"],u),e}function kT(n){const e={},o=r(n,["_self"]);return o!=null&&s(e,["video"],DT(o)),e}function IT(n){const e={},o=r(n,["videos"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>kT(d))),s(e,["generatedVideos"],f)}const l=r(n,["raiMediaFilteredCount"]);l!=null&&s(e,["raiMediaFilteredCount"],l);const u=r(n,["raiMediaFilteredReasons"]);return u!=null&&s(e,["raiMediaFilteredReasons"],u),e}function UT(n){const e={},o=r(n,["name"]);o!=null&&s(e,["name"],o);const l=r(n,["metadata"]);l!=null&&s(e,["metadata"],l);const u=r(n,["done"]);u!=null&&s(e,["done"],u);const f=r(n,["error"]);f!=null&&s(e,["error"],f);const d=r(n,["response"]);return d!=null&&s(e,["response"],IT(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PT="Content-Type",LT="X-Server-Timeout",zT="User-Agent",Zu="x-goog-api-client",BT="1.17.0",GT=`google-genai-sdk/${BT}`,VT="v1beta1",HT="v1beta",Qh=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class qT{constructor(e){var o,l;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const u={};this.clientOptions.vertexai?(u.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:VT,u.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(u.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:HT,u.baseUrl="https://generativelanguage.googleapis.com/"),u.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=u,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(u,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const l=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&l.push(e.apiVersion),l.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,l){const u=[this.getRequestUrlInternal(o)];return l&&u.push(this.getBaseResourcePath()),e!==""&&u.push(e),new URL(`${u.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const l=this.shouldPrependVertexProjectPath(e),u=this.constructUrl(e.path,o,l);if(e.queryParams)for(const[d,h]of Object.entries(e.queryParams))u.searchParams.append(d,String(h));let f={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else f.body=e.body;return f=await this.includeExtraHttpOptionsToRequestInit(f,o,e.abortSignal),this.unaryApiCall(u,f,e.httpMethod)}patchHttpOptions(e,o){const l=JSON.parse(JSON.stringify(e));for(const[u,f]of Object.entries(o))typeof f=="object"?l[u]=Object.assign(Object.assign({},l[u]),f):f!==void 0&&(l[u]=f);return l}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const l=this.shouldPrependVertexProjectPath(e),u=this.constructUrl(e.path,o,l);(!u.searchParams.has("alt")||u.searchParams.get("alt")!=="sse")&&u.searchParams.set("alt","sse");let f={};return f.body=e.body,f=await this.includeExtraHttpOptionsToRequestInit(f,o,e.abortSignal),this.streamApiCall(u,f,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,l){if(o&&o.timeout||l){const u=new AbortController,f=u.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const d=setTimeout(()=>u.abort(),o.timeout);d&&typeof d.unref=="function"&&d.unref()}l&&l.addEventListener("abort",()=>{u.abort()}),e.signal=f}return o&&o.extraBody!==null&&FT(e,o.extraBody),e.headers=await this.getHeadersInternal(o),e}async unaryApiCall(e,o,l){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:l})).then(async u=>(await jh(u),new qu(u))).catch(u=>{throw u instanceof Error?u:new Error(JSON.stringify(u))})}async streamApiCall(e,o,l){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:l})).then(async u=>(await jh(u),this.processStreamResponse(u))).catch(u=>{throw u instanceof Error?u:new Error(JSON.stringify(u))})}processStreamResponse(e){var o;return Bo(this,arguments,function*(){const u=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),f=new TextDecoder("utf-8");if(!u)throw new Error("Response body is empty");try{let d="";for(;;){const{done:h,value:g}=yield mt(u.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=f.decode(g,{stream:!0});try{const C=JSON.parse(p);if("error"in C){const S=JSON.parse(JSON.stringify(C.error)),T=S.status,w=S.code,_=`got status: ${T}. ${JSON.stringify(C)}`;if(w>=400&&w<600)throw new Ar({message:_,status:w})}}catch(C){if(C.name==="ApiError")throw C}d+=p;let v=d.match(Qh);for(;v;){const C=v[1];try{const S=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield mt(new qu(S)),d=d.slice(v[0].length),v=d.match(Qh)}catch(S){throw new Error(`exception parsing stream chunk ${C}. ${S}`)}}}}finally{u.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(l=>{throw new Error(`exception ${l} sending request`)})}getDefaultHeaders(){const e={},o=GT+" "+this.clientOptions.userAgentExtra;return e[zT]=o,e[Zu]=o,e[PT]="application/json",e}async getHeadersInternal(e){const o=new Headers;if(e&&e.headers){for(const[l,u]of Object.entries(e.headers))o.append(l,u);e.timeout&&e.timeout>0&&o.append(LT,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o),o}async uploadFile(e,o){var l;const u={};o!=null&&(u.mimeType=o.mimeType,u.name=o.name,u.displayName=o.displayName),u.name&&!u.name.startsWith("files/")&&(u.name=`files/${u.name}`);const f=this.clientOptions.uploader,d=await f.stat(e);u.sizeBytes=String(d.size);const h=(l=o==null?void 0:o.mimeType)!==null&&l!==void 0?l:d.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");u.mimeType=h;const g=await this.fetchUploadUrl(u,o);return f.upload(e,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o){var l;let u={};o!=null&&o.httpOptions?u=o.httpOptions:u={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const f={file:e},d=await this.request({path:Ie("upload/v1beta/files",f._url),body:JSON.stringify(f),httpMethod:"POST",httpOptions:u});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(l=d==null?void 0:d.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function jh(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let l;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?l=await n.json():l={error:{message:await n.text(),code:n.status,status:n.statusText}};const u=JSON.stringify(l);throw o>=400&&o<600?new Ar({message:u,status:o}):new Error(u)}}function FT(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const f=JSON.parse(n.body);if(typeof f=="object"&&f!==null&&!Array.isArray(f))o=f;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function l(f,d){const h=Object.assign({},f);for(const g in d)if(Object.prototype.hasOwnProperty.call(d,g)){const p=d[g],v=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=l(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const u=l(o,e);n.body=JSON.stringify(u)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OT="mcp_used/unknown";let YT=!1;function zp(n){for(const e of n)if(JT(e)||typeof e=="object"&&"inputSchema"in e)return!0;return YT}function Bp(n){var e;const o=(e=n[Zu])!==null&&e!==void 0?e:"";n[Zu]=(o+` ${OT}`).trimStart()}function JT(n){return n!==null&&typeof n=="object"&&n instanceof nc}function XT(n,e=100){return Bo(this,arguments,function*(){let l,u=0;for(;u<e;){const f=yield mt(n.listTools({cursor:l}));for(const d of f.tools)yield yield mt(d),u++;if(!f.nextCursor)break;l=f.nextCursor}})}class nc{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new nc(e,o)}async initialize(){var e,o,l,u;if(this.mcpTools.length>0)return;const f={},d=[];for(const v of this.mcpClients)try{for(var h=!0,g=(o=void 0,Yl(XT(v))),p;p=await g.next(),e=p.done,!e;h=!0){u=p.value,h=!1;const C=u;d.push(C);const S=C.name;if(f[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);f[S]=v}}catch(C){o={error:C}}finally{try{!h&&!e&&(l=g.return)&&await l.call(g)}finally{if(o)throw o.error}}this.mcpTools=d,this.functionNameToMcpClient=f}async tool(){return await this.initialize(),wy(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const l of e)if(l.name in this.functionNameToMcpClient){const u=this.functionNameToMcpClient[l.name];let f;this.config.timeout&&(f={timeout:this.config.timeout});const d=await u.callTool({name:l.name,arguments:l.args},void 0,f);o.push({functionResponse:{name:l.name,response:d.isError?{error:d}:d}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function KT(n,e,o){const l=new gy;let u;o.data instanceof Blob?u=JSON.parse(await o.data.text()):u=JSON.parse(o.data);const f=M2(u);Object.assign(l,f),e(l)}class ZT{constructor(e,o,l){this.apiClient=e,this.auth=o,this.webSocketFactory=l}async connect(e){var o,l;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const u=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),d=jT(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${u}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(I=>{p=I}),C=e.callbacks,S=function(){p({})},T=this.apiClient,w={onopen:S,onmessage:I=>{KT(T,C.onmessage,I)},onerror:(o=C==null?void 0:C.onerror)!==null&&o!==void 0?o:function(I){},onclose:(l=C==null?void 0:C.onclose)!==null&&l!==void 0?l:function(I){}},_=this.webSocketFactory.create(g,QT(d),w);_.connect(),await v;const N=nt(this.apiClient,e.model),R=Mp({model:N}),k=Ju({setup:R});return _.send(JSON.stringify(k)),new $T(_,this.apiClient)}}class $T{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=bx(e),l=Rp(o);this.conn.send(JSON.stringify({clientContent:l}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=Ex(e),l=Ju(o);this.conn.send(JSON.stringify(l))}sendPlaybackControl(e){const o=Ju({playbackControl:e});this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Lo.PLAY)}pause(){this.sendPlaybackControl(Lo.PAUSE)}stop(){this.sendPlaybackControl(Lo.STOP)}resetContext(){this.sendPlaybackControl(Lo.RESET_CONTEXT)}close(){this.conn.close()}}function QT(n){const e={};return n.forEach((o,l)=>{e[l]=o}),e}function jT(n){const e=new Headers;for(const[o,l]of Object.entries(n))e.append(o,l);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WT="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function e_(n,e,o){const l=new py;let u;o.data instanceof Blob?u=await o.data.text():o.data instanceof ArrayBuffer?u=new TextDecoder().decode(o.data):u=o.data;const f=JSON.parse(u);if(n.isVertexAI()){const d=q2(f);Object.assign(l,d)}else{const d=x2(f);Object.assign(l,d)}e(l)}class t_{constructor(e,o,l){this.apiClient=e,this.auth=o,this.webSocketFactory=l,this.music=new ZT(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,l,u,f,d,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const C=this.apiClient.getHeaders();e.config&&e.config.tools&&zp(e.config.tools)&&Bp(C);const S=l_(C);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const B=this.apiClient.getApiKey();let q="BidiGenerateContent",le="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),q="BidiGenerateContentConstrained",le="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${q}?${le}=${B}`}let T=()=>{};const w=new Promise(B=>{T=B}),_=e.callbacks,N=function(){var B;(B=_==null?void 0:_.onopen)===null||B===void 0||B.call(_),T({})},R=this.apiClient,k={onopen:N,onmessage:B=>{e_(R,_.onmessage,B)},onerror:(o=_==null?void 0:_.onerror)!==null&&o!==void 0?o:function(B){},onclose:(l=_==null?void 0:_.onclose)!==null&&l!==void 0?l:function(B){}},I=this.webSocketFactory.create(v,o_(S),k);I.connect(),await w;let H=nt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&H.startsWith("publishers/")){const B=this.apiClient.getProject(),q=this.apiClient.getLocation();H=`projects/${B}/locations/${q}/`+H}let A={};this.apiClient.isVertexAI()&&((u=e.config)===null||u===void 0?void 0:u.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Di.AUDIO]}:e.config.responseModalities=[Di.AUDIO]),!((f=e.config)===null||f===void 0)&&f.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(h=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[],P=[];for(const B of U)if(this.isCallableTool(B)){const q=B;P.push(await q.tool())}else P.push(B);P.length>0&&(e.config.tools=P);const Y={model:H,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?A=e2(this.apiClient,Y):A=Sx(this.apiClient,Y),delete A.config,I.send(JSON.stringify(A)),new i_(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const n_={turnComplete:!0};class i_{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let l=[];try{l=Tn(o.turns),e.isVertexAI()?l=l.map(u=>Fo(u)):l=l.map(u=>Mr(u))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:l,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let l=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?l=o.functionResponses:l=[o.functionResponses],l.length===0)throw new Error("functionResponses is required.");for(const f of l){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!e.isVertexAI()&&!("id"in f))throw new Error(WT)}return{toolResponse:{functionResponses:l}}}sendClientContent(e){e=Object.assign(Object.assign({},n_),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:i2(e)}:o={realtimeInput:wx(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function o_(n){const e={};return n.forEach((o,l)=>{e[l]=o}),e}function l_(n){const e=new Headers;for(const[o,l]of Object.entries(n))e.append(o,l);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wh=10;function ep(n){var e,o,l;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let u=!1;for(const d of(o=n==null?void 0:n.tools)!==null&&o!==void 0?o:[])if(Go(d)){u=!0;break}if(!u)return!0;const f=(l=n==null?void 0:n.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls;return f&&(f<0||!Number.isInteger(f))||f==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0):!1}function Go(n){return"callTool"in n&&typeof n.callTool=="function"}function a_(n){var e,o,l;return(l=(o=(e=n.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(u=>Go(u)))!==null&&l!==void 0?l:!1}function r_(n){var e,o,l;return(l=(o=(e=n.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(u=>!Go(u)))!==null&&l!==void 0?l:!1}function tp(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s_ extends Qi{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var l,u,f,d,h;const g=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!a_(o)||ep(o.config))return await this.generateContentInternal(g);if(r_(o))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const C=Tn(g.contents),S=(f=(u=(l=g.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||u===void 0?void 0:u.maximumRemoteCalls)!==null&&f!==void 0?f:Wh;let T=0;for(;T<S&&(p=await this.generateContentInternal(g),!(!p.functionCalls||p.functionCalls.length===0));){const w=p.candidates[0].content,_=[];for(const N of(h=(d=o.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[])if(Go(N)){const k=await N.callTool(p.functionCalls);_.push(...k)}T++,v={role:"user",parts:_},g.contents=Tn(g.contents),g.contents.push(w),g.contents.push(v),tp(g.config)&&(C.push(w),C.push(v))}return tp(g.config)&&(p.automaticFunctionCallingHistory=C),p},this.generateContentStream=async o=>{if(this.maybeMoveToResponseJsonSchem(o),ep(o.config)){const l=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(l)}else return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(l=>{var u;let f;const d=[];if(l!=null&&l.generatedImages)for(const g of l.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((u=g==null?void 0:g.safetyAttributes)===null||u===void 0?void 0:u.contentType)==="Positive Prompt"?f=g==null?void 0:g.safetyAttributes:d.push(g);let h;return f?h={generatedImages:d,positivePromptSafetyAttributes:f,sdkHttpResponse:l.sdkHttpResponse}:h={generatedImages:d,sdkHttpResponse:l.sdkHttpResponse},h}),this.list=async o=>{var l;const d={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((l=d.config)===null||l===void 0)&&l.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new Xl($i.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(d),d)},this.editImage=async o=>{const l={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(l.referenceImages=o.referenceImages.map(u=>u.toReferenceImageAPI())),await this.editImageInternal(l)},this.upscaleImage=async o=>{let l={numberOfImages:1,mode:"upscale"};o.config&&(l=Object.assign(Object.assign({},l),o.config));const u={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:l};return await this.upscaleImageInternal(u)},this.generateVideos=async o=>{if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,l,u;const f=(o=e.config)===null||o===void 0?void 0:o.tools;if(!f)return e;const d=await Promise.all(f.map(async g=>Go(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(h.config.tools=d,e.config&&e.config.tools&&zp(e.config.tools)){const g=(u=(l=e.config.httpOptions)===null||l===void 0?void 0:l.headers)!==null&&u!==void 0?u:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),Bp(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var o,l,u;const f=new Map;for(const d of(l=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&l!==void 0?l:[])if(Go(d)){const h=d,g=await h.tool();for(const p of(u=g.functionDeclarations)!==null&&u!==void 0?u:[]){if(!p.name)throw new Error("Function declaration name is required.");if(f.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);f.set(p.name,h)}}return f}async processAfcStream(e){var o,l,u;const f=(u=(l=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&u!==void 0?u:Wh;let d=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,v,C){var S,T;return Bo(this,arguments,function*(){for(var w,_,N,R;h<f;){d&&(h++,d=!1);const A=yield mt(p.processParamsMaybeAddMcpUsage(C)),U=yield mt(p.generateContentStreamInternal(A)),P=[],Y=[];try{for(var k=!0,I=(_=void 0,Yl(U)),H;H=yield mt(I.next()),w=H.done,!w;k=!0){R=H.value,k=!1;const B=R;if(yield yield mt(B),B.candidates&&(!((S=B.candidates[0])===null||S===void 0)&&S.content)){Y.push(B.candidates[0].content);for(const q of(T=B.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(h<f&&q.functionCall){if(!q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(q.functionCall.name)){const le=yield mt(v.get(q.functionCall.name).callTool([q.functionCall]));P.push(...le)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${q.functionCall.name}`)}}}}catch(B){_={error:B}}finally{try{!k&&!w&&(N=I.return)&&(yield mt(N.call(I)))}finally{if(_)throw _.error}}if(P.length>0){d=!0;const B=new Fl;B.candidates=[{content:{role:"user",parts:P}}],yield yield mt(B);const q=[];q.push(...Y),q.push({role:"user",parts:P});const le=Tn(C.contents).concat(q);C.contents=le}else break}})})(this,g,e)}async generateContentInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Kh(this.apiClient,e);return h=Ie("{model}:generateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=$h(v),S=new Fl;return Object.assign(S,C),S})}else{const p=Xh(this.apiClient,e);return h=Ie("{model}:generateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=Zh(v),S=new Fl;return Object.assign(S,C),S})}}async generateContentStreamInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Kh(this.apiClient,e);return h=Ie("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),d.then(function(C){return Bo(this,arguments,function*(){var S,T,w,_;try{for(var N=!0,R=Yl(C),k;k=yield mt(R.next()),S=k.done,!S;N=!0){_=k.value,N=!1;const I=_,H=$h(yield mt(I.json()));H.sdkHttpResponse={headers:I.headers};const A=new Fl;Object.assign(A,H),yield yield mt(A)}}catch(I){T={error:I}}finally{try{!N&&!S&&(w=R.return)&&(yield mt(w.call(R)))}finally{if(T)throw T.error}}})})}else{const p=Xh(this.apiClient,e);return h=Ie("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}),d.then(function(C){return Bo(this,arguments,function*(){var S,T,w,_;try{for(var N=!0,R=Yl(C),k;k=yield mt(R.next()),S=k.done,!S;N=!0){_=k.value,N=!1;const I=_,H=Zh(yield mt(I.json()));H.sdkHttpResponse={headers:I.headers};const A=new Fl;Object.assign(A,H),yield yield mt(A)}}catch(I){T={error:I}}finally{try{!N&&!S&&(w=R.return)&&(yield mt(w.call(R)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=nS(this.apiClient,e);return h=Ie("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=gT(v),S=new bh;return Object.assign(S,C),S})}else{const p=hC(this.apiClient,e);return h=Ie("{model}:batchEmbedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=JS(v),S=new bh;return Object.assign(S,C),S})}}async generateImagesInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=oS(this.apiClient,e);return h=Ie("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=yT(v),S=new Eh;return Object.assign(S,C),S})}else{const p=gC(this.apiClient,e);return h=Ie("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=ZS(v),S=new Eh;return Object.assign(S,C),S})}}async editImageInternal(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=fS(this.apiClient,e);return f=Ie("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const p=vT(g),v=new ry;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=mS(this.apiClient,e);return f=Ie("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const p=xT(g),v=new sy;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=yS(this.apiClient,e);return f=Ie("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>{const p=CT(g),v=new uy;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=SS(this.apiClient,e);return f=Ie("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u.then(g=>{const p=_T(g),v=new cy;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=TS(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>Ku(v))}else{const p=yC(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>Xu(v))}}async listInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=wS(this.apiClient,e);return h=Ie("{models_url}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=AT(v),S=new Ah;return Object.assign(S,C),S})}else{const p=xC(this.apiClient,e);return h=Ie("{models_url}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=QS(v),S=new Ah;return Object.assign(S,C),S})}}async update(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=ES(this.apiClient,e);return h=Ie("{model}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>Ku(v))}else{const p=SC(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>Xu(v))}}async delete(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=AS(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=MT(v),S=new Mh;return Object.assign(S,C),S})}else{const p=TC(this.apiClient,e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=jS(v),S=new Mh;return Object.assign(S,C),S})}}async countTokens(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=RS(this.apiClient,e);return h=Ie("{model}:countTokens",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=RT(v),S=new Rh;return Object.assign(S,C),S})}else{const p=wC(this.apiClient,e);return h=Ie("{model}:countTokens",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=WS(v),S=new Rh;return Object.assign(S,C),S})}}async computeTokens(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=NS(this.apiClient,e);return f=Ie("{model}:computeTokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>{const p=NT(g),v=new fy;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=US(this.apiClient,e);return h=Ie("{model}:predictLongRunning",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>{const C=UT(v),S=new br;return Object.assign(S,C),S})}else{const p=AC(this.apiClient,e);return h=Ie("{model}:predictLongRunning",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d.then(v=>{const C=iT(v),S=new br;return Object.assign(S,C),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u_(n){const e={},o=r(n,["operationName"]);o!=null&&s(e,["_url","operationName"],o);const l=r(n,["config"]);return l!=null&&s(e,["config"],l),e}function c_(n){const e={},o=r(n,["operationName"]);o!=null&&s(e,["operationName"],o);const l=r(n,["resourceName"]);l!=null&&s(e,["_url","resourceName"],l);const u=r(n,["config"]);return u!=null&&s(e,["config"],u),e}function f_(n){const e={},o=r(n,["operationName"]);o!=null&&s(e,["_url","operationName"],o);const l=r(n,["config"]);return l!=null&&s(e,["config"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d_ extends Qi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,l=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const u=o.name.split("/operations/")[0];let f;l&&"httpOptions"in l&&(f=l.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:u,config:{httpOptions:f}});return o._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const u=await this.getVideosOperationInternal({operationName:o.name,config:l});return o._fromAPIResponse({apiResponse:u,isVertexAI:!1})}}async get(e){const o=e.operation,l=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const u=o.name.split("/operations/")[0];let f;l&&"httpOptions"in l&&(f=l.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:u,config:{httpOptions:f}});return o._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const u=await this.getVideosOperationInternal({operationName:o.name,config:l});return o._fromAPIResponse({apiResponse:u,isVertexAI:!1})}}async getVideosOperationInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=f_(e);return h=Ie("{operationName}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d}else{const p=u_(e);return h=Ie("{operationName}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),d}}async fetchPredictVideosOperationInternal(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=c_(e);return f=Ie("{resourceName}:fetchPredictOperation",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),u}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m_(n){const e={},o=r(n,["voiceName"]);return o!=null&&s(e,["voiceName"],o),e}function Gp(n){const e={},o=r(n,["prebuiltVoiceConfig"]);return o!=null&&s(e,["prebuiltVoiceConfig"],m_(o)),e}function h_(n){const e={},o=r(n,["speaker"]);o!=null&&s(e,["speaker"],o);const l=r(n,["voiceConfig"]);return l!=null&&s(e,["voiceConfig"],Gp(l)),e}function p_(n){const e={},o=r(n,["speakerVoiceConfigs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>h_(u))),s(e,["speakerVoiceConfigs"],l)}return e}function g_(n){const e={},o=r(n,["voiceConfig"]);o!=null&&s(e,["voiceConfig"],Gp(o));const l=r(n,["multiSpeakerVoiceConfig"]);l!=null&&s(e,["multiSpeakerVoiceConfig"],p_(l));const u=r(n,["languageCode"]);return u!=null&&s(e,["languageCode"],u),e}function y_(n){const e={},o=r(n,["fps"]);o!=null&&s(e,["fps"],o);const l=r(n,["endOffset"]);l!=null&&s(e,["endOffset"],l);const u=r(n,["startOffset"]);return u!=null&&s(e,["startOffset"],u),e}function v_(n){const e={};if(r(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(n,["data"]);o!=null&&s(e,["data"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function x_(n){const e={};if(r(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=r(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const l=r(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function C_(n){const e={},o=r(n,["videoMetadata"]);o!=null&&s(e,["videoMetadata"],y_(o));const l=r(n,["thought"]);l!=null&&s(e,["thought"],l);const u=r(n,["inlineData"]);u!=null&&s(e,["inlineData"],v_(u));const f=r(n,["fileData"]);f!=null&&s(e,["fileData"],x_(f));const d=r(n,["thoughtSignature"]);d!=null&&s(e,["thoughtSignature"],d);const h=r(n,["codeExecutionResult"]);h!=null&&s(e,["codeExecutionResult"],h);const g=r(n,["executableCode"]);g!=null&&s(e,["executableCode"],g);const p=r(n,["functionCall"]);p!=null&&s(e,["functionCall"],p);const v=r(n,["functionResponse"]);v!=null&&s(e,["functionResponse"],v);const C=r(n,["text"]);return C!=null&&s(e,["text"],C),e}function S_(n){const e={},o=r(n,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>C_(f))),s(e,["parts"],u)}const l=r(n,["role"]);return l!=null&&s(e,["role"],l),e}function T_(n){const e={},o=r(n,["behavior"]);o!=null&&s(e,["behavior"],o);const l=r(n,["description"]);l!=null&&s(e,["description"],l);const u=r(n,["name"]);u!=null&&s(e,["name"],u);const f=r(n,["parameters"]);f!=null&&s(e,["parameters"],f);const d=r(n,["parametersJsonSchema"]);d!=null&&s(e,["parametersJsonSchema"],d);const h=r(n,["response"]);h!=null&&s(e,["response"],h);const g=r(n,["responseJsonSchema"]);return g!=null&&s(e,["responseJsonSchema"],g),e}function __(n){const e={},o=r(n,["startTime"]);o!=null&&s(e,["startTime"],o);const l=r(n,["endTime"]);return l!=null&&s(e,["endTime"],l),e}function w_(n){const e={},o=r(n,["timeRangeFilter"]);if(o!=null&&s(e,["timeRangeFilter"],__(o)),r(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function b_(n){const e={},o=r(n,["mode"]);o!=null&&s(e,["mode"],o);const l=r(n,["dynamicThreshold"]);return l!=null&&s(e,["dynamicThreshold"],l),e}function E_(n){const e={},o=r(n,["dynamicRetrievalConfig"]);return o!=null&&s(e,["dynamicRetrievalConfig"],b_(o)),e}function A_(){return{}}function M_(n){const e={},o=r(n,["environment"]);return o!=null&&s(e,["environment"],o),e}function R_(n){const e={},o=r(n,["functionDeclarations"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>T_(p))),s(e,["functionDeclarations"],g)}if(r(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=r(n,["googleSearch"]);l!=null&&s(e,["googleSearch"],w_(l));const u=r(n,["googleSearchRetrieval"]);if(u!=null&&s(e,["googleSearchRetrieval"],E_(u)),r(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(r(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");r(n,["urlContext"])!=null&&s(e,["urlContext"],A_());const d=r(n,["computerUse"]);d!=null&&s(e,["computerUse"],M_(d));const h=r(n,["codeExecution"]);return h!=null&&s(e,["codeExecution"],h),e}function N_(n){const e={},o=r(n,["handle"]);if(o!=null&&s(e,["handle"],o),r(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function np(){return{}}function D_(n){const e={},o=r(n,["disabled"]);o!=null&&s(e,["disabled"],o);const l=r(n,["startOfSpeechSensitivity"]);l!=null&&s(e,["startOfSpeechSensitivity"],l);const u=r(n,["endOfSpeechSensitivity"]);u!=null&&s(e,["endOfSpeechSensitivity"],u);const f=r(n,["prefixPaddingMs"]);f!=null&&s(e,["prefixPaddingMs"],f);const d=r(n,["silenceDurationMs"]);return d!=null&&s(e,["silenceDurationMs"],d),e}function k_(n){const e={},o=r(n,["automaticActivityDetection"]);o!=null&&s(e,["automaticActivityDetection"],D_(o));const l=r(n,["activityHandling"]);l!=null&&s(e,["activityHandling"],l);const u=r(n,["turnCoverage"]);return u!=null&&s(e,["turnCoverage"],u),e}function I_(n){const e={},o=r(n,["targetTokens"]);return o!=null&&s(e,["targetTokens"],o),e}function U_(n){const e={},o=r(n,["triggerTokens"]);o!=null&&s(e,["triggerTokens"],o);const l=r(n,["slidingWindow"]);return l!=null&&s(e,["slidingWindow"],I_(l)),e}function P_(n){const e={},o=r(n,["proactiveAudio"]);return o!=null&&s(e,["proactiveAudio"],o),e}function L_(n,e){const o={},l=r(n,["generationConfig"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig"],l);const u=r(n,["responseModalities"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","responseModalities"],u);const f=r(n,["temperature"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","temperature"],f);const d=r(n,["topP"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","topP"],d);const h=r(n,["topK"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","topK"],h);const g=r(n,["maxOutputTokens"]);e!==void 0&&g!=null&&s(e,["setup","generationConfig","maxOutputTokens"],g);const p=r(n,["mediaResolution"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","mediaResolution"],p);const v=r(n,["seed"]);e!==void 0&&v!=null&&s(e,["setup","generationConfig","seed"],v);const C=r(n,["speechConfig"]);e!==void 0&&C!=null&&s(e,["setup","generationConfig","speechConfig"],g_(tc(C)));const S=r(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],S);const T=r(n,["systemInstruction"]);e!==void 0&&T!=null&&s(e,["setup","systemInstruction"],S_(Yt(T)));const w=r(n,["tools"]);if(e!==void 0&&w!=null){let A=Ho(w);Array.isArray(A)&&(A=A.map(U=>R_(Vo(U)))),s(e,["setup","tools"],A)}const _=r(n,["sessionResumption"]);e!==void 0&&_!=null&&s(e,["setup","sessionResumption"],N_(_));const N=r(n,["inputAudioTranscription"]);e!==void 0&&N!=null&&s(e,["setup","inputAudioTranscription"],np());const R=r(n,["outputAudioTranscription"]);e!==void 0&&R!=null&&s(e,["setup","outputAudioTranscription"],np());const k=r(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&s(e,["setup","realtimeInputConfig"],k_(k));const I=r(n,["contextWindowCompression"]);e!==void 0&&I!=null&&s(e,["setup","contextWindowCompression"],U_(I));const H=r(n,["proactivity"]);return e!==void 0&&H!=null&&s(e,["setup","proactivity"],P_(H)),o}function z_(n,e){const o={},l=r(e,["model"]);l!=null&&s(o,["setup","model"],nt(n,l));const u=r(e,["config"]);return u!=null&&s(o,["config"],L_(u,o)),o}function B_(n,e,o){const l={},u=r(e,["expireTime"]);o!==void 0&&u!=null&&s(o,["expireTime"],u);const f=r(e,["newSessionExpireTime"]);o!==void 0&&f!=null&&s(o,["newSessionExpireTime"],f);const d=r(e,["uses"]);o!==void 0&&d!=null&&s(o,["uses"],d);const h=r(e,["liveConnectConstraints"]);o!==void 0&&h!=null&&s(o,["bidiGenerateContentSetup"],z_(n,h));const g=r(e,["lockAdditionalFields"]);return o!==void 0&&g!=null&&s(o,["fieldMask"],g),l}function G_(n,e){const o={},l=r(e,["config"]);return l!=null&&s(o,["config"],B_(n,l,o)),o}function V_(n){const e={},o=r(n,["name"]);return o!=null&&s(e,["name"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H_(n){const e=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const l=n[o];if(typeof l=="object"&&l!=null&&Object.keys(l).length>0){const u=Object.keys(l).map(f=>`${o}.${f}`);e.push(...u)}else e.push(o)}return e.join(",")}function q_(n,e){let o=null;const l=n.bidiGenerateContentSetup;if(typeof l=="object"&&l!==null&&"setup"in l){const f=l.setup;typeof f=="object"&&f!==null?(n.bidiGenerateContentSetup=f,o=f):delete n.bidiGenerateContentSetup}else l!==void 0&&delete n.bidiGenerateContentSetup;const u=n.fieldMask;if(o){const f=H_(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)f?n.fieldMask=f:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&u!==null&&Array.isArray(u)&&u.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];u.length>0&&(h=u.map(p=>d.includes(p)?`generationConfig.${p}`:p));const g=[];f&&g.push(f),h.length>0&&g.push(...h),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else u!==null&&Array.isArray(u)&&u.length>0?n.fieldMask=u.join(","):delete n.fieldMask;return n}class F_ extends Qi{constructor(e){super(),this.apiClient=e}async create(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=G_(this.apiClient,e);f=Ie("auth_tokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query;const g=q_(h,e.config);return u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),u.then(p=>V_(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O_(n){const e={},o=r(n,["name"]);o!=null&&s(e,["_url","name"],o);const l=r(n,["config"]);return l!=null&&s(e,["config"],l),e}function Y_(n,e){const o={},l=r(n,["pageSize"]);e!==void 0&&l!=null&&s(e,["_query","pageSize"],l);const u=r(n,["pageToken"]);e!==void 0&&u!=null&&s(e,["_query","pageToken"],u);const f=r(n,["filter"]);return e!==void 0&&f!=null&&s(e,["_query","filter"],f),o}function J_(n){const e={},o=r(n,["config"]);return o!=null&&s(e,["config"],Y_(o,e)),e}function X_(n){const e={},o=r(n,["name"]);o!=null&&s(e,["_url","name"],o);const l=r(n,["config"]);return l!=null&&s(e,["config"],l),e}function K_(n){const e={},o=r(n,["textInput"]);o!=null&&s(e,["textInput"],o);const l=r(n,["output"]);return l!=null&&s(e,["output"],l),e}function Z_(n){const e={};if(r(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=r(n,["examples"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>K_(u))),s(e,["examples","examples"],l)}return e}function $_(n,e){const o={};if(r(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=r(n,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&s(e,["displayName"],l),r(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=r(n,["epochCount"]);e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","epochCount"],u);const f=r(n,["learningRateMultiplier"]);if(f!=null&&s(o,["tuningTask","hyperparameters","learningRateMultiplier"],f),r(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(r(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=r(n,["batchSize"]);e!==void 0&&d!=null&&s(e,["tuningTask","hyperparameters","batchSize"],d);const h=r(n,["learningRate"]);return e!==void 0&&h!=null&&s(e,["tuningTask","hyperparameters","learningRate"],h),o}function Q_(n){const e={},o=r(n,["baseModel"]);o!=null&&s(e,["baseModel"],o);const l=r(n,["preTunedModel"]);l!=null&&s(e,["preTunedModel"],l);const u=r(n,["trainingDataset"]);u!=null&&s(e,["tuningTask","trainingData"],Z_(u));const f=r(n,["config"]);return f!=null&&s(e,["config"],$_(f,e)),e}function j_(n){const e={},o=r(n,["name"]);o!=null&&s(e,["_url","name"],o);const l=r(n,["config"]);return l!=null&&s(e,["config"],l),e}function W_(n,e){const o={},l=r(n,["pageSize"]);e!==void 0&&l!=null&&s(e,["_query","pageSize"],l);const u=r(n,["pageToken"]);e!==void 0&&u!=null&&s(e,["_query","pageToken"],u);const f=r(n,["filter"]);return e!==void 0&&f!=null&&s(e,["_query","filter"],f),o}function ew(n){const e={},o=r(n,["config"]);return o!=null&&s(e,["config"],W_(o,e)),e}function tw(n){const e={},o=r(n,["name"]);o!=null&&s(e,["_url","name"],o);const l=r(n,["config"]);return l!=null&&s(e,["config"],l),e}function nw(n,e){const o={},l=r(n,["gcsUri"]);e!==void 0&&l!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],l);const u=r(n,["vertexDatasetResource"]);if(e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],u),r(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function iw(n,e){const o={},l=r(n,["gcsUri"]);l!=null&&s(o,["validationDatasetUri"],l);const u=r(n,["vertexDatasetResource"]);return e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],u),o}function ow(n,e){const o={},l=r(n,["validationDataset"]);e!==void 0&&l!=null&&s(e,["supervisedTuningSpec"],iw(l,o));const u=r(n,["tunedModelDisplayName"]);e!==void 0&&u!=null&&s(e,["tunedModelDisplayName"],u);const f=r(n,["description"]);e!==void 0&&f!=null&&s(e,["description"],f);const d=r(n,["epochCount"]);e!==void 0&&d!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const h=r(n,["learningRateMultiplier"]);e!==void 0&&h!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const g=r(n,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const p=r(n,["preTunedModelCheckpointId"]);p!=null&&s(o,["preTunedModel","checkpointId"],p);const v=r(n,["adapterSize"]);if(e!==void 0&&v!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v),r(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return o}function lw(n){const e={},o=r(n,["baseModel"]);o!=null&&s(e,["baseModel"],o);const l=r(n,["preTunedModel"]);l!=null&&s(e,["preTunedModel"],l);const u=r(n,["trainingDataset"]);u!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],nw(u,e));const f=r(n,["config"]);return f!=null&&s(e,["config"],ow(f,e)),e}function aw(n){const e={},o=r(n,["name"]);o!=null&&s(e,["model"],o);const l=r(n,["name"]);return l!=null&&s(e,["endpoint"],l),e}function Vp(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["name"]);l!=null&&s(e,["name"],l);const u=r(n,["state"]);u!=null&&s(e,["state"],hp(u));const f=r(n,["createTime"]);f!=null&&s(e,["createTime"],f);const d=r(n,["tuningTask","startTime"]);d!=null&&s(e,["startTime"],d);const h=r(n,["tuningTask","completeTime"]);h!=null&&s(e,["endTime"],h);const g=r(n,["updateTime"]);g!=null&&s(e,["updateTime"],g);const p=r(n,["description"]);p!=null&&s(e,["description"],p);const v=r(n,["baseModel"]);v!=null&&s(e,["baseModel"],v);const C=r(n,["_self"]);C!=null&&s(e,["tunedModel"],aw(C));const S=r(n,["customBaseModel"]);S!=null&&s(e,["customBaseModel"],S);const T=r(n,["experiment"]);T!=null&&s(e,["experiment"],T);const w=r(n,["labels"]);w!=null&&s(e,["labels"],w);const _=r(n,["outputUri"]);_!=null&&s(e,["outputUri"],_);const N=r(n,["pipelineJob"]);N!=null&&s(e,["pipelineJob"],N);const R=r(n,["serviceAccount"]);R!=null&&s(e,["serviceAccount"],R);const k=r(n,["tunedModelDisplayName"]);return k!=null&&s(e,["tunedModelDisplayName"],k),e}function rw(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["nextPageToken"]);l!=null&&s(e,["nextPageToken"],l);const u=r(n,["tunedModels"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(d=>Vp(d))),s(e,["tuningJobs"],f)}return e}function sw(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["name"]);l!=null&&s(e,["name"],l);const u=r(n,["metadata"]);u!=null&&s(e,["metadata"],u);const f=r(n,["done"]);f!=null&&s(e,["done"],f);const d=r(n,["error"]);return d!=null&&s(e,["error"],d),e}function uw(n){const e={},o=r(n,["checkpointId"]);o!=null&&s(e,["checkpointId"],o);const l=r(n,["epoch"]);l!=null&&s(e,["epoch"],l);const u=r(n,["step"]);u!=null&&s(e,["step"],u);const f=r(n,["endpoint"]);return f!=null&&s(e,["endpoint"],f),e}function cw(n){const e={},o=r(n,["model"]);o!=null&&s(e,["model"],o);const l=r(n,["endpoint"]);l!=null&&s(e,["endpoint"],l);const u=r(n,["checkpoints"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(d=>uw(d))),s(e,["checkpoints"],f)}return e}function $u(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["name"]);l!=null&&s(e,["name"],l);const u=r(n,["state"]);u!=null&&s(e,["state"],hp(u));const f=r(n,["createTime"]);f!=null&&s(e,["createTime"],f);const d=r(n,["startTime"]);d!=null&&s(e,["startTime"],d);const h=r(n,["endTime"]);h!=null&&s(e,["endTime"],h);const g=r(n,["updateTime"]);g!=null&&s(e,["updateTime"],g);const p=r(n,["error"]);p!=null&&s(e,["error"],p);const v=r(n,["description"]);v!=null&&s(e,["description"],v);const C=r(n,["baseModel"]);C!=null&&s(e,["baseModel"],C);const S=r(n,["tunedModel"]);S!=null&&s(e,["tunedModel"],cw(S));const T=r(n,["preTunedModel"]);T!=null&&s(e,["preTunedModel"],T);const w=r(n,["supervisedTuningSpec"]);w!=null&&s(e,["supervisedTuningSpec"],w);const _=r(n,["tuningDataStats"]);_!=null&&s(e,["tuningDataStats"],_);const N=r(n,["encryptionSpec"]);N!=null&&s(e,["encryptionSpec"],N);const R=r(n,["partnerModelTuningSpec"]);R!=null&&s(e,["partnerModelTuningSpec"],R);const k=r(n,["customBaseModel"]);k!=null&&s(e,["customBaseModel"],k);const I=r(n,["experiment"]);I!=null&&s(e,["experiment"],I);const H=r(n,["labels"]);H!=null&&s(e,["labels"],H);const A=r(n,["outputUri"]);A!=null&&s(e,["outputUri"],A);const U=r(n,["pipelineJob"]);U!=null&&s(e,["pipelineJob"],U);const P=r(n,["serviceAccount"]);P!=null&&s(e,["serviceAccount"],P);const Y=r(n,["tunedModelDisplayName"]);return Y!=null&&s(e,["tunedModelDisplayName"],Y),e}function fw(n){const e={},o=r(n,["sdkHttpResponse"]);o!=null&&s(e,["sdkHttpResponse"],o);const l=r(n,["nextPageToken"]);l!=null&&s(e,["nextPageToken"],l);const u=r(n,["tuningJobs"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(d=>$u(d))),s(e,["tuningJobs"],f)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dw extends Qi{constructor(e){super(),this.apiClient=e,this.get=async o=>await this.getInternal(o),this.list=async(o={})=>new Xl($i.PAGED_ITEM_TUNING_JOBS,l=>this.listInternal(l),await this.listInternal(o),o),this.tune=async o=>{if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const l={tunedModelName:o.baseModel},u=Object.assign(Object.assign({},o),{preTunedModel:l});return u.baseModel=void 0,await this.tuneInternal(u)}else{const l=Object.assign({},o);return await this.tuneInternal(l)}else{const l=Object.assign({},o),u=await this.tuneMldevInternal(l);let f="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?f=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(f=u.name.split("/operations/")[0]),{name:f,state:Hu.JOB_STATE_QUEUED}}}}async getInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=j_(e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>$u(v))}else{const p=O_(e);return h=Ie("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>Vp(v))}}async listInternal(e){var o,l,u,f;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=ew(e);return h=Ie("tuningJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=fw(v),S=new Dh;return Object.assign(S,C),S})}else{const p=J_(e);return h=Ie("tunedModels",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const S=C;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const C=rw(v),S=new Dh;return Object.assign(S,C),S})}}async cancel(e){var o,l,u,f;let d="",h={};if(this.apiClient.isVertexAI()){const g=tw(e);d=Ie("{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}else{const g=X_(e);d=Ie("{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(u=e.config)===null||u===void 0?void 0:u.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async tuneInternal(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI()){const h=lw(e);return f=Ie("tuningJobs",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>$u(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,l;let u,f="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Q_(e);return f=Ie("tunedModels",h._url),d=h._query,delete h.config,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),u.then(g=>sw(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mw{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const hw=1024*1024*8,pw=3,gw=1e3,yw=2,Lu="x-goog-upload-status";async function vw(n,e,o){var l,u,f;let d=0,h=0,g=new qu(new Response),p="upload";for(d=n.size;h<d;){const C=Math.min(hw,d-h),S=n.slice(h,h+C);h+C>=d&&(p+=", finalize");let T=0,w=gw;for(;T<pw&&(g=await o.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(C)}}}),!(!((l=g==null?void 0:g.headers)===null||l===void 0)&&l[Lu]));)T++,await Cw(w),w=w*yw;if(h+=C,((u=g==null?void 0:g.headers)===null||u===void 0?void 0:u[Lu])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(g==null?void 0:g.json());if(((f=g==null?void 0:g.headers)===null||f===void 0?void 0:f[Lu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function xw(n){return{size:n.size,type:n.type}}function Cw(n){return new Promise(e=>setTimeout(e,n))}class Sw{async upload(e,o,l){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vw(e,o,l)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xw(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tw{create(e,o,l){return new _w(e,o,l)}}class _w{constructor(e,o,l){this.url=e,this.headers=o,this.callbacks=l}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ip="x-goog-api-key";class ww{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(ip)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ip,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bw="gl-node/";class Ew{constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const l=ay(e.httpOptions,e.vertexai,void 0,void 0);l&&(e.httpOptions?e.httpOptions.baseUrl=l:e.httpOptions={baseUrl:l}),this.apiVersion=e.apiVersion;const u=new ww(this.apiKey);this.apiClient=new qT({auth:u,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:bw+"web",uploader:new Sw,downloader:new mw}),this.models=new s_(this.apiClient),this.live=new t_(this.apiClient,u,new Tw),this.batches=new D1(this.apiClient),this.chats=new zv(this.models,this.apiClient),this.caches=new Uv(this.apiClient),this.files=new $v(this.apiClient),this.operations=new d_(this.apiClient),this.authTokens=new F_(this.apiClient),this.tunings=new dw(this.apiClient)}}const op=new Map;function Aw(){try{const n=localStorage.getItem("api_groups"),e=localStorage.getItem("active_group_id");if(!n||!e){const u=localStorage.getItem("gemini_api_key");return u?{id:"legacy",name:"兼容模式",type:"gemini",baseUrl:"https://generativelanguage.googleapis.com",apiKeys:u,model:"gemini-2.5-flash-image-preview",isActive:!0,createdAt:new Date().toISOString()}:null}const l=JSON.parse(n).find(u=>u.id===e);return!l||!l.activeConfigId?null:l.configs.find(u=>u.id===l.activeConfigId)||null}catch(n){return console.error("获取API配置失败:",n),null}}function Mw(n){const e=n.apiKeys.split(",").map(f=>f.trim()).filter(f=>f);if(e.length===0)throw new Error("没有可用的API Key");if(e.length===1)return e[0];const o=n.id,l=op.get(o)||0,u=e[l%e.length];return op.set(o,(l+1)%e.length),u}function Hp(){const n=Aw();if(!n)throw new Error("请先设置API配置。点击右上角的'API设置'按钮来配置您的API。");if(n.type!=="gemini")throw new Error(`当前选择的是${n.type}类型的API，但此功能需要Gemini API。请在API设置中选择Gemini配置。`);const e=Mw(n);return{ai:new Ew({apiKey:e}),model:n.model||"gemini-2.5-flash-image-preview"}}async function zu(n,e,o,l,u,f){var d,h,g,p,v,C,S;try{const{ai:T,model:w}=Hp();let _=o;const N=[{inlineData:{data:n,mimeType:e}}];if(l&&(N.push({inlineData:{data:l,mimeType:"image/png"}}),_=`Apply the following instruction only to the masked area of the image: "${o}". Preserve the unmasked area.`),u&&N.push({inlineData:{data:u.base64,mimeType:u.mimeType}}),f&&f.length>0)for(const H of f)N.push({inlineData:{data:H.base64,mimeType:H.mimeType}});N.push({text:_});const R=await T.models.generateContent({model:w,contents:{parts:N},config:{responseModalities:[Di.IMAGE,Di.TEXT]}}),k={imageUrl:null,text:null},I=(g=(h=(d=R.candidates)==null?void 0:d[0])==null?void 0:h.content)==null?void 0:g.parts;if(I){for(const H of I)if(H.text)k.text=(k.text?k.text+`
`:"")+H.text;else if(H.inlineData){const A=H.inlineData.data;k.imageUrl=`data:${H.inlineData.mimeType};base64,${A}`}}if(!k.imageUrl){const H=(v=(p=R.candidates)==null?void 0:p[0])==null?void 0:v.finishReason,A=(S=(C=R.candidates)==null?void 0:C[0])==null?void 0:S.safetyRatings;let U="The model did not return an image. It might have refused the request. Please try a different image or prompt.";throw H==="SAFETY"&&(U=`The request was blocked for safety reasons. Categories: ${(A==null?void 0:A.filter(Y=>Y.blocked).map(Y=>Y.category).join(", "))||"Unknown"}. Please modify your prompt or image.`),new Error(U)}return k}catch(T){if(console.error("Error calling Gemini API:",T),T instanceof Error){let w=T.message;try{const _=JSON.parse(w);_.error&&_.error.message&&(_.error.status==="RESOURCE_EXHAUSTED"?w="API请求频率超限。请稍等片刻后重试，或尝试使用其他API Key。":_.error.code===500||_.error.status==="UNKNOWN"?w="服务器临时不可用。请稍后重试，或切换到其他API配置。":w=_.error.message)}catch{}throw new Error(w)}throw new Error("An unknown error occurred while communicating with the API.")}}async function Rw(n,e,o,l){var u,f,d,h,g,p,v;try{const{ai:C,model:S}=Hp(),w=[{inlineData:{data:n.includes(",")?n.split(",")[1]:n,mimeType:e}}];l&&l.length>0,w.push({text:`Edit this image region with the following instruction: "${o}". 
             Important: Maintain the exact same dimensions and ensure the edges blend naturally. 
             Keep consistent lighting and style for seamless integration back into the original image.`});const _=await C.models.generateContent({model:S,contents:{parts:w},config:{responseModalities:[Di.IMAGE,Di.TEXT]}}),N={imageUrl:null,text:null},R=(d=(f=(u=_.candidates)==null?void 0:u[0])==null?void 0:f.content)==null?void 0:d.parts;if(R){for(const k of R)if(k.text)N.text=(N.text?N.text+`
`:"")+k.text;else if(k.inlineData){const I=k.inlineData.data;N.imageUrl=`data:${k.inlineData.mimeType};base64,${I}`}}if(!N.imageUrl){const k=(g=(h=_.candidates)==null?void 0:h[0])==null?void 0:g.finishReason,I=(v=(p=_.candidates)==null?void 0:p[0])==null?void 0:v.safetyRatings;let H="局部重绘失败，AI没有返回处理后的图像。请尝试不同的提示词。";throw k==="SAFETY"&&(H=`局部重绘被安全过滤器阻止。类别: ${(I==null?void 0:I.filter(U=>U.blocked).map(U=>U.category).join(", "))||"Unknown"}。请修改您的提示词。`),new Error(H)}return N}catch(C){if(console.error("Error calling Gemini API for local redraw:",C),C instanceof Error){let S=C.message;try{const T=JSON.parse(S);T.error&&T.error.message&&(T.error.status==="RESOURCE_EXHAUSTED"?S="局部重绘请求过于频繁。请稍后再试。":T.error.code===500||T.error.status==="UNKNOWN"?S="服务器暂时不可用。请稍后重试局部重绘。":S=T.error.message)}catch{}throw new Error(S)}throw new Error("局部重绘时发生未知错误。")}}const Nw=({onSave:n,onCancel:e})=>{const[o,l]=ae.useState(null),[u,f]=ae.useState({x:0,y:0,size:100}),[d,h]=ae.useState({width:0,height:0}),[g,p]=ae.useState(!1),v=ae.useRef(null),C=ae.useRef(null),S=ae.useCallback(R=>{var H;const k=(H=R.target.files)==null?void 0:H[0];if(!k)return;const I=new FileReader;I.onload=A=>{var P,Y;const U=new Image;U.onload=()=>{h({width:U.width,height:U.height});const B=Math.min(U.width,U.height)*.8;f({x:(U.width-B)/2,y:(U.height-B)/2,size:B})},U.src=(P=A.target)==null?void 0:P.result,l((Y=A.target)==null?void 0:Y.result)},I.readAsDataURL(k)},[]),T=ae.useCallback(R=>{const k=d.width-R.size,I=d.height-R.size;f({x:Math.max(0,Math.min(k,R.x)),y:Math.max(0,Math.min(I,R.y)),size:Math.max(50,Math.min(Math.min(d.width,d.height),R.size))})},[d]),w=ae.useCallback(async()=>{if(!(!o||!C.current||g)){p(!0);try{const R=C.current,k=R.getContext("2d");if(!k)return;const I=new Image;I.onload=()=>{try{R.width=512,R.height=512,k.drawImage(I,u.x,u.y,u.size,u.size,0,0,512,512);const H=R.toDataURL("image/png",.9);n(H)}catch(H){console.error("裁剪图片失败:",H)}finally{p(!1)}},I.onerror=()=>{console.error("图片加载失败"),p(!1)},I.src=o}catch(R){console.error("处理图片失败:",R),p(!1)}}},[o,u,n,g]),_=320,N=o?Math.min(_/d.width,_/d.height):1;return ae.useEffect(()=>{(()=>{setTimeout(()=>{const k=document.querySelector('[data-modal="cover-uploader"]');k&&k.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},100)})()},[]),x.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-start justify-center pt-8 pb-8 px-4 overflow-y-auto",children:x.jsxs("div",{className:"bg-gray-900 rounded-xl p-4 max-w-md w-full my-auto","data-modal":"cover-uploader",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("h3",{className:"text-lg font-semibold text-white",children:"自定义功能封面"}),x.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors p-1 rounded-lg hover:bg-gray-700",title:"关闭",children:x.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o?x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden mx-auto",style:{width:Math.min(_,d.width*N),height:Math.min(_,d.height*N)},children:[x.jsx("img",{src:o,alt:"Preview",className:"w-full h-full object-contain cursor-crosshair",onClick:R=>{const k=R.currentTarget.getBoundingClientRect(),I=(R.clientX-k.left)/N,H=(R.clientY-k.top)/N,A=Math.max(0,Math.min(d.width-u.size,I-u.size/2)),U=Math.max(0,Math.min(d.height-u.size,H-u.size/2));T({...u,x:A,y:U})}}),x.jsx("div",{className:"absolute border-2 border-orange-500 bg-orange-500/20 cursor-move",style:{left:u.x*N,top:u.y*N,width:u.size*N,height:u.size*N},onMouseDown:R=>{R.preventDefault(),R.stopPropagation(),R.currentTarget.parentElement.getBoundingClientRect();const k=R.clientX,I=R.clientY,H=u.x,A=u.y,U=Y=>{Y.preventDefault();const B=(Y.clientX-k)/N,q=(Y.clientY-I)/N;T({...u,x:H+B,y:A+q})},P=()=>{document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",P)};document.addEventListener("mousemove",U),document.addEventListener("mouseup",P)},children:x.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white text-xs bg-black/30 rounded",children:"拖拽移动"})})]}),x.jsx("div",{className:"text-xs text-gray-400 text-center",children:"💡 点击图片设置裁剪中心，拖拽橙色框调整位置"}),x.jsxs("div",{className:"space-y-1",children:[x.jsx("label",{className:"text-sm text-gray-300",children:"裁剪大小"}),x.jsx("input",{type:"range",min:"50",max:Math.min(d.width,d.height),value:u.size,onChange:R=>T({...u,size:Number(R.target.value)}),className:"w-full accent-orange-500"})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:e,disabled:g,className:"flex-1 py-2 px-4 bg-gray-700 text-gray-200 rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"取消"}),x.jsx("button",{onClick:w,disabled:g,className:"flex-1 py-2 px-4 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:g?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"处理中..."]}):"保存"})]})]}):x.jsxs("div",{className:"text-center",children:[x.jsx("input",{ref:v,type:"file",accept:"image/*",onChange:S,className:"hidden"}),x.jsxs("button",{onClick:()=>{var R;return(R=v.current)==null?void 0:R.click()},className:"w-full py-8 px-4 border-2 border-dashed border-gray-600 rounded-lg hover:border-orange-500 transition-colors",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto mb-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),x.jsx("p",{className:"text-gray-300",children:"点击上传图片"})]})]}),x.jsx("canvas",{ref:C,className:"hidden"})]})})},Dw=({transformations:n,onSelect:e,hasPreviousResult:o,onOrderChange:l,onUpdatePrompt:u,onResetToDefault:f,onDeleteCustom:d,currentCustomPrompt:h,constantPrompts:g={},onUpdateConstantPrompt:p,getDisplayCover:v,hasCustomCover:C,onUpdateCustomCover:S,onRemoveCustomCover:T})=>{const w=ae.useRef(null),_=ae.useRef(null),[N,R]=ae.useState(!1),[k,I]=ae.useState({}),[H,A]=ae.useState({}),[U,P]=ae.useState({}),[Y,B]=ae.useState({}),[q,le]=ae.useState({}),[z,W]=ae.useState(null),M=(te,Ee)=>{w.current=Ee,R(!0),setTimeout(()=>{te.currentTarget.classList.add("opacity-40","scale-95")},0)},Z=(te,Ee)=>{_.current=Ee},O=te=>{if(R(!1),te.currentTarget.classList.remove("opacity-40","scale-95"),w.current!==null&&_.current!==null&&w.current!==_.current){const Ee=[...n],Ne=Ee.splice(w.current,1)[0];Ee.splice(_.current,0,Ne),l(Ee)}w.current=null,_.current=null},j=te=>{te.preventDefault()},Se=te=>{I(Ee=>({...Ee,[te]:!Ee[te]}))},de=te=>{const Ee=te.id||te.title;P(Le=>({...Le,[Ee]:!0}));const Ne=te.prompt==="CUSTOM"?h||"":te.prompt;A(Le=>({...Le,[Ee]:Ne}))},V=te=>{P(Ee=>({...Ee,[te]:!1})),A(Ee=>({...Ee,[te]:""}))},F=te=>{const Ee=te.id||te.title,Ne=H[Ee];Ne&&Ne.trim()&&u&&(u(Ee,Ne.trim()),P(Le=>({...Le,[Ee]:!1})),A(Le=>({...Le,[Ee]:""})))},J=te=>{const Ee=te.id||te.title;f&&f(Ee)},pe=te=>{const Ee=te.id||te.title;d&&te.isCustom&&d(Ee)},$=te=>{const Ee=te.id||te.title;le(Ne=>({...Ne,[Ee]:!0})),B(Ne=>({...Ne,[Ee]:g[Ee]||""}))},X=te=>{le(Ee=>({...Ee,[te]:!1})),B(Ee=>({...Ee,[te]:""}))},ne=te=>{const Ee=te.id||te.title,Ne=Y[Ee]||"";p&&(p(Ee,Ne),le(Le=>({...Le,[Ee]:!1})),B(Le=>({...Le,[Ee]:""})))},be=(te,Ee)=>{S&&S(te,Ee),W(null)},ve=te=>{T&&T(te)};return x.jsxs("div",{className:"container mx-auto p-4 md:p-8 animate-fade-in",children:[x.jsx("h2",{className:"text-3xl font-bold text-center mb-4 text-orange-500",children:"让我们疯狂一下！"}),x.jsx("p",{className:"text-lg text-center text-gray-400 mb-8 max-w-2xl mx-auto",children:o?"太有趣了！你的上一个作品已经准备好进行下一轮了。选择一个新效果来继续这个链条。":"准备好重新混合你的现实了吗？选择一个效果来开始魔法。你也可以拖拽来重新排序你最喜欢的效果。"}),x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((te,Ee)=>{const Ne=te.id||te.title,Le=k[Ne],qe=U[Ne],b=H[Ne]||te.prompt,ge=q[Ne],he=Y[Ne]||g[Ne]||"";return x.jsxs("div",{className:`bg-gray-950 rounded-xl border transition-all duration-200 ease-in-out transform hover:-translate-y-1 shadow-lg ${te.isPromptModified?"border-yellow-500 hover:border-yellow-400":"border-white/10 hover:border-orange-500"}`,children:[x.jsx("div",{className:"p-4 border-b border-white/10",children:x.jsxs("button",{draggable:!0,onDragStart:G=>M(G,Ee),onDragEnter:G=>Z(G,Ee),onDragEnd:O,onDragOver:j,onClick:()=>e(te),className:`w-full flex flex-col items-center justify-center text-center p-2 aspect-square hover:bg-gray-900/50 rounded-lg transition-all duration-200 cursor-grab active:cursor-grabbing ${N?"border-dashed":""} focus:outline-none focus:ring-2 focus:ring-orange-500`,children:[v&&C&&C(te)?x.jsx("div",{className:"w-32 h-32 mb-3 rounded-lg overflow-hidden border border-white/20 flex-shrink-0",children:x.jsx("img",{src:v(te),alt:te.title,className:"w-full h-full object-cover"})}):x.jsx("span",{className:"text-5xl mb-3",children:v?v(te):te.emoji}),x.jsx("span",{className:"font-semibold text-lg text-gray-200 text-center leading-tight",children:te.title})]})}),x.jsxs("div",{className:"p-3 space-y-2",children:[x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>Se(Ne),className:"flex-1 py-1 px-2 text-xs bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-md transition-colors duration-200 flex items-center justify-center gap-1",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),x.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),Le?"隐藏":"查看","提示词"]}),te.prompt!=="CUSTOM"&&!te.isCustom&&x.jsxs("button",{onClick:()=>J(te),className:`py-1 px-2 text-xs rounded-md transition-colors duration-200 flex items-center justify-center gap-1 ${te.isPromptModified?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-blue-600 hover:bg-blue-500 text-white"}`,title:te.isPromptModified?"已修改 - 恢复默认":"恢复默认",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),te.isPromptModified&&x.jsx("span",{className:"text-xs",children:"!"})]}),x.jsxs("button",{onClick:()=>W(Ne),className:"py-1 px-2 text-xs bg-purple-600 hover:bg-purple-500 text-white rounded-md transition-colors duration-200 flex items-center justify-center gap-1",title:"自定义封面",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),C&&C(te)?"更换":"封面"]}),C&&C(te)&&x.jsx("button",{onClick:()=>ve(Ne),className:"py-1 px-2 text-xs bg-gray-600 hover:bg-gray-500 text-white rounded-md transition-colors duration-200 flex items-center justify-center gap-1",title:"恢复默认",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})}),te.isCustom&&x.jsx("button",{onClick:()=>pe(te),className:"py-1 px-2 text-xs bg-red-600 hover:bg-red-500 text-white rounded-md transition-colors duration-200 flex items-center justify-center gap-1",title:"删除自定义",children:x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z",clipRule:"evenodd"}),x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})]})})]}),Le&&x.jsxs("div",{className:"mt-2 space-y-3",children:[x.jsxs("div",{className:"p-2 bg-gray-900/50 rounded-md border border-white/10",children:[x.jsx("div",{className:"flex items-center justify-between mb-2",children:x.jsxs("label",{className:"text-xs font-medium text-purple-300 flex items-center gap-1",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"常量提示词前缀"]})}),ge?x.jsxs("div",{className:"space-y-2",children:[x.jsx("textarea",{value:he,onChange:G=>B(L=>({...L,[Ne]:G.target.value})),className:"w-full text-xs p-2 bg-gray-800 border border-white/20 rounded text-gray-200 focus:ring-1 focus:ring-purple-500 focus:border-purple-500 resize-none",rows:2,placeholder:"输入常量提示词前缀..."}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>ne(te),className:"flex-1 py-1 px-2 text-xs bg-green-600 hover:bg-green-500 text-white rounded transition-colors duration-200",children:"保存"}),x.jsx("button",{onClick:()=>X(Ne),className:"flex-1 py-1 px-2 text-xs bg-gray-600 hover:bg-gray-500 text-white rounded transition-colors duration-200",children:"取消"})]})]}):x.jsxs("div",{children:[x.jsx("p",{className:"text-xs text-purple-200 mb-2 line-clamp-2 min-h-[2rem]",children:g[Ne]&&g[Ne].trim()?g[Ne].length>60?`${g[Ne].substring(0,60)}...`:g[Ne]:"未设置常量前缀"}),x.jsxs("button",{onClick:()=>$(te),className:"w-full py-1 px-2 text-xs bg-purple-600 hover:bg-purple-500 text-white rounded transition-colors duration-200 flex items-center justify-center gap-1",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),g[Ne]&&g[Ne].trim()?"编辑常量前缀":"设置常量前缀"]})]})]}),x.jsx("div",{className:"p-2 bg-gray-900/50 rounded-md border border-white/10",children:te.prompt==="CUSTOM"?qe?x.jsxs("div",{className:"space-y-2",children:[x.jsx("textarea",{value:b,onChange:G=>A(L=>({...L,[Ne]:G.target.value})),className:"w-full text-xs p-2 bg-gray-800 border border-white/20 rounded text-gray-200 focus:ring-1 focus:ring-orange-500 focus:border-orange-500 resize-none",rows:3,placeholder:"输入自定义提示词..."}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>F(te),className:"flex-1 py-1 px-2 text-xs bg-green-600 hover:bg-green-500 text-white rounded transition-colors duration-200",children:"保存"}),x.jsx("button",{onClick:()=>V(Ne),className:"flex-1 py-1 px-2 text-xs bg-gray-600 hover:bg-gray-500 text-white rounded transition-colors duration-200",children:"取消"})]})]}):x.jsxs("div",{children:[x.jsx("p",{className:"text-xs text-gray-300 mb-2 line-clamp-3",children:h&&h.trim()?h.length>100?`${h.substring(0,100)}...`:h:"点击下方按钮设置自定义提示词"}),x.jsxs("button",{onClick:()=>de(te),className:"w-full py-1 px-2 text-xs bg-orange-600 hover:bg-orange-500 text-white rounded transition-colors duration-200 flex items-center justify-center gap-1",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),h&&h.trim()?"编辑提示词":"设置提示词"]})]}):qe?x.jsxs("div",{className:"space-y-2",children:[x.jsx("textarea",{value:b,onChange:G=>A(L=>({...L,[Ne]:G.target.value})),className:"w-full text-xs p-2 bg-gray-800 border border-white/20 rounded text-gray-200 focus:ring-1 focus:ring-orange-500 focus:border-orange-500 resize-none",rows:3}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:()=>F(te),className:"flex-1 py-1 px-2 text-xs bg-green-600 hover:bg-green-500 text-white rounded transition-colors duration-200",children:"保存"}),x.jsx("button",{onClick:()=>V(Ne),className:"flex-1 py-1 px-2 text-xs bg-gray-600 hover:bg-gray-500 text-white rounded transition-colors duration-200",children:"取消"})]})]}):x.jsxs("div",{children:[x.jsx("p",{className:"text-xs text-gray-300 mb-2 line-clamp-3",children:te.prompt.length>100?`${te.prompt.substring(0,100)}...`:te.prompt}),x.jsxs("button",{onClick:()=>de(te),className:"w-full py-1 px-2 text-xs bg-orange-600 hover:bg-orange-500 text-white rounded transition-colors duration-200 flex items-center justify-center gap-1",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),"编辑提示词"]})]})})]})]})]},te.title)})}),z&&x.jsx(Nw,{onSave:te=>be(z,te),onCancel:()=>W(null)})]})};var xr={exports:{}},lp;function kw(){return lp||(lp=1,(function(n,e){(function(){var o={};o.version="1.0.4",o.remove=function(A){var U=!1;if(A.slice(0,2)!="ÿØ")if(A.slice(0,23)=="data:image/jpeg;base64,"||A.slice(0,22)=="data:image/jpg;base64,")A=S(A.split(",")[1]),U=!0;else throw new Error("Given data is not jpeg.");var P=N(A),Y=P.filter(function(q){return!(q.slice(0,2)=="ÿá"&&q.slice(4,10)=="Exif\0\0")}),B=Y.join("");return U&&(B="data:image/jpeg;base64,"+C(B)),B},o.insert=function(A,U){var P=!1;if(A.slice(0,6)!="Exif\0\0")throw new Error("Given data is not exif.");if(U.slice(0,2)!="ÿØ")if(U.slice(0,23)=="data:image/jpeg;base64,"||U.slice(0,22)=="data:image/jpg;base64,")U=S(U.split(",")[1]),P=!0;else throw new Error("Given data is not jpeg.");var Y="ÿá"+T(">H",[A.length+2])+A,B=N(U),q=k(B,Y);return P&&(q="data:image/jpeg;base64,"+C(q)),q},o.load=function(A){var U;if(typeof A=="string")if(A.slice(0,2)=="ÿØ")U=A;else if(A.slice(0,23)=="data:image/jpeg;base64,"||A.slice(0,22)=="data:image/jpg;base64,")U=S(A.split(",")[1]);else if(A.slice(0,4)=="Exif")U=A.slice(6);else throw new Error("'load' gots invalid file data.");else throw new Error("'load' gots invalid type argument.");var P={"0th":{},Exif:{},GPS:{},Interop:{},"1st":{},thumbnail:null},Y=new v(U);if(Y.tiftag===null)return P;Y.tiftag.slice(0,2)=="II"?Y.endian_mark="<":Y.endian_mark=">";var B=w(Y.endian_mark+"L",Y.tiftag.slice(4,8))[0];P["0th"]=Y.get_ifd(B,"0th");var q=P["0th"].first_ifd_pointer;if(delete P["0th"].first_ifd_pointer,34665 in P["0th"]&&(B=P["0th"][34665],P.Exif=Y.get_ifd(B,"Exif")),34853 in P["0th"]&&(B=P["0th"][34853],P.GPS=Y.get_ifd(B,"GPS")),40965 in P.Exif&&(B=P.Exif[40965],P.Interop=Y.get_ifd(B,"Interop")),q!="\0\0\0\0"&&(B=w(Y.endian_mark+"L",q)[0],P["1st"]=Y.get_ifd(B,"1st"),513 in P["1st"]&&514 in P["1st"])){var le=P["1st"][513]+P["1st"][514],z=Y.tiftag.slice(P["1st"][513],le);P.thumbnail=z}return P},o.dump=function(A){var U=8,P=l(A),Y="Exif\0\0MM\0*\0\0\0\b",B=!1,q=!1,le=!1,z=!1,W,M,Z,O,j;"0th"in P?W=P["0th"]:W={},"Exif"in P&&Object.keys(P.Exif).length||"Interop"in P&&Object.keys(P.Interop).length?(W[34665]=1,B=!0,M=P.Exif,"Interop"in P&&Object.keys(P.Interop).length?(M[40965]=1,le=!0,Z=P.Interop):Object.keys(M).indexOf(o.ExifIFD.InteroperabilityTag.toString())>-1&&delete M[40965]):Object.keys(W).indexOf(o.ImageIFD.ExifTag.toString())>-1&&delete W[34665],"GPS"in P&&Object.keys(P.GPS).length?(W[o.ImageIFD.GPSTag]=1,q=!0,O=P.GPS):Object.keys(W).indexOf(o.ImageIFD.GPSTag.toString())>-1&&delete W[o.ImageIFD.GPSTag],"1st"in P&&"thumbnail"in P&&P.thumbnail!=null&&(z=!0,P["1st"][513]=1,P["1st"][514]=1,j=P["1st"]);var Se=p(W,"0th",0),de=Se[0].length+B*12+q*12+4+Se[1].length,V,F="",J=0,pe,$="",X=0,ne,be="",ve=0,te,Ee="",Ne;if(B&&(V=p(M,"Exif",de),J=V[0].length+le*12+V[1].length),q&&(pe=p(O,"GPS",de+J),$=pe.join(""),X=$.length),le){var Le=de+J+X;ne=p(Z,"Interop",Le),be=ne.join(""),ve=be.length}if(z){var Le=de+J+X+ve;if(te=p(j,"1st",Le),Ne=u(P.thumbnail),Ne.length>64e3)throw new Error("Given thumbnail is too large. max 64kB")}var qe="",b="",ge="",he="\0\0\0\0";if(B){var G=U+de,L=T(">L",[G]),ee=34665,xe=T(">H",[ee]),Te=T(">H",[I.Long]),re=T(">L",[1]);qe=xe+Te+re+L}if(q){var G=U+de+J,L=T(">L",[G]),ee=34853,xe=T(">H",[ee]),Te=T(">H",[I.Long]),re=T(">L",[1]);b=xe+Te+re+L}if(le){var G=U+de+J+X,L=T(">L",[G]),ee=40965,xe=T(">H",[ee]),Te=T(">H",[I.Long]),re=T(">L",[1]);ge=xe+Te+re+L}if(z){var G=U+de+J+X+ve;he=T(">L",[G]);var Ae=G+te[0].length+24+4+te[1].length,De="\0\0\0\0"+T(">L",[Ae]),Me="\0\0\0\0"+T(">L",[Ne.length]);Ee=te[0]+De+Me+"\0\0\0\0"+te[1]+Ne}var Ue=Se[0]+qe+b+he+Se[1];return B&&(F=V[0]+ge+V[1]),Y+Ue+F+$+be+Ee};function l(A){return JSON.parse(JSON.stringify(A))}function u(A){for(var U=N(A);"ÿà"<=U[1].slice(0,2)&&U[1].slice(0,2)<="ÿï";)U=[U[0]].concat(U.slice(2));return U.join("")}function f(A){return T(">"+_("B",A.length),A)}function d(A){return T(">"+_("H",A.length),A)}function h(A){return T(">"+_("L",A.length),A)}function g(A,U,P){var Y="",B="",q,le,z,W;if(U=="Byte")q=A.length,q<=4?B=f(A)+_("\0",4-q):(B=T(">L",[P]),Y=f(A));else if(U=="Short")q=A.length,q<=2?B=d(A)+_("\0\0",2-q):(B=T(">L",[P]),Y=d(A));else if(U=="Long")q=A.length,q<=1?B=h(A):(B=T(">L",[P]),Y=h(A));else if(U=="Ascii")le=A+"\0",q=le.length,q>4?(B=T(">L",[P]),Y=le):B=le+_("\0",4-q);else if(U=="Rational"){if(typeof A[0]=="number")q=1,z=A[0],W=A[1],le=T(">L",[z])+T(">L",[W]);else{q=A.length,le="";for(var M=0;M<q;M++)z=A[M][0],W=A[M][1],le+=T(">L",[z])+T(">L",[W])}B=T(">L",[P]),Y=le}else if(U=="SRational"){if(typeof A[0]=="number")q=1,z=A[0],W=A[1],le=T(">l",[z])+T(">l",[W]);else{q=A.length,le="";for(var M=0;M<q;M++)z=A[M][0],W=A[M][1],le+=T(">l",[z])+T(">l",[W])}B=T(">L",[P]),Y=le}else U=="Undefined"&&(q=A.length,q>4?(B=T(">L",[P]),Y=A):B=A+_("\0",4-q));var Z=T(">L",[q]);return[Z,B,Y]}function p(A,U,P){var Y=8,B=Object.keys(A).length,q=T(">H",[B]),le;["0th","1st"].indexOf(U)>-1?le=2+B*12+4:le=2+B*12;var z="",W="",M;for(var M in A)if(typeof M=="string"&&(M=parseInt(M)),!(U=="0th"&&[34665,34853].indexOf(M)>-1)){{if(U=="Exif"&&M==40965)continue;if(U=="1st"&&[513,514].indexOf(M)>-1)continue}var Z=A[M],O=T(">H",[M]),j=H[U][M].type,Se=T(">H",[I[j]]);typeof Z=="number"&&(Z=[Z]);var de=Y+le+P+W.length,V=g(Z,j,de),F=V[0],J=V[1],pe=V[2];z+=O+Se+F+J,W+=pe}return[q+z,W]}function v(A){var U,P;if(A.slice(0,2)=="ÿØ")U=N(A),P=R(U),P?this.tiftag=P.slice(10):this.tiftag=null;else if(["II","MM"].indexOf(A.slice(0,2))>-1)this.tiftag=A;else if(A.slice(0,4)=="Exif")this.tiftag=A.slice(6);else throw new Error("Given file is neither JPEG nor TIFF.")}if(v.prototype={get_ifd:function(A,U){var P={},Y=w(this.endian_mark+"H",this.tiftag.slice(A,A+2))[0],B=A+2,q;["0th","1st"].indexOf(U)>-1?q="Image":q=U;for(var le=0;le<Y;le++){A=B+12*le;var z=w(this.endian_mark+"H",this.tiftag.slice(A,A+2))[0],W=w(this.endian_mark+"H",this.tiftag.slice(A+2,A+4))[0],M=w(this.endian_mark+"L",this.tiftag.slice(A+4,A+8))[0],Z=this.tiftag.slice(A+8,A+12),O=[W,M,Z];z in H[q]&&(P[z]=this.convert_value(O))}return U=="0th"&&(A=B+12*Y,P.first_ifd_pointer=this.tiftag.slice(A,A+4)),P},convert_value:function(A){var U=null,P=A[0],Y=A[1],B=A[2],q;if(P==1)Y>4?(q=w(this.endian_mark+"L",B)[0],U=w(this.endian_mark+_("B",Y),this.tiftag.slice(q,q+Y))):U=w(this.endian_mark+_("B",Y),B.slice(0,Y));else if(P==2)Y>4?(q=w(this.endian_mark+"L",B)[0],U=this.tiftag.slice(q,q+Y-1)):U=B.slice(0,Y-1);else if(P==3)Y>2?(q=w(this.endian_mark+"L",B)[0],U=w(this.endian_mark+_("H",Y),this.tiftag.slice(q,q+Y*2))):U=w(this.endian_mark+_("H",Y),B.slice(0,Y*2));else if(P==4)Y>1?(q=w(this.endian_mark+"L",B)[0],U=w(this.endian_mark+_("L",Y),this.tiftag.slice(q,q+Y*4))):U=w(this.endian_mark+_("L",Y),B);else if(P==5)if(q=w(this.endian_mark+"L",B)[0],Y>1){U=[];for(var le=0;le<Y;le++)U.push([w(this.endian_mark+"L",this.tiftag.slice(q+le*8,q+4+le*8))[0],w(this.endian_mark+"L",this.tiftag.slice(q+4+le*8,q+8+le*8))[0]])}else U=[w(this.endian_mark+"L",this.tiftag.slice(q,q+4))[0],w(this.endian_mark+"L",this.tiftag.slice(q+4,q+8))[0]];else if(P==7)Y>4?(q=w(this.endian_mark+"L",B)[0],U=this.tiftag.slice(q,q+Y)):U=B.slice(0,Y);else if(P==9)Y>1?(q=w(this.endian_mark+"L",B)[0],U=w(this.endian_mark+_("l",Y),this.tiftag.slice(q,q+Y*4))):U=w(this.endian_mark+_("l",Y),B);else if(P==10)if(q=w(this.endian_mark+"L",B)[0],Y>1){U=[];for(var le=0;le<Y;le++)U.push([w(this.endian_mark+"l",this.tiftag.slice(q+le*8,q+4+le*8))[0],w(this.endian_mark+"l",this.tiftag.slice(q+4+le*8,q+8+le*8))[0]])}else U=[w(this.endian_mark+"l",this.tiftag.slice(q,q+4))[0],w(this.endian_mark+"l",this.tiftag.slice(q+4,q+8))[0]];else throw new Error("Exif might be wrong. Got incorrect value type to decode. type:"+P);return U instanceof Array&&U.length==1?U[0]:U}},typeof window<"u"&&typeof window.btoa=="function")var C=window.btoa;if(typeof C>"u")var C=function(U){for(var P="",Y,B,q,le,z,W,M,Z=0,O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Z<U.length;)Y=U.charCodeAt(Z++),B=U.charCodeAt(Z++),q=U.charCodeAt(Z++),le=Y>>2,z=(Y&3)<<4|B>>4,W=(B&15)<<2|q>>6,M=q&63,isNaN(B)?W=M=64:isNaN(q)&&(M=64),P=P+O.charAt(le)+O.charAt(z)+O.charAt(W)+O.charAt(M);return P};if(typeof window<"u"&&typeof window.atob=="function")var S=window.atob;if(typeof S>"u")var S=function(U){var P="",Y,B,q,le,z,W,M,Z=0,O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(U=U.replace(/[^A-Za-z0-9\+\/\=]/g,"");Z<U.length;)le=O.indexOf(U.charAt(Z++)),z=O.indexOf(U.charAt(Z++)),W=O.indexOf(U.charAt(Z++)),M=O.indexOf(U.charAt(Z++)),Y=le<<2|z>>4,B=(z&15)<<4|W>>2,q=(W&3)<<6|M,P=P+String.fromCharCode(Y),W!=64&&(P=P+String.fromCharCode(B)),M!=64&&(P=P+String.fromCharCode(q));return P};function T(A,U){if(!(U instanceof Array))throw new Error("'pack' error. Got invalid type argument.");if(A.length-1!=U.length)throw new Error("'pack' error. "+(A.length-1)+" marks, "+U.length+" elements.");var P;if(A[0]=="<")P=!0;else if(A[0]==">")P=!1;else throw new Error("");for(var Y="",B=1,q=null,le=null,z=null;le=A[B];){if(le.toLowerCase()=="b"){if(q=U[B-1],le=="b"&&q<0&&(q+=256),q>255||q<0)throw new Error("'pack' error.");z=String.fromCharCode(q)}else if(le=="H"){if(q=U[B-1],q>65535||q<0)throw new Error("'pack' error.");z=String.fromCharCode(Math.floor(q%65536/256))+String.fromCharCode(q%256),P&&(z=z.split("").reverse().join(""))}else if(le.toLowerCase()=="l"){if(q=U[B-1],le=="l"&&q<0&&(q+=4294967296),q>4294967295||q<0)throw new Error("'pack' error.");z=String.fromCharCode(Math.floor(q/16777216))+String.fromCharCode(Math.floor(q%16777216/65536))+String.fromCharCode(Math.floor(q%65536/256))+String.fromCharCode(q%256),P&&(z=z.split("").reverse().join(""))}else throw new Error("'pack' error.");Y+=z,B+=1}return Y}function w(A,U){if(typeof U!="string")throw new Error("'unpack' error. Got invalid type argument.");for(var P=0,Y=1;Y<A.length;Y++)if(A[Y].toLowerCase()=="b")P+=1;else if(A[Y].toLowerCase()=="h")P+=2;else if(A[Y].toLowerCase()=="l")P+=4;else throw new Error("'unpack' error. Got invalid mark.");if(P!=U.length)throw new Error("'unpack' error. Mismatch between symbol and string length. "+P+":"+U.length);var B;if(A[0]=="<")B=!0;else if(A[0]==">")B=!1;else throw new Error("'unpack' error.");for(var q=[],le=0,z=1,W=null,M=null,Z=null,O="";M=A[z];){if(M.toLowerCase()=="b")Z=1,O=U.slice(le,le+Z),W=O.charCodeAt(0),M=="b"&&W>=128&&(W-=256);else if(M=="H")Z=2,O=U.slice(le,le+Z),B&&(O=O.split("").reverse().join("")),W=O.charCodeAt(0)*256+O.charCodeAt(1);else if(M.toLowerCase()=="l")Z=4,O=U.slice(le,le+Z),B&&(O=O.split("").reverse().join("")),W=O.charCodeAt(0)*16777216+O.charCodeAt(1)*65536+O.charCodeAt(2)*256+O.charCodeAt(3),M=="l"&&W>=2147483648&&(W-=4294967296);else throw new Error("'unpack' error. "+M);q.push(W),le+=Z,z+=1}return q}function _(A,U){for(var P="",Y=0;Y<U;Y++)P+=A;return P}function N(A){if(A.slice(0,2)!="ÿØ")throw new Error("Given data isn't JPEG.");for(var U=2,P=["ÿØ"];;){if(A.slice(U,U+2)=="ÿÚ"){P.push(A.slice(U));break}else{var Y=w(">H",A.slice(U+2,U+4))[0],B=U+Y+2;P.push(A.slice(U,B)),U=B}if(U>=A.length)throw new Error("Wrong JPEG data.")}return P}function R(A){for(var U,P=0;P<A.length;P++)if(U=A[P],U.slice(0,2)=="ÿá"&&U.slice(4,10)=="Exif\0\0")return U;return null}function k(A,U){var P=!1,Y=[];return A.forEach(function(B,q){B.slice(0,2)=="ÿá"&&B.slice(4,10)=="Exif\0\0"&&(P?Y.unshift(q):(A[q]=U,P=!0))}),Y.forEach(function(B){A.splice(B,1)}),!P&&U&&(A=[A[0],U].concat(A.slice(1))),A.join("")}var I={Byte:1,Ascii:2,Short:3,Long:4,Rational:5,Undefined:7,SLong:9,SRational:10},H={Image:{11:{name:"ProcessingSoftware",type:"Ascii"},254:{name:"NewSubfileType",type:"Long"},255:{name:"SubfileType",type:"Short"},256:{name:"ImageWidth",type:"Long"},257:{name:"ImageLength",type:"Long"},258:{name:"BitsPerSample",type:"Short"},259:{name:"Compression",type:"Short"},262:{name:"PhotometricInterpretation",type:"Short"},263:{name:"Threshholding",type:"Short"},264:{name:"CellWidth",type:"Short"},265:{name:"CellLength",type:"Short"},266:{name:"FillOrder",type:"Short"},269:{name:"DocumentName",type:"Ascii"},270:{name:"ImageDescription",type:"Ascii"},271:{name:"Make",type:"Ascii"},272:{name:"Model",type:"Ascii"},273:{name:"StripOffsets",type:"Long"},274:{name:"Orientation",type:"Short"},277:{name:"SamplesPerPixel",type:"Short"},278:{name:"RowsPerStrip",type:"Long"},279:{name:"StripByteCounts",type:"Long"},282:{name:"XResolution",type:"Rational"},283:{name:"YResolution",type:"Rational"},284:{name:"PlanarConfiguration",type:"Short"},290:{name:"GrayResponseUnit",type:"Short"},291:{name:"GrayResponseCurve",type:"Short"},292:{name:"T4Options",type:"Long"},293:{name:"T6Options",type:"Long"},296:{name:"ResolutionUnit",type:"Short"},301:{name:"TransferFunction",type:"Short"},305:{name:"Software",type:"Ascii"},306:{name:"DateTime",type:"Ascii"},315:{name:"Artist",type:"Ascii"},316:{name:"HostComputer",type:"Ascii"},317:{name:"Predictor",type:"Short"},318:{name:"WhitePoint",type:"Rational"},319:{name:"PrimaryChromaticities",type:"Rational"},320:{name:"ColorMap",type:"Short"},321:{name:"HalftoneHints",type:"Short"},322:{name:"TileWidth",type:"Short"},323:{name:"TileLength",type:"Short"},324:{name:"TileOffsets",type:"Short"},325:{name:"TileByteCounts",type:"Short"},330:{name:"SubIFDs",type:"Long"},332:{name:"InkSet",type:"Short"},333:{name:"InkNames",type:"Ascii"},334:{name:"NumberOfInks",type:"Short"},336:{name:"DotRange",type:"Byte"},337:{name:"TargetPrinter",type:"Ascii"},338:{name:"ExtraSamples",type:"Short"},339:{name:"SampleFormat",type:"Short"},340:{name:"SMinSampleValue",type:"Short"},341:{name:"SMaxSampleValue",type:"Short"},342:{name:"TransferRange",type:"Short"},343:{name:"ClipPath",type:"Byte"},344:{name:"XClipPathUnits",type:"Long"},345:{name:"YClipPathUnits",type:"Long"},346:{name:"Indexed",type:"Short"},347:{name:"JPEGTables",type:"Undefined"},351:{name:"OPIProxy",type:"Short"},512:{name:"JPEGProc",type:"Long"},513:{name:"JPEGInterchangeFormat",type:"Long"},514:{name:"JPEGInterchangeFormatLength",type:"Long"},515:{name:"JPEGRestartInterval",type:"Short"},517:{name:"JPEGLosslessPredictors",type:"Short"},518:{name:"JPEGPointTransforms",type:"Short"},519:{name:"JPEGQTables",type:"Long"},520:{name:"JPEGDCTables",type:"Long"},521:{name:"JPEGACTables",type:"Long"},529:{name:"YCbCrCoefficients",type:"Rational"},530:{name:"YCbCrSubSampling",type:"Short"},531:{name:"YCbCrPositioning",type:"Short"},532:{name:"ReferenceBlackWhite",type:"Rational"},700:{name:"XMLPacket",type:"Byte"},18246:{name:"Rating",type:"Short"},18249:{name:"RatingPercent",type:"Short"},32781:{name:"ImageID",type:"Ascii"},33421:{name:"CFARepeatPatternDim",type:"Short"},33422:{name:"CFAPattern",type:"Byte"},33423:{name:"BatteryLevel",type:"Rational"},33432:{name:"Copyright",type:"Ascii"},33434:{name:"ExposureTime",type:"Rational"},34377:{name:"ImageResources",type:"Byte"},34665:{name:"ExifTag",type:"Long"},34675:{name:"InterColorProfile",type:"Undefined"},34853:{name:"GPSTag",type:"Long"},34857:{name:"Interlace",type:"Short"},34858:{name:"TimeZoneOffset",type:"Long"},34859:{name:"SelfTimerMode",type:"Short"},37387:{name:"FlashEnergy",type:"Rational"},37388:{name:"SpatialFrequencyResponse",type:"Undefined"},37389:{name:"Noise",type:"Undefined"},37390:{name:"FocalPlaneXResolution",type:"Rational"},37391:{name:"FocalPlaneYResolution",type:"Rational"},37392:{name:"FocalPlaneResolutionUnit",type:"Short"},37393:{name:"ImageNumber",type:"Long"},37394:{name:"SecurityClassification",type:"Ascii"},37395:{name:"ImageHistory",type:"Ascii"},37397:{name:"ExposureIndex",type:"Rational"},37398:{name:"TIFFEPStandardID",type:"Byte"},37399:{name:"SensingMethod",type:"Short"},40091:{name:"XPTitle",type:"Byte"},40092:{name:"XPComment",type:"Byte"},40093:{name:"XPAuthor",type:"Byte"},40094:{name:"XPKeywords",type:"Byte"},40095:{name:"XPSubject",type:"Byte"},50341:{name:"PrintImageMatching",type:"Undefined"},50706:{name:"DNGVersion",type:"Byte"},50707:{name:"DNGBackwardVersion",type:"Byte"},50708:{name:"UniqueCameraModel",type:"Ascii"},50709:{name:"LocalizedCameraModel",type:"Byte"},50710:{name:"CFAPlaneColor",type:"Byte"},50711:{name:"CFALayout",type:"Short"},50712:{name:"LinearizationTable",type:"Short"},50713:{name:"BlackLevelRepeatDim",type:"Short"},50714:{name:"BlackLevel",type:"Rational"},50715:{name:"BlackLevelDeltaH",type:"SRational"},50716:{name:"BlackLevelDeltaV",type:"SRational"},50717:{name:"WhiteLevel",type:"Short"},50718:{name:"DefaultScale",type:"Rational"},50719:{name:"DefaultCropOrigin",type:"Short"},50720:{name:"DefaultCropSize",type:"Short"},50721:{name:"ColorMatrix1",type:"SRational"},50722:{name:"ColorMatrix2",type:"SRational"},50723:{name:"CameraCalibration1",type:"SRational"},50724:{name:"CameraCalibration2",type:"SRational"},50725:{name:"ReductionMatrix1",type:"SRational"},50726:{name:"ReductionMatrix2",type:"SRational"},50727:{name:"AnalogBalance",type:"Rational"},50728:{name:"AsShotNeutral",type:"Short"},50729:{name:"AsShotWhiteXY",type:"Rational"},50730:{name:"BaselineExposure",type:"SRational"},50731:{name:"BaselineNoise",type:"Rational"},50732:{name:"BaselineSharpness",type:"Rational"},50733:{name:"BayerGreenSplit",type:"Long"},50734:{name:"LinearResponseLimit",type:"Rational"},50735:{name:"CameraSerialNumber",type:"Ascii"},50736:{name:"LensInfo",type:"Rational"},50737:{name:"ChromaBlurRadius",type:"Rational"},50738:{name:"AntiAliasStrength",type:"Rational"},50739:{name:"ShadowScale",type:"SRational"},50740:{name:"DNGPrivateData",type:"Byte"},50741:{name:"MakerNoteSafety",type:"Short"},50778:{name:"CalibrationIlluminant1",type:"Short"},50779:{name:"CalibrationIlluminant2",type:"Short"},50780:{name:"BestQualityScale",type:"Rational"},50781:{name:"RawDataUniqueID",type:"Byte"},50827:{name:"OriginalRawFileName",type:"Byte"},50828:{name:"OriginalRawFileData",type:"Undefined"},50829:{name:"ActiveArea",type:"Short"},50830:{name:"MaskedAreas",type:"Short"},50831:{name:"AsShotICCProfile",type:"Undefined"},50832:{name:"AsShotPreProfileMatrix",type:"SRational"},50833:{name:"CurrentICCProfile",type:"Undefined"},50834:{name:"CurrentPreProfileMatrix",type:"SRational"},50879:{name:"ColorimetricReference",type:"Short"},50931:{name:"CameraCalibrationSignature",type:"Byte"},50932:{name:"ProfileCalibrationSignature",type:"Byte"},50934:{name:"AsShotProfileName",type:"Byte"},50935:{name:"NoiseReductionApplied",type:"Rational"},50936:{name:"ProfileName",type:"Byte"},50937:{name:"ProfileHueSatMapDims",type:"Long"},50938:{name:"ProfileHueSatMapData1",type:"Float"},50939:{name:"ProfileHueSatMapData2",type:"Float"},50940:{name:"ProfileToneCurve",type:"Float"},50941:{name:"ProfileEmbedPolicy",type:"Long"},50942:{name:"ProfileCopyright",type:"Byte"},50964:{name:"ForwardMatrix1",type:"SRational"},50965:{name:"ForwardMatrix2",type:"SRational"},50966:{name:"PreviewApplicationName",type:"Byte"},50967:{name:"PreviewApplicationVersion",type:"Byte"},50968:{name:"PreviewSettingsName",type:"Byte"},50969:{name:"PreviewSettingsDigest",type:"Byte"},50970:{name:"PreviewColorSpace",type:"Long"},50971:{name:"PreviewDateTime",type:"Ascii"},50972:{name:"RawImageDigest",type:"Undefined"},50973:{name:"OriginalRawFileDigest",type:"Undefined"},50974:{name:"SubTileBlockSize",type:"Long"},50975:{name:"RowInterleaveFactor",type:"Long"},50981:{name:"ProfileLookTableDims",type:"Long"},50982:{name:"ProfileLookTableData",type:"Float"},51008:{name:"OpcodeList1",type:"Undefined"},51009:{name:"OpcodeList2",type:"Undefined"},51022:{name:"OpcodeList3",type:"Undefined"}},Exif:{33434:{name:"ExposureTime",type:"Rational"},33437:{name:"FNumber",type:"Rational"},34850:{name:"ExposureProgram",type:"Short"},34852:{name:"SpectralSensitivity",type:"Ascii"},34855:{name:"ISOSpeedRatings",type:"Short"},34856:{name:"OECF",type:"Undefined"},34864:{name:"SensitivityType",type:"Short"},34865:{name:"StandardOutputSensitivity",type:"Long"},34866:{name:"RecommendedExposureIndex",type:"Long"},34867:{name:"ISOSpeed",type:"Long"},34868:{name:"ISOSpeedLatitudeyyy",type:"Long"},34869:{name:"ISOSpeedLatitudezzz",type:"Long"},36864:{name:"ExifVersion",type:"Undefined"},36867:{name:"DateTimeOriginal",type:"Ascii"},36868:{name:"DateTimeDigitized",type:"Ascii"},37121:{name:"ComponentsConfiguration",type:"Undefined"},37122:{name:"CompressedBitsPerPixel",type:"Rational"},37377:{name:"ShutterSpeedValue",type:"SRational"},37378:{name:"ApertureValue",type:"Rational"},37379:{name:"BrightnessValue",type:"SRational"},37380:{name:"ExposureBiasValue",type:"SRational"},37381:{name:"MaxApertureValue",type:"Rational"},37382:{name:"SubjectDistance",type:"Rational"},37383:{name:"MeteringMode",type:"Short"},37384:{name:"LightSource",type:"Short"},37385:{name:"Flash",type:"Short"},37386:{name:"FocalLength",type:"Rational"},37396:{name:"SubjectArea",type:"Short"},37500:{name:"MakerNote",type:"Undefined"},37510:{name:"UserComment",type:"Ascii"},37520:{name:"SubSecTime",type:"Ascii"},37521:{name:"SubSecTimeOriginal",type:"Ascii"},37522:{name:"SubSecTimeDigitized",type:"Ascii"},40960:{name:"FlashpixVersion",type:"Undefined"},40961:{name:"ColorSpace",type:"Short"},40962:{name:"PixelXDimension",type:"Long"},40963:{name:"PixelYDimension",type:"Long"},40964:{name:"RelatedSoundFile",type:"Ascii"},40965:{name:"InteroperabilityTag",type:"Long"},41483:{name:"FlashEnergy",type:"Rational"},41484:{name:"SpatialFrequencyResponse",type:"Undefined"},41486:{name:"FocalPlaneXResolution",type:"Rational"},41487:{name:"FocalPlaneYResolution",type:"Rational"},41488:{name:"FocalPlaneResolutionUnit",type:"Short"},41492:{name:"SubjectLocation",type:"Short"},41493:{name:"ExposureIndex",type:"Rational"},41495:{name:"SensingMethod",type:"Short"},41728:{name:"FileSource",type:"Undefined"},41729:{name:"SceneType",type:"Undefined"},41730:{name:"CFAPattern",type:"Undefined"},41985:{name:"CustomRendered",type:"Short"},41986:{name:"ExposureMode",type:"Short"},41987:{name:"WhiteBalance",type:"Short"},41988:{name:"DigitalZoomRatio",type:"Rational"},41989:{name:"FocalLengthIn35mmFilm",type:"Short"},41990:{name:"SceneCaptureType",type:"Short"},41991:{name:"GainControl",type:"Short"},41992:{name:"Contrast",type:"Short"},41993:{name:"Saturation",type:"Short"},41994:{name:"Sharpness",type:"Short"},41995:{name:"DeviceSettingDescription",type:"Undefined"},41996:{name:"SubjectDistanceRange",type:"Short"},42016:{name:"ImageUniqueID",type:"Ascii"},42032:{name:"CameraOwnerName",type:"Ascii"},42033:{name:"BodySerialNumber",type:"Ascii"},42034:{name:"LensSpecification",type:"Rational"},42035:{name:"LensMake",type:"Ascii"},42036:{name:"LensModel",type:"Ascii"},42037:{name:"LensSerialNumber",type:"Ascii"},42240:{name:"Gamma",type:"Rational"}},GPS:{0:{name:"GPSVersionID",type:"Byte"},1:{name:"GPSLatitudeRef",type:"Ascii"},2:{name:"GPSLatitude",type:"Rational"},3:{name:"GPSLongitudeRef",type:"Ascii"},4:{name:"GPSLongitude",type:"Rational"},5:{name:"GPSAltitudeRef",type:"Byte"},6:{name:"GPSAltitude",type:"Rational"},7:{name:"GPSTimeStamp",type:"Rational"},8:{name:"GPSSatellites",type:"Ascii"},9:{name:"GPSStatus",type:"Ascii"},10:{name:"GPSMeasureMode",type:"Ascii"},11:{name:"GPSDOP",type:"Rational"},12:{name:"GPSSpeedRef",type:"Ascii"},13:{name:"GPSSpeed",type:"Rational"},14:{name:"GPSTrackRef",type:"Ascii"},15:{name:"GPSTrack",type:"Rational"},16:{name:"GPSImgDirectionRef",type:"Ascii"},17:{name:"GPSImgDirection",type:"Rational"},18:{name:"GPSMapDatum",type:"Ascii"},19:{name:"GPSDestLatitudeRef",type:"Ascii"},20:{name:"GPSDestLatitude",type:"Rational"},21:{name:"GPSDestLongitudeRef",type:"Ascii"},22:{name:"GPSDestLongitude",type:"Rational"},23:{name:"GPSDestBearingRef",type:"Ascii"},24:{name:"GPSDestBearing",type:"Rational"},25:{name:"GPSDestDistanceRef",type:"Ascii"},26:{name:"GPSDestDistance",type:"Rational"},27:{name:"GPSProcessingMethod",type:"Undefined"},28:{name:"GPSAreaInformation",type:"Undefined"},29:{name:"GPSDateStamp",type:"Ascii"},30:{name:"GPSDifferential",type:"Short"},31:{name:"GPSHPositioningError",type:"Rational"}},Interop:{1:{name:"InteroperabilityIndex",type:"Ascii"}}};H["0th"]=H.Image,H["1st"]=H.Image,o.TAGS=H,o.ImageIFD={ProcessingSoftware:11,NewSubfileType:254,SubfileType:255,ImageWidth:256,ImageLength:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Threshholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,XResolution:282,YResolution:283,PlanarConfiguration:284,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,TransferFunction:301,Software:305,DateTime:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,SubIFDs:330,InkSet:332,InkNames:333,NumberOfInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,JPEGProc:512,JPEGInterchangeFormat:513,JPEGInterchangeFormatLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,XMLPacket:700,Rating:18246,RatingPercent:18249,ImageID:32781,CFARepeatPatternDim:33421,CFAPattern:33422,BatteryLevel:33423,Copyright:33432,ExposureTime:33434,ImageResources:34377,ExifTag:34665,InterColorProfile:34675,GPSTag:34853,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,ExposureIndex:37397,TIFFEPStandardID:37398,SensingMethod:37399,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,PrintImageMatching:50341,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,LensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,CameraCalibrationSignature:50931,ProfileCalibrationSignature:50932,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041},o.ExifIFD={ExposureTime:33434,FNumber:33437,ExposureProgram:34850,SpectralSensitivity:34852,ISOSpeedRatings:34855,OECF:34856,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,ExifVersion:36864,DateTimeOriginal:36867,DateTimeDigitized:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureBiasValue:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,SubjectArea:37396,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,FlashpixVersion:40960,ColorSpace:40961,PixelXDimension:40962,PixelYDimension:40963,RelatedSoundFile:40964,InteroperabilityTag:40965,FlashEnergy:41483,SpatialFrequencyResponse:41484,FocalPlaneXResolution:41486,FocalPlaneYResolution:41487,FocalPlaneResolutionUnit:41488,SubjectLocation:41492,ExposureIndex:41493,SensingMethod:41495,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFilm:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,CameraOwnerName:42032,BodySerialNumber:42033,LensSpecification:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,Gamma:42240},o.GPSIFD={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},o.InteropIFD={InteroperabilityIndex:1},o.GPSHelper={degToDmsRational:function(A){var U=Math.abs(A),P=U%1*60,Y=P%1*60,B=Math.floor(U),q=Math.floor(P),le=Math.round(Y*100);return[[B,1],[q,1],[le,100]]},dmsRationalToDeg:function(A,U){var P=U==="S"||U==="W"?-1:1,Y=A[0][0]/A[0][1]+A[1][0]/A[1][1]/60+A[2][0]/A[2][1]/3600;return Y*P}},n.exports&&(e=n.exports=o),e.piexif=o})()})(xr,xr.exports)),xr.exports}var Ri=kw();async function wr(n,e){try{const o=document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("无法创建Canvas上下文");const u=new Image;return u.crossOrigin="anonymous",new Promise((f,d)=>{u.onload=()=>{try{o.width=u.width,o.height=u.height,l.drawImage(u,0,0);let h=o.toDataURL("image/png");const g={...e,generator:"魔改版Nano-Bananary",timestamp:new Date().toISOString()};console.log("准备写入的元数据:",g),h=Iw(h,g),console.log("PNG tEXt chunk元数据写入成功"),f(h)}catch(h){console.error("PNG元数据处理错误:",h),f(n)}},u.onerror=()=>d(new Error("图片加载失败")),u.src=n})}catch(o){return console.error("嵌入PNG元数据失败:",o),n}}function Iw(n,e){try{const o=n.split(",")[1],l=atob(o),u=new Uint8Array(l.length);for(let S=0;S<l.length;S++)u[S]=l.charCodeAt(S);const f=[137,80,78,71,13,10,26,10];for(let S=0;S<8;S++)if(u[S]!==f[S])throw new Error("不是有效的PNG文件");const d=[];e.prompt&&d.push(Ol("prompt",e.prompt)),e.style&&d.push(Ol("style",e.style)),d.push(Ol("generator",e.generator||"魔改版Nano-Bananary")),e.timestamp&&d.push(Ol("timestamp",e.timestamp)),d.push(Ol("metadata",JSON.stringify(e)));let h=-1;for(let S=u.length-12;S>=8;S--)if(u[S+4]===73&&u[S+5]===69&&u[S+6]===78&&u[S+7]===68){h=S;break}if(h===-1)return console.error("找不到IEND chunk"),n;console.log(`找到IEND chunk位置: ${h}`);const g=new Uint8Array(u.length+d.reduce((S,T)=>S+T.length,0));g.set(u.subarray(0,h));let p=h;for(const S of d)g.set(S,p),p+=S.length;g.set(u.subarray(h),p);let v="";for(let S=0;S<g.length;S++)v+=String.fromCharCode(g[S]);return`data:image/png;base64,${btoa(v)}`}catch(o){return console.error("PNG tEXt chunk写入失败:",o),n}}function Ol(n,e){const o=new TextEncoder().encode(n),l=new TextEncoder().encode(e),u=o.length+1+l.length,f=new Uint8Array(12+u);new DataView(f.buffer,0,4).setUint32(0,u,!1),f[4]=116,f[5]=69,f[6]=88,f[7]=116,f.set(o,8),f[8+o.length]=0,f.set(l,8+o.length+1);const h=Uw(f.subarray(4,8+u));return new DataView(f.buffer,8+u,4).setUint32(0,h,!1),f}function Uw(n){const e=new Array(256);for(let l=0;l<256;l++){let u=l;for(let f=0;f<8;f++)u=u&1?3988292384^u>>>1:u>>>1;e[l]=u}let o=4294967295;for(let l=0;l<n.length;l++)o=e[(o^n[l])&255]^o>>>8;return(o^4294967295)>>>0}async function Pw(n){try{let e={};if(n.startsWith("data:image/png"))try{const o=Lw(n);o&&Object.keys(o).length>0&&(e={...e,...o},console.log("从PNG tEXt chunk读取到元数据:",o))}catch{console.log("PNG tEXt chunk读取失败，尝试其他方法")}if(Object.keys(e).length===0&&n.startsWith("data:image/jpeg"))try{const o=Ri.load(n);if(o["0th"]&&o["0th"][Ri.ImageIFD.ImageDescription]&&(e.prompt=o["0th"][Ri.ImageIFD.ImageDescription]),o["0th"]&&o["0th"][Ri.ImageIFD.Software]){const l=o["0th"][Ri.ImageIFD.Software];if(l.includes("魔改版Nano-Bananary")||l.includes("Nano-Bananary-ZHO")){const u=l.match(/\((.+)\)/);u&&(e.style=u[1])}}if(o.Exif&&o.Exif[Ri.ExifIFD.UserComment])try{const l=Ri.helper.UserCommentDecode(o.Exif[Ri.ExifIFD.UserComment]),u=JSON.parse(l);e={...e,...u}}catch{}Object.keys(e).length>0&&console.log("从JPEG EXIF读取到元数据:",e)}catch{console.log("EXIF读取失败，尝试其他方法")}return Object.keys(e).length>0?e:null}catch(e){return console.error("提取元数据失败:",e),null}}function Lw(n){try{console.log("开始解析PNG tEXt chunks...");const e=n.split(",")[1],o=atob(e),l=new Uint8Array(o.length);for(let g=0;g<o.length;g++)l[g]=o.charCodeAt(g);console.log(`PNG文件大小: ${l.length} 字节`);const u=[137,80,78,71,13,10,26,10];for(let g=0;g<8;g++)if(l[g]!==u[g])throw console.log(`PNG签名验证失败，位置${g}: 期望${u[g]}, 实际${l[g]}`),new Error("不是有效的PNG文件");console.log("PNG签名验证通过");const f={};let d=8,h=0;for(;d<l.length-12;){const p=new DataView(l.buffer,d,4).getUint32(0,!1),v=String.fromCharCode(l[d+4],l[d+5],l[d+6],l[d+7]);if(console.log(`Chunk ${h}: 类型=${v}, 长度=${p}, 位置=${d}`),h++,v==="tEXt"){console.log("找到tEXt chunk，开始解析...");const C=l.subarray(d+8,d+8+p);let S=-1;for(let T=0;T<C.length;T++)if(C[T]===0){S=T;break}if(S!==-1){const T=new TextDecoder().decode(C.subarray(0,S)),w=new TextDecoder().decode(C.subarray(S+1));switch(console.log(`tEXt chunk: ${T} = ${w}`),T){case"prompt":f.prompt=w;break;case"style":f.style=w;break;case"generator":break;case"timestamp":f.timestamp=w;break;case"metadata":try{const _=JSON.parse(w);Object.assign(f,_)}catch{console.log("JSON元数据解析失败")}break}}}if(d+=8+p+4,v==="IEND")break}return console.log("PNG解析完成，找到的元数据:",f),Object.keys(f).length>0?f:null}catch(e){return console.error("PNG tEXt chunk解析失败:",e),null}}async function Jl(n,e,o){try{const l=await wr(n,e),u=new Date().toISOString().slice(0,19).replace(/[:-]/g,""),f=e.style?`_${e.style.replace(/[^a-zA-Z0-9\u4e00-\u9fa5]/g,"")}`:"",d=`${o}${f}_${u}.png`;return{dataUrl:l,filename:d}}catch(l){return console.error("创建带元数据的下载失败:",l),{dataUrl:n,filename:`${o}_${Date.now()}.png`}}}function Cr(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bu={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var ap;function zw(){return ap||(ap=1,(function(n,e){(function(o){n.exports=o()})(function(){return(function o(l,u,f){function d(p,v){if(!u[p]){if(!l[p]){var C=typeof Cr=="function"&&Cr;if(!v&&C)return C(p,!0);if(h)return h(p,!0);var S=new Error("Cannot find module '"+p+"'");throw S.code="MODULE_NOT_FOUND",S}var T=u[p]={exports:{}};l[p][0].call(T.exports,function(w){var _=l[p][1][w];return d(_||w)},T,T.exports,o,l,u,f)}return u[p].exports}for(var h=typeof Cr=="function"&&Cr,g=0;g<f.length;g++)d(f[g]);return d})({1:[function(o,l,u){var f=o("./utils"),d=o("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u.encode=function(g){for(var p,v,C,S,T,w,_,N=[],R=0,k=g.length,I=k,H=f.getTypeOf(g)!=="string";R<g.length;)I=k-R,C=H?(p=g[R++],v=R<k?g[R++]:0,R<k?g[R++]:0):(p=g.charCodeAt(R++),v=R<k?g.charCodeAt(R++):0,R<k?g.charCodeAt(R++):0),S=p>>2,T=(3&p)<<4|v>>4,w=1<I?(15&v)<<2|C>>6:64,_=2<I?63&C:64,N.push(h.charAt(S)+h.charAt(T)+h.charAt(w)+h.charAt(_));return N.join("")},u.decode=function(g){var p,v,C,S,T,w,_=0,N=0,R="data:";if(g.substr(0,R.length)===R)throw new Error("Invalid base64 input, it looks like a data url.");var k,I=3*(g=g.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(g.charAt(g.length-1)===h.charAt(64)&&I--,g.charAt(g.length-2)===h.charAt(64)&&I--,I%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=d.uint8array?new Uint8Array(0|I):new Array(0|I);_<g.length;)p=h.indexOf(g.charAt(_++))<<2|(S=h.indexOf(g.charAt(_++)))>>4,v=(15&S)<<4|(T=h.indexOf(g.charAt(_++)))>>2,C=(3&T)<<6|(w=h.indexOf(g.charAt(_++))),k[N++]=p,T!==64&&(k[N++]=v),w!==64&&(k[N++]=C);return k}},{"./support":30,"./utils":32}],2:[function(o,l,u){var f=o("./external"),d=o("./stream/DataWorker"),h=o("./stream/Crc32Probe"),g=o("./stream/DataLengthProbe");function p(v,C,S,T,w){this.compressedSize=v,this.uncompressedSize=C,this.crc32=S,this.compression=T,this.compressedContent=w}p.prototype={getContentWorker:function(){var v=new d(f.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),C=this;return v.on("end",function(){if(this.streamInfo.data_length!==C.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new d(f.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(v,C,S){return v.pipe(new h).pipe(new g("uncompressedSize")).pipe(C.compressWorker(S)).pipe(new g("compressedSize")).withStreamInfo("compression",C)},l.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,l,u){var f=o("./stream/GenericWorker");u.STORE={magic:"\0\0",compressWorker:function(){return new f("STORE compression")},uncompressWorker:function(){return new f("STORE decompression")}},u.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,l,u){var f=o("./utils"),d=(function(){for(var h,g=[],p=0;p<256;p++){h=p;for(var v=0;v<8;v++)h=1&h?3988292384^h>>>1:h>>>1;g[p]=h}return g})();l.exports=function(h,g){return h!==void 0&&h.length?f.getTypeOf(h)!=="string"?(function(p,v,C,S){var T=d,w=S+C;p^=-1;for(var _=S;_<w;_++)p=p>>>8^T[255&(p^v[_])];return-1^p})(0|g,h,h.length,0):(function(p,v,C,S){var T=d,w=S+C;p^=-1;for(var _=S;_<w;_++)p=p>>>8^T[255&(p^v.charCodeAt(_))];return-1^p})(0|g,h,h.length,0):0}},{"./utils":32}],5:[function(o,l,u){u.base64=!1,u.binary=!1,u.dir=!1,u.createFolders=!0,u.date=null,u.compression=null,u.compressionOptions=null,u.comment=null,u.unixPermissions=null,u.dosPermissions=null},{}],6:[function(o,l,u){var f=null;f=typeof Promise<"u"?Promise:o("lie"),l.exports={Promise:f}},{lie:37}],7:[function(o,l,u){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",d=o("pako"),h=o("./utils"),g=o("./stream/GenericWorker"),p=f?"uint8array":"array";function v(C,S){g.call(this,"FlateWorker/"+C),this._pako=null,this._pakoAction=C,this._pakoOptions=S,this.meta={}}u.magic="\b\0",h.inherits(v,g),v.prototype.processChunk=function(C){this.meta=C.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(p,C.data),!1)},v.prototype.flush=function(){g.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new d[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var C=this;this._pako.onData=function(S){C.push({data:S,meta:C.meta})}},u.compressWorker=function(C){return new v("Deflate",C)},u.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,l,u){function f(T,w){var _,N="";for(_=0;_<w;_++)N+=String.fromCharCode(255&T),T>>>=8;return N}function d(T,w,_,N,R,k){var I,H,A=T.file,U=T.compression,P=k!==p.utf8encode,Y=h.transformTo("string",k(A.name)),B=h.transformTo("string",p.utf8encode(A.name)),q=A.comment,le=h.transformTo("string",k(q)),z=h.transformTo("string",p.utf8encode(q)),W=B.length!==A.name.length,M=z.length!==q.length,Z="",O="",j="",Se=A.dir,de=A.date,V={crc32:0,compressedSize:0,uncompressedSize:0};w&&!_||(V.crc32=T.crc32,V.compressedSize=T.compressedSize,V.uncompressedSize=T.uncompressedSize);var F=0;w&&(F|=8),P||!W&&!M||(F|=2048);var J=0,pe=0;Se&&(J|=16),R==="UNIX"?(pe=798,J|=(function(X,ne){var be=X;return X||(be=ne?16893:33204),(65535&be)<<16})(A.unixPermissions,Se)):(pe=20,J|=(function(X){return 63&(X||0)})(A.dosPermissions)),I=de.getUTCHours(),I<<=6,I|=de.getUTCMinutes(),I<<=5,I|=de.getUTCSeconds()/2,H=de.getUTCFullYear()-1980,H<<=4,H|=de.getUTCMonth()+1,H<<=5,H|=de.getUTCDate(),W&&(O=f(1,1)+f(v(Y),4)+B,Z+="up"+f(O.length,2)+O),M&&(j=f(1,1)+f(v(le),4)+z,Z+="uc"+f(j.length,2)+j);var $="";return $+=`
\0`,$+=f(F,2),$+=U.magic,$+=f(I,2),$+=f(H,2),$+=f(V.crc32,4),$+=f(V.compressedSize,4),$+=f(V.uncompressedSize,4),$+=f(Y.length,2),$+=f(Z.length,2),{fileRecord:C.LOCAL_FILE_HEADER+$+Y+Z,dirRecord:C.CENTRAL_FILE_HEADER+f(pe,2)+$+f(le.length,2)+"\0\0\0\0"+f(J,4)+f(N,4)+Y+Z+le}}var h=o("../utils"),g=o("../stream/GenericWorker"),p=o("../utf8"),v=o("../crc32"),C=o("../signature");function S(T,w,_,N){g.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=_,this.encodeFileName=N,this.streamFiles=T,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(S,g),S.prototype.push=function(T){var w=T.meta.percent||0,_=this.entriesCount,N=this._sources.length;this.accumulate?this.contentBuffer.push(T):(this.bytesWritten+=T.data.length,g.prototype.push.call(this,{data:T.data,meta:{currentFile:this.currentFile,percent:_?(w+100*(_-N-1))/_:100}}))},S.prototype.openedSource=function(T){this.currentSourceOffset=this.bytesWritten,this.currentFile=T.file.name;var w=this.streamFiles&&!T.file.dir;if(w){var _=d(T,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},S.prototype.closedSource=function(T){this.accumulate=!1;var w=this.streamFiles&&!T.file.dir,_=d(T,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),w)this.push({data:(function(N){return C.DATA_DESCRIPTOR+f(N.crc32,4)+f(N.compressedSize,4)+f(N.uncompressedSize,4)})(T),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},S.prototype.flush=function(){for(var T=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var _=this.bytesWritten-T,N=(function(R,k,I,H,A){var U=h.transformTo("string",A(H));return C.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(R,2)+f(R,2)+f(k,4)+f(I,4)+f(U.length,2)+U})(this.dirRecords.length,_,T,this.zipComment,this.encodeFileName);this.push({data:N,meta:{percent:100}})},S.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},S.prototype.registerPrevious=function(T){this._sources.push(T);var w=this;return T.on("data",function(_){w.processChunk(_)}),T.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),T.on("error",function(_){w.error(_)}),this},S.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},S.prototype.error=function(T){var w=this._sources;if(!g.prototype.error.call(this,T))return!1;for(var _=0;_<w.length;_++)try{w[_].error(T)}catch{}return!0},S.prototype.lock=function(){g.prototype.lock.call(this);for(var T=this._sources,w=0;w<T.length;w++)T[w].lock()},l.exports=S},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,l,u){var f=o("../compressions"),d=o("./ZipFileWorker");u.generateWorker=function(h,g,p){var v=new d(g.streamFiles,p,g.platform,g.encodeFileName),C=0;try{h.forEach(function(S,T){C++;var w=(function(k,I){var H=k||I,A=f[H];if(!A)throw new Error(H+" is not a valid compression method !");return A})(T.options.compression,g.compression),_=T.options.compressionOptions||g.compressionOptions||{},N=T.dir,R=T.date;T._compressWorker(w,_).withStreamInfo("file",{name:S,dir:N,date:R,comment:T.comment||"",unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions}).pipe(v)}),v.entriesCount=C}catch(S){v.error(S)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,l,u){function f(){if(!(this instanceof f))return new f;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var d=new f;for(var h in this)typeof this[h]!="function"&&(d[h]=this[h]);return d}}(f.prototype=o("./object")).loadAsync=o("./load"),f.support=o("./support"),f.defaults=o("./defaults"),f.version="3.10.1",f.loadAsync=function(d,h){return new f().loadAsync(d,h)},f.external=o("./external"),l.exports=f},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,l,u){var f=o("./utils"),d=o("./external"),h=o("./utf8"),g=o("./zipEntries"),p=o("./stream/Crc32Probe"),v=o("./nodejsUtils");function C(S){return new d.Promise(function(T,w){var _=S.decompressed.getContentWorker().pipe(new p);_.on("error",function(N){w(N)}).on("end",function(){_.streamInfo.crc32!==S.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):T()}).resume()})}l.exports=function(S,T){var w=this;return T=f.extend(T||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),v.isNode&&v.isStream(S)?d.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):f.prepareContent("the loaded zip file",S,!0,T.optimizedBinaryString,T.base64).then(function(_){var N=new g(T);return N.load(_),N}).then(function(_){var N=[d.Promise.resolve(_)],R=_.files;if(T.checkCRC32)for(var k=0;k<R.length;k++)N.push(C(R[k]));return d.Promise.all(N)}).then(function(_){for(var N=_.shift(),R=N.files,k=0;k<R.length;k++){var I=R[k],H=I.fileNameStr,A=f.resolve(I.fileNameStr);w.file(A,I.decompressed,{binary:!0,optimizedBinaryString:!0,date:I.date,dir:I.dir,comment:I.fileCommentStr.length?I.fileCommentStr:null,unixPermissions:I.unixPermissions,dosPermissions:I.dosPermissions,createFolders:T.createFolders}),I.dir||(w.file(A).unsafeOriginalName=H)}return N.zipComment.length&&(w.comment=N.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,l,u){var f=o("../utils"),d=o("../stream/GenericWorker");function h(g,p){d.call(this,"Nodejs stream input adapter for "+g),this._upstreamEnded=!1,this._bindStream(p)}f.inherits(h,d),h.prototype._bindStream=function(g){var p=this;(this._stream=g).pause(),g.on("data",function(v){p.push({data:v,meta:{percent:0}})}).on("error",function(v){p.isPaused?this.generatedError=v:p.error(v)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},h.prototype.pause=function(){return!!d.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},l.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,l,u){var f=o("readable-stream").Readable;function d(h,g,p){f.call(this,g),this._helper=h;var v=this;h.on("data",function(C,S){v.push(C)||v._helper.pause(),p&&p(S)}).on("error",function(C){v.emit("error",C)}).on("end",function(){v.push(null)})}o("../utils").inherits(d,f),d.prototype._read=function(){this._helper.resume()},l.exports=d},{"../utils":32,"readable-stream":16}],14:[function(o,l,u){l.exports={isNode:typeof Buffer<"u",newBufferFrom:function(f,d){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(f,d);if(typeof f=="number")throw new Error('The "data" argument must not be a number');return new Buffer(f,d)},allocBuffer:function(f){if(Buffer.alloc)return Buffer.alloc(f);var d=new Buffer(f);return d.fill(0),d},isBuffer:function(f){return Buffer.isBuffer(f)},isStream:function(f){return f&&typeof f.on=="function"&&typeof f.pause=="function"&&typeof f.resume=="function"}}},{}],15:[function(o,l,u){function f(A,U,P){var Y,B=h.getTypeOf(U),q=h.extend(P||{},v);q.date=q.date||new Date,q.compression!==null&&(q.compression=q.compression.toUpperCase()),typeof q.unixPermissions=="string"&&(q.unixPermissions=parseInt(q.unixPermissions,8)),q.unixPermissions&&16384&q.unixPermissions&&(q.dir=!0),q.dosPermissions&&16&q.dosPermissions&&(q.dir=!0),q.dir&&(A=R(A)),q.createFolders&&(Y=N(A))&&k.call(this,Y,!0);var le=B==="string"&&q.binary===!1&&q.base64===!1;P&&P.binary!==void 0||(q.binary=!le),(U instanceof C&&U.uncompressedSize===0||q.dir||!U||U.length===0)&&(q.base64=!1,q.binary=!0,U="",q.compression="STORE",B="string");var z=null;z=U instanceof C||U instanceof g?U:w.isNode&&w.isStream(U)?new _(A,U):h.prepareContent(A,U,q.binary,q.optimizedBinaryString,q.base64);var W=new S(A,z,q);this.files[A]=W}var d=o("./utf8"),h=o("./utils"),g=o("./stream/GenericWorker"),p=o("./stream/StreamHelper"),v=o("./defaults"),C=o("./compressedObject"),S=o("./zipObject"),T=o("./generate"),w=o("./nodejsUtils"),_=o("./nodejs/NodejsStreamInputAdapter"),N=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var U=A.lastIndexOf("/");return 0<U?A.substring(0,U):""},R=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},k=function(A,U){return U=U!==void 0?U:v.createFolders,A=R(A),this.files[A]||f.call(this,A,null,{dir:!0,createFolders:U}),this.files[A]};function I(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var H={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var U,P,Y;for(U in this.files)Y=this.files[U],(P=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&A(P,Y)},filter:function(A){var U=[];return this.forEach(function(P,Y){A(P,Y)&&U.push(Y)}),U},file:function(A,U,P){if(arguments.length!==1)return A=this.root+A,f.call(this,A,U,P),this;if(I(A)){var Y=A;return this.filter(function(q,le){return!le.dir&&Y.test(q)})}var B=this.files[this.root+A];return B&&!B.dir?B:null},folder:function(A){if(!A)return this;if(I(A))return this.filter(function(B,q){return q.dir&&A.test(B)});var U=this.root+A,P=k.call(this,U),Y=this.clone();return Y.root=P.name,Y},remove:function(A){A=this.root+A;var U=this.files[A];if(U||(A.slice(-1)!=="/"&&(A+="/"),U=this.files[A]),U&&!U.dir)delete this.files[A];else for(var P=this.filter(function(B,q){return q.name.slice(0,A.length)===A}),Y=0;Y<P.length;Y++)delete this.files[P[Y].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var U,P={};try{if((P=h.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:d.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");h.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var Y=P.comment||this.comment||"";U=T.generateWorker(this,P,Y)}catch(B){(U=new g("error")).error(B)}return new p(U,P.type||"string",P.mimeType)},generateAsync:function(A,U){return this.generateInternalStream(A).accumulate(U)},generateNodeStream:function(A,U){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(U)}};l.exports=H},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,l,u){l.exports=o("stream")},{stream:void 0}],17:[function(o,l,u){var f=o("./DataReader");function d(h){f.call(this,h);for(var g=0;g<this.data.length;g++)h[g]=255&h[g]}o("../utils").inherits(d,f),d.prototype.byteAt=function(h){return this.data[this.zero+h]},d.prototype.lastIndexOfSignature=function(h){for(var g=h.charCodeAt(0),p=h.charCodeAt(1),v=h.charCodeAt(2),C=h.charCodeAt(3),S=this.length-4;0<=S;--S)if(this.data[S]===g&&this.data[S+1]===p&&this.data[S+2]===v&&this.data[S+3]===C)return S-this.zero;return-1},d.prototype.readAndCheckSignature=function(h){var g=h.charCodeAt(0),p=h.charCodeAt(1),v=h.charCodeAt(2),C=h.charCodeAt(3),S=this.readData(4);return g===S[0]&&p===S[1]&&v===S[2]&&C===S[3]},d.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var g=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,g},l.exports=d},{"../utils":32,"./DataReader":18}],18:[function(o,l,u){var f=o("../utils");function d(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}d.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var g,p=0;for(this.checkOffset(h),g=this.index+h-1;g>=this.index;g--)p=(p<<8)+this.byteAt(g);return this.index+=h,p},readString:function(h){return f.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},l.exports=d},{"../utils":32}],19:[function(o,l,u){var f=o("./Uint8ArrayReader");function d(h){f.call(this,h)}o("../utils").inherits(d,f),d.prototype.readData=function(h){this.checkOffset(h);var g=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,g},l.exports=d},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,l,u){var f=o("./DataReader");function d(h){f.call(this,h)}o("../utils").inherits(d,f),d.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},d.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},d.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},d.prototype.readData=function(h){this.checkOffset(h);var g=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,g},l.exports=d},{"../utils":32,"./DataReader":18}],21:[function(o,l,u){var f=o("./ArrayReader");function d(h){f.call(this,h)}o("../utils").inherits(d,f),d.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var g=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,g},l.exports=d},{"../utils":32,"./ArrayReader":17}],22:[function(o,l,u){var f=o("../utils"),d=o("../support"),h=o("./ArrayReader"),g=o("./StringReader"),p=o("./NodeBufferReader"),v=o("./Uint8ArrayReader");l.exports=function(C){var S=f.getTypeOf(C);return f.checkSupport(S),S!=="string"||d.uint8array?S==="nodebuffer"?new p(C):d.uint8array?new v(f.transformTo("uint8array",C)):new h(f.transformTo("array",C)):new g(C)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,l,u){u.LOCAL_FILE_HEADER="PK",u.CENTRAL_FILE_HEADER="PK",u.CENTRAL_DIRECTORY_END="PK",u.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",u.ZIP64_CENTRAL_DIRECTORY_END="PK",u.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,l,u){var f=o("./GenericWorker"),d=o("../utils");function h(g){f.call(this,"ConvertWorker to "+g),this.destType=g}d.inherits(h,f),h.prototype.processChunk=function(g){this.push({data:d.transformTo(this.destType,g.data),meta:g.meta})},l.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(o,l,u){var f=o("./GenericWorker"),d=o("../crc32");function h(){f.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(h,f),h.prototype.processChunk=function(g){this.streamInfo.crc32=d(g.data,this.streamInfo.crc32||0),this.push(g)},l.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,l,u){var f=o("../utils"),d=o("./GenericWorker");function h(g){d.call(this,"DataLengthProbe for "+g),this.propName=g,this.withStreamInfo(g,0)}f.inherits(h,d),h.prototype.processChunk=function(g){if(g){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+g.data.length}d.prototype.processChunk.call(this,g)},l.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(o,l,u){var f=o("../utils"),d=o("./GenericWorker");function h(g){d.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,g.then(function(v){p.dataIsReady=!0,p.data=v,p.max=v&&v.length||0,p.type=f.getTypeOf(v),p.isPaused||p._tickAndRepeat()},function(v){p.error(v)})}f.inherits(h,d),h.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,f.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(f.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var g=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":g=this.data.substring(this.index,p);break;case"uint8array":g=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":g=this.data.slice(this.index,p)}return this.index=p,this.push({data:g,meta:{percent:this.max?this.index/this.max*100:0}})},l.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(o,l,u){function f(d){this.name=d||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}f.prototype={push:function(d){this.emit("data",d)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(d){this.emit("error",d)}return!0},error:function(d){return!this.isFinished&&(this.isPaused?this.generatedError=d:(this.isFinished=!0,this.emit("error",d),this.previous&&this.previous.error(d),this.cleanUp()),!0)},on:function(d,h){return this._listeners[d].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(d,h){if(this._listeners[d])for(var g=0;g<this._listeners[d].length;g++)this._listeners[d][g].call(this,h)},pipe:function(d){return d.registerPrevious(this)},registerPrevious:function(d){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=d.streamInfo,this.mergeStreamInfo(),this.previous=d;var h=this;return d.on("data",function(g){h.processChunk(g)}),d.on("end",function(){h.end()}),d.on("error",function(g){h.error(g)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var d=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),d=!0),this.previous&&this.previous.resume(),!d},flush:function(){},processChunk:function(d){this.push(d)},withStreamInfo:function(d,h){return this.extraStreamInfo[d]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var d in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,d)&&(this.streamInfo[d]=this.extraStreamInfo[d])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var d="Worker "+this.name;return this.previous?this.previous+" -> "+d:d}},l.exports=f},{}],29:[function(o,l,u){var f=o("../utils"),d=o("./ConvertWorker"),h=o("./GenericWorker"),g=o("../base64"),p=o("../support"),v=o("../external"),C=null;if(p.nodestream)try{C=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function S(w,_){return new v.Promise(function(N,R){var k=[],I=w._internalType,H=w._outputType,A=w._mimeType;w.on("data",function(U,P){k.push(U),_&&_(P)}).on("error",function(U){k=[],R(U)}).on("end",function(){try{var U=(function(P,Y,B){switch(P){case"blob":return f.newBlob(f.transformTo("arraybuffer",Y),B);case"base64":return g.encode(Y);default:return f.transformTo(P,Y)}})(H,(function(P,Y){var B,q=0,le=null,z=0;for(B=0;B<Y.length;B++)z+=Y[B].length;switch(P){case"string":return Y.join("");case"array":return Array.prototype.concat.apply([],Y);case"uint8array":for(le=new Uint8Array(z),B=0;B<Y.length;B++)le.set(Y[B],q),q+=Y[B].length;return le;case"nodebuffer":return Buffer.concat(Y);default:throw new Error("concat : unsupported type '"+P+"'")}})(I,k),A);N(U)}catch(P){R(P)}k=[]}).resume()})}function T(w,_,N){var R=_;switch(_){case"blob":case"arraybuffer":R="uint8array";break;case"base64":R="string"}try{this._internalType=R,this._outputType=_,this._mimeType=N,f.checkSupport(R),this._worker=w.pipe(new d(R)),w.lock()}catch(k){this._worker=new h("error"),this._worker.error(k)}}T.prototype={accumulate:function(w){return S(this,w)},on:function(w,_){var N=this;return w==="data"?this._worker.on(w,function(R){_.call(N,R.data,R.meta)}):this._worker.on(w,function(){f.delay(_,arguments,N)}),this},resume:function(){return f.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(f.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new C(this,{objectMode:this._outputType!=="nodebuffer"},w)}},l.exports=T},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,l,u){if(u.base64=!0,u.array=!0,u.string=!0,u.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",u.nodebuffer=typeof Buffer<"u",u.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")u.blob=!1;else{var f=new ArrayBuffer(0);try{u.blob=new Blob([f],{type:"application/zip"}).size===0}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);d.append(f),u.blob=d.getBlob("application/zip").size===0}catch{u.blob=!1}}}try{u.nodestream=!!o("readable-stream").Readable}catch{u.nodestream=!1}},{"readable-stream":16}],31:[function(o,l,u){for(var f=o("./utils"),d=o("./support"),h=o("./nodejsUtils"),g=o("./stream/GenericWorker"),p=new Array(256),v=0;v<256;v++)p[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;p[254]=p[254]=1;function C(){g.call(this,"utf-8 decode"),this.leftOver=null}function S(){g.call(this,"utf-8 encode")}u.utf8encode=function(T){return d.nodebuffer?h.newBufferFrom(T,"utf-8"):(function(w){var _,N,R,k,I,H=w.length,A=0;for(k=0;k<H;k++)(64512&(N=w.charCodeAt(k)))==55296&&k+1<H&&(64512&(R=w.charCodeAt(k+1)))==56320&&(N=65536+(N-55296<<10)+(R-56320),k++),A+=N<128?1:N<2048?2:N<65536?3:4;for(_=d.uint8array?new Uint8Array(A):new Array(A),k=I=0;I<A;k++)(64512&(N=w.charCodeAt(k)))==55296&&k+1<H&&(64512&(R=w.charCodeAt(k+1)))==56320&&(N=65536+(N-55296<<10)+(R-56320),k++),N<128?_[I++]=N:(N<2048?_[I++]=192|N>>>6:(N<65536?_[I++]=224|N>>>12:(_[I++]=240|N>>>18,_[I++]=128|N>>>12&63),_[I++]=128|N>>>6&63),_[I++]=128|63&N);return _})(T)},u.utf8decode=function(T){return d.nodebuffer?f.transformTo("nodebuffer",T).toString("utf-8"):(function(w){var _,N,R,k,I=w.length,H=new Array(2*I);for(_=N=0;_<I;)if((R=w[_++])<128)H[N++]=R;else if(4<(k=p[R]))H[N++]=65533,_+=k-1;else{for(R&=k===2?31:k===3?15:7;1<k&&_<I;)R=R<<6|63&w[_++],k--;1<k?H[N++]=65533:R<65536?H[N++]=R:(R-=65536,H[N++]=55296|R>>10&1023,H[N++]=56320|1023&R)}return H.length!==N&&(H.subarray?H=H.subarray(0,N):H.length=N),f.applyFromCharCode(H)})(T=f.transformTo(d.uint8array?"uint8array":"array",T))},f.inherits(C,g),C.prototype.processChunk=function(T){var w=f.transformTo(d.uint8array?"uint8array":"array",T.data);if(this.leftOver&&this.leftOver.length){if(d.uint8array){var _=w;(w=new Uint8Array(_.length+this.leftOver.length)).set(this.leftOver,0),w.set(_,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var N=(function(k,I){var H;for((I=I||k.length)>k.length&&(I=k.length),H=I-1;0<=H&&(192&k[H])==128;)H--;return H<0||H===0?I:H+p[k[H]]>I?H:I})(w),R=w;N!==w.length&&(d.uint8array?(R=w.subarray(0,N),this.leftOver=w.subarray(N,w.length)):(R=w.slice(0,N),this.leftOver=w.slice(N,w.length))),this.push({data:u.utf8decode(R),meta:T.meta})},C.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:u.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},u.Utf8DecodeWorker=C,f.inherits(S,g),S.prototype.processChunk=function(T){this.push({data:u.utf8encode(T.data),meta:T.meta})},u.Utf8EncodeWorker=S},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,l,u){var f=o("./support"),d=o("./base64"),h=o("./nodejsUtils"),g=o("./external");function p(_){return _}function v(_,N){for(var R=0;R<_.length;++R)N[R]=255&_.charCodeAt(R);return N}o("setimmediate"),u.newBlob=function(_,N){u.checkSupport("blob");try{return new Blob([_],{type:N})}catch{try{var R=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return R.append(_),R.getBlob(N)}catch{throw new Error("Bug : can't construct the Blob.")}}};var C={stringifyByChunk:function(_,N,R){var k=[],I=0,H=_.length;if(H<=R)return String.fromCharCode.apply(null,_);for(;I<H;)N==="array"||N==="nodebuffer"?k.push(String.fromCharCode.apply(null,_.slice(I,Math.min(I+R,H)))):k.push(String.fromCharCode.apply(null,_.subarray(I,Math.min(I+R,H)))),I+=R;return k.join("")},stringifyByChar:function(_){for(var N="",R=0;R<_.length;R++)N+=String.fromCharCode(_[R]);return N},applyCanBeUsed:{uint8array:(function(){try{return f.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return f.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}})()}};function S(_){var N=65536,R=u.getTypeOf(_),k=!0;if(R==="uint8array"?k=C.applyCanBeUsed.uint8array:R==="nodebuffer"&&(k=C.applyCanBeUsed.nodebuffer),k)for(;1<N;)try{return C.stringifyByChunk(_,R,N)}catch{N=Math.floor(N/2)}return C.stringifyByChar(_)}function T(_,N){for(var R=0;R<_.length;R++)N[R]=_[R];return N}u.applyFromCharCode=S;var w={};w.string={string:p,array:function(_){return v(_,new Array(_.length))},arraybuffer:function(_){return w.string.uint8array(_).buffer},uint8array:function(_){return v(_,new Uint8Array(_.length))},nodebuffer:function(_){return v(_,h.allocBuffer(_.length))}},w.array={string:S,array:p,arraybuffer:function(_){return new Uint8Array(_).buffer},uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return h.newBufferFrom(_)}},w.arraybuffer={string:function(_){return S(new Uint8Array(_))},array:function(_){return T(new Uint8Array(_),new Array(_.byteLength))},arraybuffer:p,uint8array:function(_){return new Uint8Array(_)},nodebuffer:function(_){return h.newBufferFrom(new Uint8Array(_))}},w.uint8array={string:S,array:function(_){return T(_,new Array(_.length))},arraybuffer:function(_){return _.buffer},uint8array:p,nodebuffer:function(_){return h.newBufferFrom(_)}},w.nodebuffer={string:S,array:function(_){return T(_,new Array(_.length))},arraybuffer:function(_){return w.nodebuffer.uint8array(_).buffer},uint8array:function(_){return T(_,new Uint8Array(_.length))},nodebuffer:p},u.transformTo=function(_,N){if(N=N||"",!_)return N;u.checkSupport(_);var R=u.getTypeOf(N);return w[R][_](N)},u.resolve=function(_){for(var N=_.split("/"),R=[],k=0;k<N.length;k++){var I=N[k];I==="."||I===""&&k!==0&&k!==N.length-1||(I===".."?R.pop():R.push(I))}return R.join("/")},u.getTypeOf=function(_){return typeof _=="string"?"string":Object.prototype.toString.call(_)==="[object Array]"?"array":f.nodebuffer&&h.isBuffer(_)?"nodebuffer":f.uint8array&&_ instanceof Uint8Array?"uint8array":f.arraybuffer&&_ instanceof ArrayBuffer?"arraybuffer":void 0},u.checkSupport=function(_){if(!f[_.toLowerCase()])throw new Error(_+" is not supported by this platform")},u.MAX_VALUE_16BITS=65535,u.MAX_VALUE_32BITS=-1,u.pretty=function(_){var N,R,k="";for(R=0;R<(_||"").length;R++)k+="\\x"+((N=_.charCodeAt(R))<16?"0":"")+N.toString(16).toUpperCase();return k},u.delay=function(_,N,R){setImmediate(function(){_.apply(R||null,N||[])})},u.inherits=function(_,N){function R(){}R.prototype=N.prototype,_.prototype=new R},u.extend=function(){var _,N,R={};for(_=0;_<arguments.length;_++)for(N in arguments[_])Object.prototype.hasOwnProperty.call(arguments[_],N)&&R[N]===void 0&&(R[N]=arguments[_][N]);return R},u.prepareContent=function(_,N,R,k,I){return g.Promise.resolve(N).then(function(H){return f.blob&&(H instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(H))!==-1)&&typeof FileReader<"u"?new g.Promise(function(A,U){var P=new FileReader;P.onload=function(Y){A(Y.target.result)},P.onerror=function(Y){U(Y.target.error)},P.readAsArrayBuffer(H)}):H}).then(function(H){var A=u.getTypeOf(H);return A?(A==="arraybuffer"?H=u.transformTo("uint8array",H):A==="string"&&(I?H=d.decode(H):R&&k!==!0&&(H=(function(U){return v(U,f.uint8array?new Uint8Array(U.length):new Array(U.length))})(H))),H):g.Promise.reject(new Error("Can't read the data of '"+_+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,l,u){var f=o("./reader/readerFor"),d=o("./utils"),h=o("./signature"),g=o("./zipEntry"),p=o("./support");function v(C){this.files=[],this.loadOptions=C}v.prototype={checkSignature:function(C){if(!this.reader.readAndCheckSignature(C)){this.reader.index-=4;var S=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+d.pretty(S)+", expected "+d.pretty(C)+")")}},isSignature:function(C,S){var T=this.reader.index;this.reader.setIndex(C);var w=this.reader.readString(4)===S;return this.reader.setIndex(T),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var C=this.reader.readData(this.zipCommentLength),S=p.uint8array?"uint8array":"array",T=d.transformTo(S,C);this.zipComment=this.loadOptions.decodeFileName(T)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var C,S,T,w=this.zip64EndOfCentralSize-44;0<w;)C=this.reader.readInt(2),S=this.reader.readInt(4),T=this.reader.readData(S),this.zip64ExtensibleData[C]={id:C,length:S,value:T}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var C,S;for(C=0;C<this.files.length;C++)S=this.files[C],this.reader.setIndex(S.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),S.readLocalPart(this.reader),S.handleUTF8(),S.processAttributes()},readCentralDir:function(){var C;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(C=new g({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(C);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var C=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(C<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(C);var S=C;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d.MAX_VALUE_16BITS||this.centralDirRecords===d.MAX_VALUE_16BITS||this.centralDirSize===d.MAX_VALUE_32BITS||this.centralDirOffset===d.MAX_VALUE_32BITS){if(this.zip64=!0,(C=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(C),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var T=this.centralDirOffset+this.centralDirSize;this.zip64&&(T+=20,T+=12+this.zip64EndOfCentralSize);var w=S-T;if(0<w)this.isSignature(S,h.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(C){this.reader=f(C)},load:function(C){this.prepareReader(C),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},l.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,l,u){var f=o("./reader/readerFor"),d=o("./utils"),h=o("./compressedObject"),g=o("./crc32"),p=o("./utf8"),v=o("./compressions"),C=o("./support");function S(T,w){this.options=T,this.loadOptions=w}S.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(T){var w,_;if(T.skip(22),this.fileNameLength=T.readInt(2),_=T.readInt(2),this.fileName=T.readData(this.fileNameLength),T.skip(_),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(N){for(var R in v)if(Object.prototype.hasOwnProperty.call(v,R)&&v[R].magic===N)return v[R];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+d.pretty(this.compressionMethod)+" unknown (inner file : "+d.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,w,T.readData(this.compressedSize))},readCentralPart:function(T){this.versionMadeBy=T.readInt(2),T.skip(2),this.bitFlag=T.readInt(2),this.compressionMethod=T.readString(2),this.date=T.readDate(),this.crc32=T.readInt(4),this.compressedSize=T.readInt(4),this.uncompressedSize=T.readInt(4);var w=T.readInt(2);if(this.extraFieldsLength=T.readInt(2),this.fileCommentLength=T.readInt(2),this.diskNumberStart=T.readInt(2),this.internalFileAttributes=T.readInt(2),this.externalFileAttributes=T.readInt(4),this.localHeaderOffset=T.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");T.skip(w),this.readExtraFields(T),this.parseZIP64ExtraField(T),this.fileComment=T.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var T=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),T==0&&(this.dosPermissions=63&this.externalFileAttributes),T==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var T=f(this.extraFields[1].value);this.uncompressedSize===d.MAX_VALUE_32BITS&&(this.uncompressedSize=T.readInt(8)),this.compressedSize===d.MAX_VALUE_32BITS&&(this.compressedSize=T.readInt(8)),this.localHeaderOffset===d.MAX_VALUE_32BITS&&(this.localHeaderOffset=T.readInt(8)),this.diskNumberStart===d.MAX_VALUE_32BITS&&(this.diskNumberStart=T.readInt(4))}},readExtraFields:function(T){var w,_,N,R=T.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});T.index+4<R;)w=T.readInt(2),_=T.readInt(2),N=T.readData(_),this.extraFields[w]={id:w,length:_,value:N};T.setIndex(R)},handleUTF8:function(){var T=C.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var _=d.transformTo(T,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(_)}var N=this.findExtraFieldUnicodeComment();if(N!==null)this.fileCommentStr=N;else{var R=d.transformTo(T,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(R)}}},findExtraFieldUnicodePath:function(){var T=this.extraFields[28789];if(T){var w=f(T.value);return w.readInt(1)!==1||g(this.fileName)!==w.readInt(4)?null:p.utf8decode(w.readData(T.length-5))}return null},findExtraFieldUnicodeComment:function(){var T=this.extraFields[25461];if(T){var w=f(T.value);return w.readInt(1)!==1||g(this.fileComment)!==w.readInt(4)?null:p.utf8decode(w.readData(T.length-5))}return null}},l.exports=S},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,l,u){function f(w,_,N){this.name=w,this.dir=N.dir,this.date=N.date,this.comment=N.comment,this.unixPermissions=N.unixPermissions,this.dosPermissions=N.dosPermissions,this._data=_,this._dataBinary=N.binary,this.options={compression:N.compression,compressionOptions:N.compressionOptions}}var d=o("./stream/StreamHelper"),h=o("./stream/DataWorker"),g=o("./utf8"),p=o("./compressedObject"),v=o("./stream/GenericWorker");f.prototype={internalStream:function(w){var _=null,N="string";try{if(!w)throw new Error("No output type specified.");var R=(N=w.toLowerCase())==="string"||N==="text";N!=="binarystring"&&N!=="text"||(N="string"),_=this._decompressWorker();var k=!this._dataBinary;k&&!R&&(_=_.pipe(new g.Utf8EncodeWorker)),!k&&R&&(_=_.pipe(new g.Utf8DecodeWorker))}catch(I){(_=new v("error")).error(I)}return new d(_,N,"")},async:function(w,_){return this.internalStream(w).accumulate(_)},nodeStream:function(w,_){return this.internalStream(w||"nodebuffer").toNodejsStream(_)},_compressWorker:function(w,_){if(this._data instanceof p&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var N=this._decompressWorker();return this._dataBinary||(N=N.pipe(new g.Utf8EncodeWorker)),p.createWorkerFrom(N,w,_)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof v?this._data:new h(this._data)}};for(var C=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],S=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},T=0;T<C.length;T++)f.prototype[C[T]]=S;l.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,l,u){(function(f){var d,h,g=f.MutationObserver||f.WebKitMutationObserver;if(g){var p=0,v=new g(w),C=f.document.createTextNode("");v.observe(C,{characterData:!0}),d=function(){C.data=p=++p%2}}else if(f.setImmediate||f.MessageChannel===void 0)d="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(){var _=f.document.createElement("script");_.onreadystatechange=function(){w(),_.onreadystatechange=null,_.parentNode.removeChild(_),_=null},f.document.documentElement.appendChild(_)}:function(){setTimeout(w,0)};else{var S=new f.MessageChannel;S.port1.onmessage=w,d=function(){S.port2.postMessage(0)}}var T=[];function w(){var _,N;h=!0;for(var R=T.length;R;){for(N=T,T=[],_=-1;++_<R;)N[_]();R=T.length}h=!1}l.exports=function(_){T.push(_)!==1||h||d()}}).call(this,typeof pr<"u"?pr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,l,u){var f=o("immediate");function d(){}var h={},g=["REJECTED"],p=["FULFILLED"],v=["PENDING"];function C(R){if(typeof R!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,R!==d&&_(this,R)}function S(R,k,I){this.promise=R,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}function T(R,k,I){f(function(){var H;try{H=k(I)}catch(A){return h.reject(R,A)}H===R?h.reject(R,new TypeError("Cannot resolve promise with itself")):h.resolve(R,H)})}function w(R){var k=R&&R.then;if(R&&(typeof R=="object"||typeof R=="function")&&typeof k=="function")return function(){k.apply(R,arguments)}}function _(R,k){var I=!1;function H(P){I||(I=!0,h.reject(R,P))}function A(P){I||(I=!0,h.resolve(R,P))}var U=N(function(){k(A,H)});U.status==="error"&&H(U.value)}function N(R,k){var I={};try{I.value=R(k),I.status="success"}catch(H){I.status="error",I.value=H}return I}(l.exports=C).prototype.finally=function(R){if(typeof R!="function")return this;var k=this.constructor;return this.then(function(I){return k.resolve(R()).then(function(){return I})},function(I){return k.resolve(R()).then(function(){throw I})})},C.prototype.catch=function(R){return this.then(null,R)},C.prototype.then=function(R,k){if(typeof R!="function"&&this.state===p||typeof k!="function"&&this.state===g)return this;var I=new this.constructor(d);return this.state!==v?T(I,this.state===p?R:k,this.outcome):this.queue.push(new S(I,R,k)),I},S.prototype.callFulfilled=function(R){h.resolve(this.promise,R)},S.prototype.otherCallFulfilled=function(R){T(this.promise,this.onFulfilled,R)},S.prototype.callRejected=function(R){h.reject(this.promise,R)},S.prototype.otherCallRejected=function(R){T(this.promise,this.onRejected,R)},h.resolve=function(R,k){var I=N(w,k);if(I.status==="error")return h.reject(R,I.value);var H=I.value;if(H)_(R,H);else{R.state=p,R.outcome=k;for(var A=-1,U=R.queue.length;++A<U;)R.queue[A].callFulfilled(k)}return R},h.reject=function(R,k){R.state=g,R.outcome=k;for(var I=-1,H=R.queue.length;++I<H;)R.queue[I].callRejected(k);return R},C.resolve=function(R){return R instanceof this?R:h.resolve(new this(d),R)},C.reject=function(R){var k=new this(d);return h.reject(k,R)},C.all=function(R){var k=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=R.length,H=!1;if(!I)return this.resolve([]);for(var A=new Array(I),U=0,P=-1,Y=new this(d);++P<I;)B(R[P],P);return Y;function B(q,le){k.resolve(q).then(function(z){A[le]=z,++U!==I||H||(H=!0,h.resolve(Y,A))},function(z){H||(H=!0,h.reject(Y,z))})}},C.race=function(R){var k=this;if(Object.prototype.toString.call(R)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=R.length,H=!1;if(!I)return this.resolve([]);for(var A=-1,U=new this(d);++A<I;)P=R[A],k.resolve(P).then(function(Y){H||(H=!0,h.resolve(U,Y))},function(Y){H||(H=!0,h.reject(U,Y))});var P;return U}},{immediate:36}],38:[function(o,l,u){var f={};(0,o("./lib/utils/common").assign)(f,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),l.exports=f},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,l,u){var f=o("./zlib/deflate"),d=o("./utils/common"),h=o("./utils/strings"),g=o("./zlib/messages"),p=o("./zlib/zstream"),v=Object.prototype.toString,C=0,S=-1,T=0,w=8;function _(R){if(!(this instanceof _))return new _(R);this.options=d.assign({level:S,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:T,to:""},R||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var I=f.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(I!==C)throw new Error(g[I]);if(k.header&&f.deflateSetHeader(this.strm,k.header),k.dictionary){var H;if(H=typeof k.dictionary=="string"?h.string2buf(k.dictionary):v.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(I=f.deflateSetDictionary(this.strm,H))!==C)throw new Error(g[I]);this._dict_set=!0}}function N(R,k){var I=new _(k);if(I.push(R,!0),I.err)throw I.msg||g[I.err];return I.result}_.prototype.push=function(R,k){var I,H,A=this.strm,U=this.options.chunkSize;if(this.ended)return!1;H=k===~~k?k:k===!0?4:0,typeof R=="string"?A.input=h.string2buf(R):v.call(R)==="[object ArrayBuffer]"?A.input=new Uint8Array(R):A.input=R,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new d.Buf8(U),A.next_out=0,A.avail_out=U),(I=f.deflate(A,H))!==1&&I!==C)return this.onEnd(I),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||H!==4&&H!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(d.shrinkBuf(A.output,A.next_out))):this.onData(d.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&I!==1);return H===4?(I=f.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===C):H!==2||(this.onEnd(C),!(A.avail_out=0))},_.prototype.onData=function(R){this.chunks.push(R)},_.prototype.onEnd=function(R){R===C&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=R,this.msg=this.strm.msg},u.Deflate=_,u.deflate=N,u.deflateRaw=function(R,k){return(k=k||{}).raw=!0,N(R,k)},u.gzip=function(R,k){return(k=k||{}).gzip=!0,N(R,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,l,u){var f=o("./zlib/inflate"),d=o("./utils/common"),h=o("./utils/strings"),g=o("./zlib/constants"),p=o("./zlib/messages"),v=o("./zlib/zstream"),C=o("./zlib/gzheader"),S=Object.prototype.toString;function T(_){if(!(this instanceof T))return new T(_);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},_||{});var N=this.options;N.raw&&0<=N.windowBits&&N.windowBits<16&&(N.windowBits=-N.windowBits,N.windowBits===0&&(N.windowBits=-15)),!(0<=N.windowBits&&N.windowBits<16)||_&&_.windowBits||(N.windowBits+=32),15<N.windowBits&&N.windowBits<48&&(15&N.windowBits)==0&&(N.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var R=f.inflateInit2(this.strm,N.windowBits);if(R!==g.Z_OK)throw new Error(p[R]);this.header=new C,f.inflateGetHeader(this.strm,this.header)}function w(_,N){var R=new T(N);if(R.push(_,!0),R.err)throw R.msg||p[R.err];return R.result}T.prototype.push=function(_,N){var R,k,I,H,A,U,P=this.strm,Y=this.options.chunkSize,B=this.options.dictionary,q=!1;if(this.ended)return!1;k=N===~~N?N:N===!0?g.Z_FINISH:g.Z_NO_FLUSH,typeof _=="string"?P.input=h.binstring2buf(_):S.call(_)==="[object ArrayBuffer]"?P.input=new Uint8Array(_):P.input=_,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new d.Buf8(Y),P.next_out=0,P.avail_out=Y),(R=f.inflate(P,g.Z_NO_FLUSH))===g.Z_NEED_DICT&&B&&(U=typeof B=="string"?h.string2buf(B):S.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,R=f.inflateSetDictionary(this.strm,U)),R===g.Z_BUF_ERROR&&q===!0&&(R=g.Z_OK,q=!1),R!==g.Z_STREAM_END&&R!==g.Z_OK)return this.onEnd(R),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&R!==g.Z_STREAM_END&&(P.avail_in!==0||k!==g.Z_FINISH&&k!==g.Z_SYNC_FLUSH)||(this.options.to==="string"?(I=h.utf8border(P.output,P.next_out),H=P.next_out-I,A=h.buf2string(P.output,I),P.next_out=H,P.avail_out=Y-H,H&&d.arraySet(P.output,P.output,I,H,0),this.onData(A)):this.onData(d.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(q=!0)}while((0<P.avail_in||P.avail_out===0)&&R!==g.Z_STREAM_END);return R===g.Z_STREAM_END&&(k=g.Z_FINISH),k===g.Z_FINISH?(R=f.inflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===g.Z_OK):k!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),!(P.avail_out=0))},T.prototype.onData=function(_){this.chunks.push(_)},T.prototype.onEnd=function(_){_===g.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},u.Inflate=T,u.inflate=w,u.inflateRaw=function(_,N){return(N=N||{}).raw=!0,w(_,N)},u.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,l,u){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";u.assign=function(g){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var v=p.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var C in v)v.hasOwnProperty(C)&&(g[C]=v[C])}}return g},u.shrinkBuf=function(g,p){return g.length===p?g:g.subarray?g.subarray(0,p):(g.length=p,g)};var d={arraySet:function(g,p,v,C,S){if(p.subarray&&g.subarray)g.set(p.subarray(v,v+C),S);else for(var T=0;T<C;T++)g[S+T]=p[v+T]},flattenChunks:function(g){var p,v,C,S,T,w;for(p=C=0,v=g.length;p<v;p++)C+=g[p].length;for(w=new Uint8Array(C),p=S=0,v=g.length;p<v;p++)T=g[p],w.set(T,S),S+=T.length;return w}},h={arraySet:function(g,p,v,C,S){for(var T=0;T<C;T++)g[S+T]=p[v+T]},flattenChunks:function(g){return[].concat.apply([],g)}};u.setTyped=function(g){g?(u.Buf8=Uint8Array,u.Buf16=Uint16Array,u.Buf32=Int32Array,u.assign(u,d)):(u.Buf8=Array,u.Buf16=Array,u.Buf32=Array,u.assign(u,h))},u.setTyped(f)},{}],42:[function(o,l,u){var f=o("./common"),d=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{d=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var g=new f.Buf8(256),p=0;p<256;p++)g[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function v(C,S){if(S<65537&&(C.subarray&&h||!C.subarray&&d))return String.fromCharCode.apply(null,f.shrinkBuf(C,S));for(var T="",w=0;w<S;w++)T+=String.fromCharCode(C[w]);return T}g[254]=g[254]=1,u.string2buf=function(C){var S,T,w,_,N,R=C.length,k=0;for(_=0;_<R;_++)(64512&(T=C.charCodeAt(_)))==55296&&_+1<R&&(64512&(w=C.charCodeAt(_+1)))==56320&&(T=65536+(T-55296<<10)+(w-56320),_++),k+=T<128?1:T<2048?2:T<65536?3:4;for(S=new f.Buf8(k),_=N=0;N<k;_++)(64512&(T=C.charCodeAt(_)))==55296&&_+1<R&&(64512&(w=C.charCodeAt(_+1)))==56320&&(T=65536+(T-55296<<10)+(w-56320),_++),T<128?S[N++]=T:(T<2048?S[N++]=192|T>>>6:(T<65536?S[N++]=224|T>>>12:(S[N++]=240|T>>>18,S[N++]=128|T>>>12&63),S[N++]=128|T>>>6&63),S[N++]=128|63&T);return S},u.buf2binstring=function(C){return v(C,C.length)},u.binstring2buf=function(C){for(var S=new f.Buf8(C.length),T=0,w=S.length;T<w;T++)S[T]=C.charCodeAt(T);return S},u.buf2string=function(C,S){var T,w,_,N,R=S||C.length,k=new Array(2*R);for(T=w=0;T<R;)if((_=C[T++])<128)k[w++]=_;else if(4<(N=g[_]))k[w++]=65533,T+=N-1;else{for(_&=N===2?31:N===3?15:7;1<N&&T<R;)_=_<<6|63&C[T++],N--;1<N?k[w++]=65533:_<65536?k[w++]=_:(_-=65536,k[w++]=55296|_>>10&1023,k[w++]=56320|1023&_)}return v(k,w)},u.utf8border=function(C,S){var T;for((S=S||C.length)>C.length&&(S=C.length),T=S-1;0<=T&&(192&C[T])==128;)T--;return T<0||T===0?S:T+g[C[T]]>S?T:S}},{"./common":41}],43:[function(o,l,u){l.exports=function(f,d,h,g){for(var p=65535&f|0,v=f>>>16&65535|0,C=0;h!==0;){for(h-=C=2e3<h?2e3:h;v=v+(p=p+d[g++]|0)|0,--C;);p%=65521,v%=65521}return p|v<<16|0}},{}],44:[function(o,l,u){l.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,l,u){var f=(function(){for(var d,h=[],g=0;g<256;g++){d=g;for(var p=0;p<8;p++)d=1&d?3988292384^d>>>1:d>>>1;h[g]=d}return h})();l.exports=function(d,h,g,p){var v=f,C=p+g;d^=-1;for(var S=p;S<C;S++)d=d>>>8^v[255&(d^h[S])];return-1^d}},{}],46:[function(o,l,u){var f,d=o("../utils/common"),h=o("./trees"),g=o("./adler32"),p=o("./crc32"),v=o("./messages"),C=0,S=4,T=0,w=-2,_=-1,N=4,R=2,k=8,I=9,H=286,A=30,U=19,P=2*H+1,Y=15,B=3,q=258,le=q+B+1,z=42,W=113,M=1,Z=2,O=3,j=4;function Se(b,ge){return b.msg=v[ge],ge}function de(b){return(b<<1)-(4<b?9:0)}function V(b){for(var ge=b.length;0<=--ge;)b[ge]=0}function F(b){var ge=b.state,he=ge.pending;he>b.avail_out&&(he=b.avail_out),he!==0&&(d.arraySet(b.output,ge.pending_buf,ge.pending_out,he,b.next_out),b.next_out+=he,ge.pending_out+=he,b.total_out+=he,b.avail_out-=he,ge.pending-=he,ge.pending===0&&(ge.pending_out=0))}function J(b,ge){h._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,ge),b.block_start=b.strstart,F(b.strm)}function pe(b,ge){b.pending_buf[b.pending++]=ge}function $(b,ge){b.pending_buf[b.pending++]=ge>>>8&255,b.pending_buf[b.pending++]=255&ge}function X(b,ge){var he,G,L=b.max_chain_length,ee=b.strstart,xe=b.prev_length,Te=b.nice_match,re=b.strstart>b.w_size-le?b.strstart-(b.w_size-le):0,Ae=b.window,De=b.w_mask,Me=b.prev,Ue=b.strstart+q,Fe=Ae[ee+xe-1],He=Ae[ee+xe];b.prev_length>=b.good_match&&(L>>=2),Te>b.lookahead&&(Te=b.lookahead);do if(Ae[(he=ge)+xe]===He&&Ae[he+xe-1]===Fe&&Ae[he]===Ae[ee]&&Ae[++he]===Ae[ee+1]){ee+=2,he++;do;while(Ae[++ee]===Ae[++he]&&Ae[++ee]===Ae[++he]&&Ae[++ee]===Ae[++he]&&Ae[++ee]===Ae[++he]&&Ae[++ee]===Ae[++he]&&Ae[++ee]===Ae[++he]&&Ae[++ee]===Ae[++he]&&Ae[++ee]===Ae[++he]&&ee<Ue);if(G=q-(Ue-ee),ee=Ue-q,xe<G){if(b.match_start=ge,Te<=(xe=G))break;Fe=Ae[ee+xe-1],He=Ae[ee+xe]}}while((ge=Me[ge&De])>re&&--L!=0);return xe<=b.lookahead?xe:b.lookahead}function ne(b){var ge,he,G,L,ee,xe,Te,re,Ae,De,Me=b.w_size;do{if(L=b.window_size-b.lookahead-b.strstart,b.strstart>=Me+(Me-le)){for(d.arraySet(b.window,b.window,Me,Me,0),b.match_start-=Me,b.strstart-=Me,b.block_start-=Me,ge=he=b.hash_size;G=b.head[--ge],b.head[ge]=Me<=G?G-Me:0,--he;);for(ge=he=Me;G=b.prev[--ge],b.prev[ge]=Me<=G?G-Me:0,--he;);L+=Me}if(b.strm.avail_in===0)break;if(xe=b.strm,Te=b.window,re=b.strstart+b.lookahead,Ae=L,De=void 0,De=xe.avail_in,Ae<De&&(De=Ae),he=De===0?0:(xe.avail_in-=De,d.arraySet(Te,xe.input,xe.next_in,De,re),xe.state.wrap===1?xe.adler=g(xe.adler,Te,De,re):xe.state.wrap===2&&(xe.adler=p(xe.adler,Te,De,re)),xe.next_in+=De,xe.total_in+=De,De),b.lookahead+=he,b.lookahead+b.insert>=B)for(ee=b.strstart-b.insert,b.ins_h=b.window[ee],b.ins_h=(b.ins_h<<b.hash_shift^b.window[ee+1])&b.hash_mask;b.insert&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[ee+B-1])&b.hash_mask,b.prev[ee&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=ee,ee++,b.insert--,!(b.lookahead+b.insert<B)););}while(b.lookahead<le&&b.strm.avail_in!==0)}function be(b,ge){for(var he,G;;){if(b.lookahead<le){if(ne(b),b.lookahead<le&&ge===C)return M;if(b.lookahead===0)break}if(he=0,b.lookahead>=B&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+B-1])&b.hash_mask,he=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),he!==0&&b.strstart-he<=b.w_size-le&&(b.match_length=X(b,he)),b.match_length>=B)if(G=h._tr_tally(b,b.strstart-b.match_start,b.match_length-B),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&b.lookahead>=B){for(b.match_length--;b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+B-1])&b.hash_mask,he=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart,--b.match_length!=0;);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else G=h._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(G&&(J(b,!1),b.strm.avail_out===0))return M}return b.insert=b.strstart<B-1?b.strstart:B-1,ge===S?(J(b,!0),b.strm.avail_out===0?O:j):b.last_lit&&(J(b,!1),b.strm.avail_out===0)?M:Z}function ve(b,ge){for(var he,G,L;;){if(b.lookahead<le){if(ne(b),b.lookahead<le&&ge===C)return M;if(b.lookahead===0)break}if(he=0,b.lookahead>=B&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+B-1])&b.hash_mask,he=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),b.prev_length=b.match_length,b.prev_match=b.match_start,b.match_length=B-1,he!==0&&b.prev_length<b.max_lazy_match&&b.strstart-he<=b.w_size-le&&(b.match_length=X(b,he),b.match_length<=5&&(b.strategy===1||b.match_length===B&&4096<b.strstart-b.match_start)&&(b.match_length=B-1)),b.prev_length>=B&&b.match_length<=b.prev_length){for(L=b.strstart+b.lookahead-B,G=h._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-B),b.lookahead-=b.prev_length-1,b.prev_length-=2;++b.strstart<=L&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+B-1])&b.hash_mask,he=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),--b.prev_length!=0;);if(b.match_available=0,b.match_length=B-1,b.strstart++,G&&(J(b,!1),b.strm.avail_out===0))return M}else if(b.match_available){if((G=h._tr_tally(b,0,b.window[b.strstart-1]))&&J(b,!1),b.strstart++,b.lookahead--,b.strm.avail_out===0)return M}else b.match_available=1,b.strstart++,b.lookahead--}return b.match_available&&(G=h._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0),b.insert=b.strstart<B-1?b.strstart:B-1,ge===S?(J(b,!0),b.strm.avail_out===0?O:j):b.last_lit&&(J(b,!1),b.strm.avail_out===0)?M:Z}function te(b,ge,he,G,L){this.good_length=b,this.max_lazy=ge,this.nice_length=he,this.max_chain=G,this.func=L}function Ee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*P),this.dyn_dtree=new d.Buf16(2*(2*A+1)),this.bl_tree=new d.Buf16(2*(2*U+1)),V(this.dyn_ltree),V(this.dyn_dtree),V(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(Y+1),this.heap=new d.Buf16(2*H+1),V(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*H+1),V(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ne(b){var ge;return b&&b.state?(b.total_in=b.total_out=0,b.data_type=R,(ge=b.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?z:W,b.adler=ge.wrap===2?0:1,ge.last_flush=C,h._tr_init(ge),T):Se(b,w)}function Le(b){var ge=Ne(b);return ge===T&&(function(he){he.window_size=2*he.w_size,V(he.head),he.max_lazy_match=f[he.level].max_lazy,he.good_match=f[he.level].good_length,he.nice_match=f[he.level].nice_length,he.max_chain_length=f[he.level].max_chain,he.strstart=0,he.block_start=0,he.lookahead=0,he.insert=0,he.match_length=he.prev_length=B-1,he.match_available=0,he.ins_h=0})(b.state),ge}function qe(b,ge,he,G,L,ee){if(!b)return w;var xe=1;if(ge===_&&(ge=6),G<0?(xe=0,G=-G):15<G&&(xe=2,G-=16),L<1||I<L||he!==k||G<8||15<G||ge<0||9<ge||ee<0||N<ee)return Se(b,w);G===8&&(G=9);var Te=new Ee;return(b.state=Te).strm=b,Te.wrap=xe,Te.gzhead=null,Te.w_bits=G,Te.w_size=1<<Te.w_bits,Te.w_mask=Te.w_size-1,Te.hash_bits=L+7,Te.hash_size=1<<Te.hash_bits,Te.hash_mask=Te.hash_size-1,Te.hash_shift=~~((Te.hash_bits+B-1)/B),Te.window=new d.Buf8(2*Te.w_size),Te.head=new d.Buf16(Te.hash_size),Te.prev=new d.Buf16(Te.w_size),Te.lit_bufsize=1<<L+6,Te.pending_buf_size=4*Te.lit_bufsize,Te.pending_buf=new d.Buf8(Te.pending_buf_size),Te.d_buf=1*Te.lit_bufsize,Te.l_buf=3*Te.lit_bufsize,Te.level=ge,Te.strategy=ee,Te.method=he,Le(b)}f=[new te(0,0,0,0,function(b,ge){var he=65535;for(he>b.pending_buf_size-5&&(he=b.pending_buf_size-5);;){if(b.lookahead<=1){if(ne(b),b.lookahead===0&&ge===C)return M;if(b.lookahead===0)break}b.strstart+=b.lookahead,b.lookahead=0;var G=b.block_start+he;if((b.strstart===0||b.strstart>=G)&&(b.lookahead=b.strstart-G,b.strstart=G,J(b,!1),b.strm.avail_out===0)||b.strstart-b.block_start>=b.w_size-le&&(J(b,!1),b.strm.avail_out===0))return M}return b.insert=0,ge===S?(J(b,!0),b.strm.avail_out===0?O:j):(b.strstart>b.block_start&&(J(b,!1),b.strm.avail_out),M)}),new te(4,4,8,4,be),new te(4,5,16,8,be),new te(4,6,32,32,be),new te(4,4,16,16,ve),new te(8,16,32,32,ve),new te(8,16,128,128,ve),new te(8,32,128,256,ve),new te(32,128,258,1024,ve),new te(32,258,258,4096,ve)],u.deflateInit=function(b,ge){return qe(b,ge,k,15,8,0)},u.deflateInit2=qe,u.deflateReset=Le,u.deflateResetKeep=Ne,u.deflateSetHeader=function(b,ge){return b&&b.state?b.state.wrap!==2?w:(b.state.gzhead=ge,T):w},u.deflate=function(b,ge){var he,G,L,ee;if(!b||!b.state||5<ge||ge<0)return b?Se(b,w):w;if(G=b.state,!b.output||!b.input&&b.avail_in!==0||G.status===666&&ge!==S)return Se(b,b.avail_out===0?-5:w);if(G.strm=b,he=G.last_flush,G.last_flush=ge,G.status===z)if(G.wrap===2)b.adler=0,pe(G,31),pe(G,139),pe(G,8),G.gzhead?(pe(G,(G.gzhead.text?1:0)+(G.gzhead.hcrc?2:0)+(G.gzhead.extra?4:0)+(G.gzhead.name?8:0)+(G.gzhead.comment?16:0)),pe(G,255&G.gzhead.time),pe(G,G.gzhead.time>>8&255),pe(G,G.gzhead.time>>16&255),pe(G,G.gzhead.time>>24&255),pe(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),pe(G,255&G.gzhead.os),G.gzhead.extra&&G.gzhead.extra.length&&(pe(G,255&G.gzhead.extra.length),pe(G,G.gzhead.extra.length>>8&255)),G.gzhead.hcrc&&(b.adler=p(b.adler,G.pending_buf,G.pending,0)),G.gzindex=0,G.status=69):(pe(G,0),pe(G,0),pe(G,0),pe(G,0),pe(G,0),pe(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),pe(G,3),G.status=W);else{var xe=k+(G.w_bits-8<<4)<<8;xe|=(2<=G.strategy||G.level<2?0:G.level<6?1:G.level===6?2:3)<<6,G.strstart!==0&&(xe|=32),xe+=31-xe%31,G.status=W,$(G,xe),G.strstart!==0&&($(G,b.adler>>>16),$(G,65535&b.adler)),b.adler=1}if(G.status===69)if(G.gzhead.extra){for(L=G.pending;G.gzindex<(65535&G.gzhead.extra.length)&&(G.pending!==G.pending_buf_size||(G.gzhead.hcrc&&G.pending>L&&(b.adler=p(b.adler,G.pending_buf,G.pending-L,L)),F(b),L=G.pending,G.pending!==G.pending_buf_size));)pe(G,255&G.gzhead.extra[G.gzindex]),G.gzindex++;G.gzhead.hcrc&&G.pending>L&&(b.adler=p(b.adler,G.pending_buf,G.pending-L,L)),G.gzindex===G.gzhead.extra.length&&(G.gzindex=0,G.status=73)}else G.status=73;if(G.status===73)if(G.gzhead.name){L=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>L&&(b.adler=p(b.adler,G.pending_buf,G.pending-L,L)),F(b),L=G.pending,G.pending===G.pending_buf_size)){ee=1;break}ee=G.gzindex<G.gzhead.name.length?255&G.gzhead.name.charCodeAt(G.gzindex++):0,pe(G,ee)}while(ee!==0);G.gzhead.hcrc&&G.pending>L&&(b.adler=p(b.adler,G.pending_buf,G.pending-L,L)),ee===0&&(G.gzindex=0,G.status=91)}else G.status=91;if(G.status===91)if(G.gzhead.comment){L=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>L&&(b.adler=p(b.adler,G.pending_buf,G.pending-L,L)),F(b),L=G.pending,G.pending===G.pending_buf_size)){ee=1;break}ee=G.gzindex<G.gzhead.comment.length?255&G.gzhead.comment.charCodeAt(G.gzindex++):0,pe(G,ee)}while(ee!==0);G.gzhead.hcrc&&G.pending>L&&(b.adler=p(b.adler,G.pending_buf,G.pending-L,L)),ee===0&&(G.status=103)}else G.status=103;if(G.status===103&&(G.gzhead.hcrc?(G.pending+2>G.pending_buf_size&&F(b),G.pending+2<=G.pending_buf_size&&(pe(G,255&b.adler),pe(G,b.adler>>8&255),b.adler=0,G.status=W)):G.status=W),G.pending!==0){if(F(b),b.avail_out===0)return G.last_flush=-1,T}else if(b.avail_in===0&&de(ge)<=de(he)&&ge!==S)return Se(b,-5);if(G.status===666&&b.avail_in!==0)return Se(b,-5);if(b.avail_in!==0||G.lookahead!==0||ge!==C&&G.status!==666){var Te=G.strategy===2?(function(re,Ae){for(var De;;){if(re.lookahead===0&&(ne(re),re.lookahead===0)){if(Ae===C)return M;break}if(re.match_length=0,De=h._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++,De&&(J(re,!1),re.strm.avail_out===0))return M}return re.insert=0,Ae===S?(J(re,!0),re.strm.avail_out===0?O:j):re.last_lit&&(J(re,!1),re.strm.avail_out===0)?M:Z})(G,ge):G.strategy===3?(function(re,Ae){for(var De,Me,Ue,Fe,He=re.window;;){if(re.lookahead<=q){if(ne(re),re.lookahead<=q&&Ae===C)return M;if(re.lookahead===0)break}if(re.match_length=0,re.lookahead>=B&&0<re.strstart&&(Me=He[Ue=re.strstart-1])===He[++Ue]&&Me===He[++Ue]&&Me===He[++Ue]){Fe=re.strstart+q;do;while(Me===He[++Ue]&&Me===He[++Ue]&&Me===He[++Ue]&&Me===He[++Ue]&&Me===He[++Ue]&&Me===He[++Ue]&&Me===He[++Ue]&&Me===He[++Ue]&&Ue<Fe);re.match_length=q-(Fe-Ue),re.match_length>re.lookahead&&(re.match_length=re.lookahead)}if(re.match_length>=B?(De=h._tr_tally(re,1,re.match_length-B),re.lookahead-=re.match_length,re.strstart+=re.match_length,re.match_length=0):(De=h._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++),De&&(J(re,!1),re.strm.avail_out===0))return M}return re.insert=0,Ae===S?(J(re,!0),re.strm.avail_out===0?O:j):re.last_lit&&(J(re,!1),re.strm.avail_out===0)?M:Z})(G,ge):f[G.level].func(G,ge);if(Te!==O&&Te!==j||(G.status=666),Te===M||Te===O)return b.avail_out===0&&(G.last_flush=-1),T;if(Te===Z&&(ge===1?h._tr_align(G):ge!==5&&(h._tr_stored_block(G,0,0,!1),ge===3&&(V(G.head),G.lookahead===0&&(G.strstart=0,G.block_start=0,G.insert=0))),F(b),b.avail_out===0))return G.last_flush=-1,T}return ge!==S?T:G.wrap<=0?1:(G.wrap===2?(pe(G,255&b.adler),pe(G,b.adler>>8&255),pe(G,b.adler>>16&255),pe(G,b.adler>>24&255),pe(G,255&b.total_in),pe(G,b.total_in>>8&255),pe(G,b.total_in>>16&255),pe(G,b.total_in>>24&255)):($(G,b.adler>>>16),$(G,65535&b.adler)),F(b),0<G.wrap&&(G.wrap=-G.wrap),G.pending!==0?T:1)},u.deflateEnd=function(b){var ge;return b&&b.state?(ge=b.state.status)!==z&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==W&&ge!==666?Se(b,w):(b.state=null,ge===W?Se(b,-3):T):w},u.deflateSetDictionary=function(b,ge){var he,G,L,ee,xe,Te,re,Ae,De=ge.length;if(!b||!b.state||(ee=(he=b.state).wrap)===2||ee===1&&he.status!==z||he.lookahead)return w;for(ee===1&&(b.adler=g(b.adler,ge,De,0)),he.wrap=0,De>=he.w_size&&(ee===0&&(V(he.head),he.strstart=0,he.block_start=0,he.insert=0),Ae=new d.Buf8(he.w_size),d.arraySet(Ae,ge,De-he.w_size,he.w_size,0),ge=Ae,De=he.w_size),xe=b.avail_in,Te=b.next_in,re=b.input,b.avail_in=De,b.next_in=0,b.input=ge,ne(he);he.lookahead>=B;){for(G=he.strstart,L=he.lookahead-(B-1);he.ins_h=(he.ins_h<<he.hash_shift^he.window[G+B-1])&he.hash_mask,he.prev[G&he.w_mask]=he.head[he.ins_h],he.head[he.ins_h]=G,G++,--L;);he.strstart=G,he.lookahead=B-1,ne(he)}return he.strstart+=he.lookahead,he.block_start=he.strstart,he.insert=he.lookahead,he.lookahead=0,he.match_length=he.prev_length=B-1,he.match_available=0,b.next_in=Te,b.input=re,b.avail_in=xe,he.wrap=ee,T},u.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,l,u){l.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,l,u){l.exports=function(f,d){var h,g,p,v,C,S,T,w,_,N,R,k,I,H,A,U,P,Y,B,q,le,z,W,M,Z;h=f.state,g=f.next_in,M=f.input,p=g+(f.avail_in-5),v=f.next_out,Z=f.output,C=v-(d-f.avail_out),S=v+(f.avail_out-257),T=h.dmax,w=h.wsize,_=h.whave,N=h.wnext,R=h.window,k=h.hold,I=h.bits,H=h.lencode,A=h.distcode,U=(1<<h.lenbits)-1,P=(1<<h.distbits)-1;e:do{I<15&&(k+=M[g++]<<I,I+=8,k+=M[g++]<<I,I+=8),Y=H[k&U];t:for(;;){if(k>>>=B=Y>>>24,I-=B,(B=Y>>>16&255)===0)Z[v++]=65535&Y;else{if(!(16&B)){if((64&B)==0){Y=H[(65535&Y)+(k&(1<<B)-1)];continue t}if(32&B){h.mode=12;break e}f.msg="invalid literal/length code",h.mode=30;break e}q=65535&Y,(B&=15)&&(I<B&&(k+=M[g++]<<I,I+=8),q+=k&(1<<B)-1,k>>>=B,I-=B),I<15&&(k+=M[g++]<<I,I+=8,k+=M[g++]<<I,I+=8),Y=A[k&P];n:for(;;){if(k>>>=B=Y>>>24,I-=B,!(16&(B=Y>>>16&255))){if((64&B)==0){Y=A[(65535&Y)+(k&(1<<B)-1)];continue n}f.msg="invalid distance code",h.mode=30;break e}if(le=65535&Y,I<(B&=15)&&(k+=M[g++]<<I,(I+=8)<B&&(k+=M[g++]<<I,I+=8)),T<(le+=k&(1<<B)-1)){f.msg="invalid distance too far back",h.mode=30;break e}if(k>>>=B,I-=B,(B=v-C)<le){if(_<(B=le-B)&&h.sane){f.msg="invalid distance too far back",h.mode=30;break e}if(W=R,(z=0)===N){if(z+=w-B,B<q){for(q-=B;Z[v++]=R[z++],--B;);z=v-le,W=Z}}else if(N<B){if(z+=w+N-B,(B-=N)<q){for(q-=B;Z[v++]=R[z++],--B;);if(z=0,N<q){for(q-=B=N;Z[v++]=R[z++],--B;);z=v-le,W=Z}}}else if(z+=N-B,B<q){for(q-=B;Z[v++]=R[z++],--B;);z=v-le,W=Z}for(;2<q;)Z[v++]=W[z++],Z[v++]=W[z++],Z[v++]=W[z++],q-=3;q&&(Z[v++]=W[z++],1<q&&(Z[v++]=W[z++]))}else{for(z=v-le;Z[v++]=Z[z++],Z[v++]=Z[z++],Z[v++]=Z[z++],2<(q-=3););q&&(Z[v++]=Z[z++],1<q&&(Z[v++]=Z[z++]))}break}}break}}while(g<p&&v<S);g-=q=I>>3,k&=(1<<(I-=q<<3))-1,f.next_in=g,f.next_out=v,f.avail_in=g<p?p-g+5:5-(g-p),f.avail_out=v<S?S-v+257:257-(v-S),h.hold=k,h.bits=I}},{}],49:[function(o,l,u){var f=o("../utils/common"),d=o("./adler32"),h=o("./crc32"),g=o("./inffast"),p=o("./inftrees"),v=1,C=2,S=0,T=-2,w=1,_=852,N=592;function R(z){return(z>>>24&255)+(z>>>8&65280)+((65280&z)<<8)+((255&z)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function I(z){var W;return z&&z.state?(W=z.state,z.total_in=z.total_out=W.total=0,z.msg="",W.wrap&&(z.adler=1&W.wrap),W.mode=w,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new f.Buf32(_),W.distcode=W.distdyn=new f.Buf32(N),W.sane=1,W.back=-1,S):T}function H(z){var W;return z&&z.state?((W=z.state).wsize=0,W.whave=0,W.wnext=0,I(z)):T}function A(z,W){var M,Z;return z&&z.state?(Z=z.state,W<0?(M=0,W=-W):(M=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?T:(Z.window!==null&&Z.wbits!==W&&(Z.window=null),Z.wrap=M,Z.wbits=W,H(z))):T}function U(z,W){var M,Z;return z?(Z=new k,(z.state=Z).window=null,(M=A(z,W))!==S&&(z.state=null),M):T}var P,Y,B=!0;function q(z){if(B){var W;for(P=new f.Buf32(512),Y=new f.Buf32(32),W=0;W<144;)z.lens[W++]=8;for(;W<256;)z.lens[W++]=9;for(;W<280;)z.lens[W++]=7;for(;W<288;)z.lens[W++]=8;for(p(v,z.lens,0,288,P,0,z.work,{bits:9}),W=0;W<32;)z.lens[W++]=5;p(C,z.lens,0,32,Y,0,z.work,{bits:5}),B=!1}z.lencode=P,z.lenbits=9,z.distcode=Y,z.distbits=5}function le(z,W,M,Z){var O,j=z.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new f.Buf8(j.wsize)),Z>=j.wsize?(f.arraySet(j.window,W,M-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(Z<(O=j.wsize-j.wnext)&&(O=Z),f.arraySet(j.window,W,M-Z,O,j.wnext),(Z-=O)?(f.arraySet(j.window,W,M-Z,Z,0),j.wnext=Z,j.whave=j.wsize):(j.wnext+=O,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=O))),0}u.inflateReset=H,u.inflateReset2=A,u.inflateResetKeep=I,u.inflateInit=function(z){return U(z,15)},u.inflateInit2=U,u.inflate=function(z,W){var M,Z,O,j,Se,de,V,F,J,pe,$,X,ne,be,ve,te,Ee,Ne,Le,qe,b,ge,he,G,L=0,ee=new f.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!z||!z.state||!z.output||!z.input&&z.avail_in!==0)return T;(M=z.state).mode===12&&(M.mode=13),Se=z.next_out,O=z.output,V=z.avail_out,j=z.next_in,Z=z.input,de=z.avail_in,F=M.hold,J=M.bits,pe=de,$=V,ge=S;e:for(;;)switch(M.mode){case w:if(M.wrap===0){M.mode=13;break}for(;J<16;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}if(2&M.wrap&&F===35615){ee[M.check=0]=255&F,ee[1]=F>>>8&255,M.check=h(M.check,ee,2,0),J=F=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&F)<<8)+(F>>8))%31){z.msg="incorrect header check",M.mode=30;break}if((15&F)!=8){z.msg="unknown compression method",M.mode=30;break}if(J-=4,b=8+(15&(F>>>=4)),M.wbits===0)M.wbits=b;else if(b>M.wbits){z.msg="invalid window size",M.mode=30;break}M.dmax=1<<b,z.adler=M.check=1,M.mode=512&F?10:12,J=F=0;break;case 2:for(;J<16;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}if(M.flags=F,(255&M.flags)!=8){z.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){z.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=F>>8&1),512&M.flags&&(ee[0]=255&F,ee[1]=F>>>8&255,M.check=h(M.check,ee,2,0)),J=F=0,M.mode=3;case 3:for(;J<32;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}M.head&&(M.head.time=F),512&M.flags&&(ee[0]=255&F,ee[1]=F>>>8&255,ee[2]=F>>>16&255,ee[3]=F>>>24&255,M.check=h(M.check,ee,4,0)),J=F=0,M.mode=4;case 4:for(;J<16;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}M.head&&(M.head.xflags=255&F,M.head.os=F>>8),512&M.flags&&(ee[0]=255&F,ee[1]=F>>>8&255,M.check=h(M.check,ee,2,0)),J=F=0,M.mode=5;case 5:if(1024&M.flags){for(;J<16;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}M.length=F,M.head&&(M.head.extra_len=F),512&M.flags&&(ee[0]=255&F,ee[1]=F>>>8&255,M.check=h(M.check,ee,2,0)),J=F=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(de<(X=M.length)&&(X=de),X&&(M.head&&(b=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),f.arraySet(M.head.extra,Z,j,X,b)),512&M.flags&&(M.check=h(M.check,Z,X,j)),de-=X,j+=X,M.length-=X),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(de===0)break e;for(X=0;b=Z[j+X++],M.head&&b&&M.length<65536&&(M.head.name+=String.fromCharCode(b)),b&&X<de;);if(512&M.flags&&(M.check=h(M.check,Z,X,j)),de-=X,j+=X,b)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(de===0)break e;for(X=0;b=Z[j+X++],M.head&&b&&M.length<65536&&(M.head.comment+=String.fromCharCode(b)),b&&X<de;);if(512&M.flags&&(M.check=h(M.check,Z,X,j)),de-=X,j+=X,b)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;J<16;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}if(F!==(65535&M.check)){z.msg="header crc mismatch",M.mode=30;break}J=F=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),z.adler=M.check=0,M.mode=12;break;case 10:for(;J<32;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}z.adler=M.check=R(F),J=F=0,M.mode=11;case 11:if(M.havedict===0)return z.next_out=Se,z.avail_out=V,z.next_in=j,z.avail_in=de,M.hold=F,M.bits=J,2;z.adler=M.check=1,M.mode=12;case 12:if(W===5||W===6)break e;case 13:if(M.last){F>>>=7&J,J-=7&J,M.mode=27;break}for(;J<3;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}switch(M.last=1&F,J-=1,3&(F>>>=1)){case 0:M.mode=14;break;case 1:if(q(M),M.mode=20,W!==6)break;F>>>=2,J-=2;break e;case 2:M.mode=17;break;case 3:z.msg="invalid block type",M.mode=30}F>>>=2,J-=2;break;case 14:for(F>>>=7&J,J-=7&J;J<32;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}if((65535&F)!=(F>>>16^65535)){z.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&F,J=F=0,M.mode=15,W===6)break e;case 15:M.mode=16;case 16:if(X=M.length){if(de<X&&(X=de),V<X&&(X=V),X===0)break e;f.arraySet(O,Z,j,X,Se),de-=X,j+=X,V-=X,Se+=X,M.length-=X;break}M.mode=12;break;case 17:for(;J<14;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}if(M.nlen=257+(31&F),F>>>=5,J-=5,M.ndist=1+(31&F),F>>>=5,J-=5,M.ncode=4+(15&F),F>>>=4,J-=4,286<M.nlen||30<M.ndist){z.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;J<3;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}M.lens[xe[M.have++]]=7&F,F>>>=3,J-=3}for(;M.have<19;)M.lens[xe[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,he={bits:M.lenbits},ge=p(0,M.lens,0,19,M.lencode,0,M.work,he),M.lenbits=he.bits,ge){z.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;te=(L=M.lencode[F&(1<<M.lenbits)-1])>>>16&255,Ee=65535&L,!((ve=L>>>24)<=J);){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}if(Ee<16)F>>>=ve,J-=ve,M.lens[M.have++]=Ee;else{if(Ee===16){for(G=ve+2;J<G;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}if(F>>>=ve,J-=ve,M.have===0){z.msg="invalid bit length repeat",M.mode=30;break}b=M.lens[M.have-1],X=3+(3&F),F>>>=2,J-=2}else if(Ee===17){for(G=ve+3;J<G;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}J-=ve,b=0,X=3+(7&(F>>>=ve)),F>>>=3,J-=3}else{for(G=ve+7;J<G;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}J-=ve,b=0,X=11+(127&(F>>>=ve)),F>>>=7,J-=7}if(M.have+X>M.nlen+M.ndist){z.msg="invalid bit length repeat",M.mode=30;break}for(;X--;)M.lens[M.have++]=b}}if(M.mode===30)break;if(M.lens[256]===0){z.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,he={bits:M.lenbits},ge=p(v,M.lens,0,M.nlen,M.lencode,0,M.work,he),M.lenbits=he.bits,ge){z.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,he={bits:M.distbits},ge=p(C,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,he),M.distbits=he.bits,ge){z.msg="invalid distances set",M.mode=30;break}if(M.mode=20,W===6)break e;case 20:M.mode=21;case 21:if(6<=de&&258<=V){z.next_out=Se,z.avail_out=V,z.next_in=j,z.avail_in=de,M.hold=F,M.bits=J,g(z,$),Se=z.next_out,O=z.output,V=z.avail_out,j=z.next_in,Z=z.input,de=z.avail_in,F=M.hold,J=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;te=(L=M.lencode[F&(1<<M.lenbits)-1])>>>16&255,Ee=65535&L,!((ve=L>>>24)<=J);){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}if(te&&(240&te)==0){for(Ne=ve,Le=te,qe=Ee;te=(L=M.lencode[qe+((F&(1<<Ne+Le)-1)>>Ne)])>>>16&255,Ee=65535&L,!(Ne+(ve=L>>>24)<=J);){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}F>>>=Ne,J-=Ne,M.back+=Ne}if(F>>>=ve,J-=ve,M.back+=ve,M.length=Ee,te===0){M.mode=26;break}if(32&te){M.back=-1,M.mode=12;break}if(64&te){z.msg="invalid literal/length code",M.mode=30;break}M.extra=15&te,M.mode=22;case 22:if(M.extra){for(G=M.extra;J<G;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}M.length+=F&(1<<M.extra)-1,F>>>=M.extra,J-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;te=(L=M.distcode[F&(1<<M.distbits)-1])>>>16&255,Ee=65535&L,!((ve=L>>>24)<=J);){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}if((240&te)==0){for(Ne=ve,Le=te,qe=Ee;te=(L=M.distcode[qe+((F&(1<<Ne+Le)-1)>>Ne)])>>>16&255,Ee=65535&L,!(Ne+(ve=L>>>24)<=J);){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}F>>>=Ne,J-=Ne,M.back+=Ne}if(F>>>=ve,J-=ve,M.back+=ve,64&te){z.msg="invalid distance code",M.mode=30;break}M.offset=Ee,M.extra=15&te,M.mode=24;case 24:if(M.extra){for(G=M.extra;J<G;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}M.offset+=F&(1<<M.extra)-1,F>>>=M.extra,J-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){z.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(V===0)break e;if(X=$-V,M.offset>X){if((X=M.offset-X)>M.whave&&M.sane){z.msg="invalid distance too far back",M.mode=30;break}ne=X>M.wnext?(X-=M.wnext,M.wsize-X):M.wnext-X,X>M.length&&(X=M.length),be=M.window}else be=O,ne=Se-M.offset,X=M.length;for(V<X&&(X=V),V-=X,M.length-=X;O[Se++]=be[ne++],--X;);M.length===0&&(M.mode=21);break;case 26:if(V===0)break e;O[Se++]=M.length,V--,M.mode=21;break;case 27:if(M.wrap){for(;J<32;){if(de===0)break e;de--,F|=Z[j++]<<J,J+=8}if($-=V,z.total_out+=$,M.total+=$,$&&(z.adler=M.check=M.flags?h(M.check,O,$,Se-$):d(M.check,O,$,Se-$)),$=V,(M.flags?F:R(F))!==M.check){z.msg="incorrect data check",M.mode=30;break}J=F=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;J<32;){if(de===0)break e;de--,F+=Z[j++]<<J,J+=8}if(F!==(4294967295&M.total)){z.msg="incorrect length check",M.mode=30;break}J=F=0}M.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return T}return z.next_out=Se,z.avail_out=V,z.next_in=j,z.avail_in=de,M.hold=F,M.bits=J,(M.wsize||$!==z.avail_out&&M.mode<30&&(M.mode<27||W!==4))&&le(z,z.output,z.next_out,$-z.avail_out)?(M.mode=31,-4):(pe-=z.avail_in,$-=z.avail_out,z.total_in+=pe,z.total_out+=$,M.total+=$,M.wrap&&$&&(z.adler=M.check=M.flags?h(M.check,O,$,z.next_out-$):d(M.check,O,$,z.next_out-$)),z.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(pe==0&&$===0||W===4)&&ge===S&&(ge=-5),ge)},u.inflateEnd=function(z){if(!z||!z.state)return T;var W=z.state;return W.window&&(W.window=null),z.state=null,S},u.inflateGetHeader=function(z,W){var M;return z&&z.state?(2&(M=z.state).wrap)==0?T:((M.head=W).done=!1,S):T},u.inflateSetDictionary=function(z,W){var M,Z=W.length;return z&&z.state?(M=z.state).wrap!==0&&M.mode!==11?T:M.mode===11&&d(1,W,Z,0)!==M.check?-3:le(z,W,Z,Z)?(M.mode=31,-4):(M.havedict=1,S):T},u.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,l,u){var f=o("../utils/common"),d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];l.exports=function(v,C,S,T,w,_,N,R){var k,I,H,A,U,P,Y,B,q,le=R.bits,z=0,W=0,M=0,Z=0,O=0,j=0,Se=0,de=0,V=0,F=0,J=null,pe=0,$=new f.Buf16(16),X=new f.Buf16(16),ne=null,be=0;for(z=0;z<=15;z++)$[z]=0;for(W=0;W<T;W++)$[C[S+W]]++;for(O=le,Z=15;1<=Z&&$[Z]===0;Z--);if(Z<O&&(O=Z),Z===0)return w[_++]=20971520,w[_++]=20971520,R.bits=1,0;for(M=1;M<Z&&$[M]===0;M++);for(O<M&&(O=M),z=de=1;z<=15;z++)if(de<<=1,(de-=$[z])<0)return-1;if(0<de&&(v===0||Z!==1))return-1;for(X[1]=0,z=1;z<15;z++)X[z+1]=X[z]+$[z];for(W=0;W<T;W++)C[S+W]!==0&&(N[X[C[S+W]]++]=W);if(P=v===0?(J=ne=N,19):v===1?(J=d,pe-=257,ne=h,be-=257,256):(J=g,ne=p,-1),z=M,U=_,Se=W=F=0,H=-1,A=(V=1<<(j=O))-1,v===1&&852<V||v===2&&592<V)return 1;for(;;){for(Y=z-Se,q=N[W]<P?(B=0,N[W]):N[W]>P?(B=ne[be+N[W]],J[pe+N[W]]):(B=96,0),k=1<<z-Se,M=I=1<<j;w[U+(F>>Se)+(I-=k)]=Y<<24|B<<16|q|0,I!==0;);for(k=1<<z-1;F&k;)k>>=1;if(k!==0?(F&=k-1,F+=k):F=0,W++,--$[z]==0){if(z===Z)break;z=C[S+N[W]]}if(O<z&&(F&A)!==H){for(Se===0&&(Se=O),U+=M,de=1<<(j=z-Se);j+Se<Z&&!((de-=$[j+Se])<=0);)j++,de<<=1;if(V+=1<<j,v===1&&852<V||v===2&&592<V)return 1;w[H=F&A]=O<<24|j<<16|U-_|0}}return F!==0&&(w[U+F]=z-Se<<24|64<<16|0),R.bits=O,0}},{"../utils/common":41}],51:[function(o,l,u){l.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,l,u){var f=o("../utils/common"),d=0,h=1;function g(L){for(var ee=L.length;0<=--ee;)L[ee]=0}var p=0,v=29,C=256,S=C+1+v,T=30,w=19,_=2*S+1,N=15,R=16,k=7,I=256,H=16,A=17,U=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=new Array(2*(S+2));g(le);var z=new Array(2*T);g(z);var W=new Array(512);g(W);var M=new Array(256);g(M);var Z=new Array(v);g(Z);var O,j,Se,de=new Array(T);function V(L,ee,xe,Te,re){this.static_tree=L,this.extra_bits=ee,this.extra_base=xe,this.elems=Te,this.max_length=re,this.has_stree=L&&L.length}function F(L,ee){this.dyn_tree=L,this.max_code=0,this.stat_desc=ee}function J(L){return L<256?W[L]:W[256+(L>>>7)]}function pe(L,ee){L.pending_buf[L.pending++]=255&ee,L.pending_buf[L.pending++]=ee>>>8&255}function $(L,ee,xe){L.bi_valid>R-xe?(L.bi_buf|=ee<<L.bi_valid&65535,pe(L,L.bi_buf),L.bi_buf=ee>>R-L.bi_valid,L.bi_valid+=xe-R):(L.bi_buf|=ee<<L.bi_valid&65535,L.bi_valid+=xe)}function X(L,ee,xe){$(L,xe[2*ee],xe[2*ee+1])}function ne(L,ee){for(var xe=0;xe|=1&L,L>>>=1,xe<<=1,0<--ee;);return xe>>>1}function be(L,ee,xe){var Te,re,Ae=new Array(N+1),De=0;for(Te=1;Te<=N;Te++)Ae[Te]=De=De+xe[Te-1]<<1;for(re=0;re<=ee;re++){var Me=L[2*re+1];Me!==0&&(L[2*re]=ne(Ae[Me]++,Me))}}function ve(L){var ee;for(ee=0;ee<S;ee++)L.dyn_ltree[2*ee]=0;for(ee=0;ee<T;ee++)L.dyn_dtree[2*ee]=0;for(ee=0;ee<w;ee++)L.bl_tree[2*ee]=0;L.dyn_ltree[2*I]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function te(L){8<L.bi_valid?pe(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function Ee(L,ee,xe,Te){var re=2*ee,Ae=2*xe;return L[re]<L[Ae]||L[re]===L[Ae]&&Te[ee]<=Te[xe]}function Ne(L,ee,xe){for(var Te=L.heap[xe],re=xe<<1;re<=L.heap_len&&(re<L.heap_len&&Ee(ee,L.heap[re+1],L.heap[re],L.depth)&&re++,!Ee(ee,Te,L.heap[re],L.depth));)L.heap[xe]=L.heap[re],xe=re,re<<=1;L.heap[xe]=Te}function Le(L,ee,xe){var Te,re,Ae,De,Me=0;if(L.last_lit!==0)for(;Te=L.pending_buf[L.d_buf+2*Me]<<8|L.pending_buf[L.d_buf+2*Me+1],re=L.pending_buf[L.l_buf+Me],Me++,Te===0?X(L,re,ee):(X(L,(Ae=M[re])+C+1,ee),(De=P[Ae])!==0&&$(L,re-=Z[Ae],De),X(L,Ae=J(--Te),xe),(De=Y[Ae])!==0&&$(L,Te-=de[Ae],De)),Me<L.last_lit;);X(L,I,ee)}function qe(L,ee){var xe,Te,re,Ae=ee.dyn_tree,De=ee.stat_desc.static_tree,Me=ee.stat_desc.has_stree,Ue=ee.stat_desc.elems,Fe=-1;for(L.heap_len=0,L.heap_max=_,xe=0;xe<Ue;xe++)Ae[2*xe]!==0?(L.heap[++L.heap_len]=Fe=xe,L.depth[xe]=0):Ae[2*xe+1]=0;for(;L.heap_len<2;)Ae[2*(re=L.heap[++L.heap_len]=Fe<2?++Fe:0)]=1,L.depth[re]=0,L.opt_len--,Me&&(L.static_len-=De[2*re+1]);for(ee.max_code=Fe,xe=L.heap_len>>1;1<=xe;xe--)Ne(L,Ae,xe);for(re=Ue;xe=L.heap[1],L.heap[1]=L.heap[L.heap_len--],Ne(L,Ae,1),Te=L.heap[1],L.heap[--L.heap_max]=xe,L.heap[--L.heap_max]=Te,Ae[2*re]=Ae[2*xe]+Ae[2*Te],L.depth[re]=(L.depth[xe]>=L.depth[Te]?L.depth[xe]:L.depth[Te])+1,Ae[2*xe+1]=Ae[2*Te+1]=re,L.heap[1]=re++,Ne(L,Ae,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],(function(He,je){var cn,Et,fn,et,dn,tn,ct=je.dyn_tree,Rt=je.max_code,Kt=je.stat_desc.static_tree,Wn=je.stat_desc.has_stree,Wi=je.stat_desc.extra_bits,Nn=je.stat_desc.extra_base,gt=je.stat_desc.max_length,Jt=0;for(et=0;et<=N;et++)He.bl_count[et]=0;for(ct[2*He.heap[He.heap_max]+1]=0,cn=He.heap_max+1;cn<_;cn++)gt<(et=ct[2*ct[2*(Et=He.heap[cn])+1]+1]+1)&&(et=gt,Jt++),ct[2*Et+1]=et,Rt<Et||(He.bl_count[et]++,dn=0,Nn<=Et&&(dn=Wi[Et-Nn]),tn=ct[2*Et],He.opt_len+=tn*(et+dn),Wn&&(He.static_len+=tn*(Kt[2*Et+1]+dn)));if(Jt!==0){do{for(et=gt-1;He.bl_count[et]===0;)et--;He.bl_count[et]--,He.bl_count[et+1]+=2,He.bl_count[gt]--,Jt-=2}while(0<Jt);for(et=gt;et!==0;et--)for(Et=He.bl_count[et];Et!==0;)Rt<(fn=He.heap[--cn])||(ct[2*fn+1]!==et&&(He.opt_len+=(et-ct[2*fn+1])*ct[2*fn],ct[2*fn+1]=et),Et--)}})(L,ee),be(Ae,Fe,L.bl_count)}function b(L,ee,xe){var Te,re,Ae=-1,De=ee[1],Me=0,Ue=7,Fe=4;for(De===0&&(Ue=138,Fe=3),ee[2*(xe+1)+1]=65535,Te=0;Te<=xe;Te++)re=De,De=ee[2*(Te+1)+1],++Me<Ue&&re===De||(Me<Fe?L.bl_tree[2*re]+=Me:re!==0?(re!==Ae&&L.bl_tree[2*re]++,L.bl_tree[2*H]++):Me<=10?L.bl_tree[2*A]++:L.bl_tree[2*U]++,Ae=re,Fe=(Me=0)===De?(Ue=138,3):re===De?(Ue=6,3):(Ue=7,4))}function ge(L,ee,xe){var Te,re,Ae=-1,De=ee[1],Me=0,Ue=7,Fe=4;for(De===0&&(Ue=138,Fe=3),Te=0;Te<=xe;Te++)if(re=De,De=ee[2*(Te+1)+1],!(++Me<Ue&&re===De)){if(Me<Fe)for(;X(L,re,L.bl_tree),--Me!=0;);else re!==0?(re!==Ae&&(X(L,re,L.bl_tree),Me--),X(L,H,L.bl_tree),$(L,Me-3,2)):Me<=10?(X(L,A,L.bl_tree),$(L,Me-3,3)):(X(L,U,L.bl_tree),$(L,Me-11,7));Ae=re,Fe=(Me=0)===De?(Ue=138,3):re===De?(Ue=6,3):(Ue=7,4)}}g(de);var he=!1;function G(L,ee,xe,Te){$(L,(p<<1)+(Te?1:0),3),(function(re,Ae,De,Me){te(re),pe(re,De),pe(re,~De),f.arraySet(re.pending_buf,re.window,Ae,De,re.pending),re.pending+=De})(L,ee,xe)}u._tr_init=function(L){he||((function(){var ee,xe,Te,re,Ae,De=new Array(N+1);for(re=Te=0;re<v-1;re++)for(Z[re]=Te,ee=0;ee<1<<P[re];ee++)M[Te++]=re;for(M[Te-1]=re,re=Ae=0;re<16;re++)for(de[re]=Ae,ee=0;ee<1<<Y[re];ee++)W[Ae++]=re;for(Ae>>=7;re<T;re++)for(de[re]=Ae<<7,ee=0;ee<1<<Y[re]-7;ee++)W[256+Ae++]=re;for(xe=0;xe<=N;xe++)De[xe]=0;for(ee=0;ee<=143;)le[2*ee+1]=8,ee++,De[8]++;for(;ee<=255;)le[2*ee+1]=9,ee++,De[9]++;for(;ee<=279;)le[2*ee+1]=7,ee++,De[7]++;for(;ee<=287;)le[2*ee+1]=8,ee++,De[8]++;for(be(le,S+1,De),ee=0;ee<T;ee++)z[2*ee+1]=5,z[2*ee]=ne(ee,5);O=new V(le,P,C+1,S,N),j=new V(z,Y,0,T,N),Se=new V(new Array(0),B,0,w,k)})(),he=!0),L.l_desc=new F(L.dyn_ltree,O),L.d_desc=new F(L.dyn_dtree,j),L.bl_desc=new F(L.bl_tree,Se),L.bi_buf=0,L.bi_valid=0,ve(L)},u._tr_stored_block=G,u._tr_flush_block=function(L,ee,xe,Te){var re,Ae,De=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=(function(Me){var Ue,Fe=4093624447;for(Ue=0;Ue<=31;Ue++,Fe>>>=1)if(1&Fe&&Me.dyn_ltree[2*Ue]!==0)return d;if(Me.dyn_ltree[18]!==0||Me.dyn_ltree[20]!==0||Me.dyn_ltree[26]!==0)return h;for(Ue=32;Ue<C;Ue++)if(Me.dyn_ltree[2*Ue]!==0)return h;return d})(L)),qe(L,L.l_desc),qe(L,L.d_desc),De=(function(Me){var Ue;for(b(Me,Me.dyn_ltree,Me.l_desc.max_code),b(Me,Me.dyn_dtree,Me.d_desc.max_code),qe(Me,Me.bl_desc),Ue=w-1;3<=Ue&&Me.bl_tree[2*q[Ue]+1]===0;Ue--);return Me.opt_len+=3*(Ue+1)+5+5+4,Ue})(L),re=L.opt_len+3+7>>>3,(Ae=L.static_len+3+7>>>3)<=re&&(re=Ae)):re=Ae=xe+5,xe+4<=re&&ee!==-1?G(L,ee,xe,Te):L.strategy===4||Ae===re?($(L,2+(Te?1:0),3),Le(L,le,z)):($(L,4+(Te?1:0),3),(function(Me,Ue,Fe,He){var je;for($(Me,Ue-257,5),$(Me,Fe-1,5),$(Me,He-4,4),je=0;je<He;je++)$(Me,Me.bl_tree[2*q[je]+1],3);ge(Me,Me.dyn_ltree,Ue-1),ge(Me,Me.dyn_dtree,Fe-1)})(L,L.l_desc.max_code+1,L.d_desc.max_code+1,De+1),Le(L,L.dyn_ltree,L.dyn_dtree)),ve(L),Te&&te(L)},u._tr_tally=function(L,ee,xe){return L.pending_buf[L.d_buf+2*L.last_lit]=ee>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&ee,L.pending_buf[L.l_buf+L.last_lit]=255&xe,L.last_lit++,ee===0?L.dyn_ltree[2*xe]++:(L.matches++,ee--,L.dyn_ltree[2*(M[xe]+C+1)]++,L.dyn_dtree[2*J(ee)]++),L.last_lit===L.lit_bufsize-1},u._tr_align=function(L){$(L,2,3),X(L,I,le),(function(ee){ee.bi_valid===16?(pe(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)})(L)}},{"../utils/common":41}],53:[function(o,l,u){l.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,l,u){(function(f){(function(d,h){if(!d.setImmediate){var g,p,v,C,S=1,T={},w=!1,_=d.document,N=Object.getPrototypeOf&&Object.getPrototypeOf(d);N=N&&N.setTimeout?N:d,g={}.toString.call(d.process)==="[object process]"?function(H){process.nextTick(function(){k(H)})}:(function(){if(d.postMessage&&!d.importScripts){var H=!0,A=d.onmessage;return d.onmessage=function(){H=!1},d.postMessage("","*"),d.onmessage=A,H}})()?(C="setImmediate$"+Math.random()+"$",d.addEventListener?d.addEventListener("message",I,!1):d.attachEvent("onmessage",I),function(H){d.postMessage(C+H,"*")}):d.MessageChannel?((v=new MessageChannel).port1.onmessage=function(H){k(H.data)},function(H){v.port2.postMessage(H)}):_&&"onreadystatechange"in _.createElement("script")?(p=_.documentElement,function(H){var A=_.createElement("script");A.onreadystatechange=function(){k(H),A.onreadystatechange=null,p.removeChild(A),A=null},p.appendChild(A)}):function(H){setTimeout(k,0,H)},N.setImmediate=function(H){typeof H!="function"&&(H=new Function(""+H));for(var A=new Array(arguments.length-1),U=0;U<A.length;U++)A[U]=arguments[U+1];var P={callback:H,args:A};return T[S]=P,g(S),S++},N.clearImmediate=R}function R(H){delete T[H]}function k(H){if(w)setTimeout(k,0,H);else{var A=T[H];if(A){w=!0;try{(function(U){var P=U.callback,Y=U.args;switch(Y.length){case 0:P();break;case 1:P(Y[0]);break;case 2:P(Y[0],Y[1]);break;case 3:P(Y[0],Y[1],Y[2]);break;default:P.apply(h,Y)}})(A)}finally{R(H),w=!1}}}}function I(H){H.source===d&&typeof H.data=="string"&&H.data.indexOf(C)===0&&k(+H.data.slice(C.length))}})(typeof self>"u"?f===void 0?this:f:self)}).call(this,typeof pr<"u"?pr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Bu)),Bu.exports}var Bw=zw();const Gw=Qu(Bw),Vw=({content:n,onUseImageAsInput:e,onImageClick:o,originalImageUrl:l,currentPrompt:u,currentStyle:f})=>{const[d,h]=ae.useState(n.images&&n.images.length>1?"multi-grid":"result"),[g,p]=ae.useState("result"),v=ae.useRef(null),[C,S]=ae.useState(50),[T,w]=ae.useState(!1),[_,N]=ae.useState("Original"),[R,k]=ae.useState("Final Result"),[I,H]=ae.useState(0),A=12,[U,P]=ae.useState(0),[Y,B]=ae.useState(0),[q,le]=ae.useState(1),[z,W]=ae.useState(0);ae.useEffect(()=>{H(0),W(0),n.images&&n.images.length>1?h("multi-grid"):h("result")},[n]),ae.useEffect(()=>{const X=be=>{if(!T||!v.current)return;const ve=v.current.getBoundingClientRect(),Ee=Math.max(0,Math.min(be.clientX-ve.left,ve.width))/ve.width*100;S(Ee)},ne=()=>w(!1);return T&&(window.addEventListener("mousemove",X),window.addEventListener("mouseup",ne)),()=>{window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",ne)}},[T]);const M=()=>w(!0);ae.useEffect(()=>{const X=ne=>{d!=="result"||!n.images||n.images.length<=1||(ne.key==="ArrowLeft"?(ne.preventDefault(),W(be=>Math.max(0,be-1))):ne.key==="ArrowRight"&&(ne.preventDefault(),W(be=>Math.min(n.images.length-1,be+1))))};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[d,n.images]);const Z=()=>{W(X=>Math.max(0,X-1))},O=()=>{n.images&&W(X=>Math.min(n.images.length-1,X+1))},j=(X,ne)=>{const be=document.createElement("a");be.href=X,be.download=ne,document.body.appendChild(be),be.click(),document.body.removeChild(be)},Se=async(X,ne)=>{try{const be=await Jl(X,{prompt:u,style:f},ne),ve=document.createElement("a");ve.href=be.dataUrl,ve.download=be.filename,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve)}catch(be){console.error("带元数据下载失败，使用普通下载:",be),j(X,`${ne}.png`)}},de=async()=>{n.imageUrl&&await Se(n.imageUrl,"generated-image")},V=async()=>{n.secondaryImageUrl&&await Se(n.secondaryImageUrl,"line-art"),n.imageUrl&&await Se(n.imageUrl,"final-result")},F=ae.useCallback(async()=>{const X=[{url:l,img:new Image}];n.secondaryImageUrl&&n.imageUrl?(X.push({url:n.secondaryImageUrl,img:new Image}),X.push({url:n.imageUrl,img:new Image})):n.imageUrl&&X.push({url:n.imageUrl,img:new Image});const ne=X.filter(qe=>qe.url);if(ne.length<2)return;const be=ne.map(qe=>(qe.img.crossOrigin="anonymous",qe.img.src=qe.url,new Promise(b=>qe.img.onload=b)));await Promise.all(be);const ve=document.createElement("canvas"),te=ve.getContext("2d");if(!te)return;const Ee=ne.reduce((qe,b)=>qe+b.img.width,0),Ne=Math.max(...ne.map(qe=>qe.img.height));ve.width=Ee,ve.height=Ne,te.fillStyle="#000000",te.fillRect(0,0,ve.width,ve.height);let Le=0;for(const qe of ne)te.drawImage(qe.img,Le,(Ne-qe.img.height)/2),Le+=qe.img.width;j(ve.toDataURL("image/png"),`comparison-image-${Date.now()}.png`)},[l,n.imageUrl,n.secondaryImageUrl]);if(n.secondaryImageUrl&&n.imageUrl&&l){const X={Original:l,"Line Art":n.secondaryImageUrl,"Final Result":n.imageUrl},ne=["Original","Line Art","Final Result"],be=X[_],ve=X[R];return x.jsxs("div",{className:"w-full h-full flex flex-col items-center gap-4 animate-fade-in",children:[x.jsx("div",{className:"w-full flex justify-center",children:x.jsx("div",{className:"p-1 bg-gray-900 rounded-lg flex items-center gap-1",children:["result","grid","slider"].map(te=>{const Ee={result:"结果",grid:"网格",slider:"滑块"};return x.jsx("button",{onClick:()=>p(te),className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors duration-200 ${g===te?"bg-gradient-to-r from-orange-500 to-yellow-400 text-black":"text-gray-300 hover:bg-gray-700"}`,children:Ee[te]},te)})})}),g==="result"&&x.jsxs("div",{className:"w-full h-full flex flex-col items-center gap-4 flex-grow",children:[x.jsx("div",{className:"w-full h-full grid grid-cols-1 md:grid-cols-2 gap-2 flex-grow",children:[{src:n.secondaryImageUrl,label:"Line Art"},{src:n.imageUrl,label:"Final Result"}].map(({src:te,label:Ee},Ne)=>{const Le=[n.secondaryImageUrl,n.imageUrl];return x.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-white/10 bg-black flex items-center justify-center flex-col p-1 aspect-square md:aspect-auto",children:[x.jsx("img",{src:te,alt:Ee,className:"max-w-full max-h-full object-contain cursor-pointer",onClick:()=>o(te,Le,Ne)}),x.jsx("div",{className:"absolute bottom-1 right-1 text-xs bg-black/50 text-white px-2 py-1 rounded",children:Ee})]},Ee)})}),x.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-3 mt-auto",children:[x.jsxs("button",{onClick:V,className:"flex-1 py-2 px-4 bg-gray-800 text-gray-200 font-semibold rounded-lg shadow-sm hover:bg-gray-700 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"下载两张"]}),x.jsxs("button",{onClick:()=>e(n.secondaryImageUrl),className:"flex-1 py-2 px-4 bg-gray-800 text-gray-200 font-semibold rounded-lg shadow-sm hover:bg-gray-700 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),"使用线稿作为输入"]}),x.jsxs("button",{onClick:()=>e(n.imageUrl),className:"flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-yellow-400 text-black font-semibold rounded-lg shadow-md shadow-orange-500/20 hover:from-orange-600 hover:to-yellow-500 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),"使用最终结果作为输入"]})]})]}),g==="grid"&&x.jsx("div",{className:"w-full h-full grid grid-cols-1 md:grid-cols-3 gap-2 flex-grow",children:[{src:l,label:"Original"},{src:n.secondaryImageUrl,label:"Line Art"},{src:n.imageUrl,label:"Final Result"}].map(({src:te,label:Ee})=>x.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-white/10 bg-black flex items-center justify-center flex-col p-1 aspect-square md:aspect-auto",children:[x.jsx("img",{src:te,alt:Ee,className:"max-w-full max-h-full object-contain"}),x.jsx("div",{className:"absolute bottom-1 right-1 text-xs bg-black/50 text-white px-2 py-1 rounded",children:Ee})]},Ee))}),g==="slider"&&x.jsxs("div",{className:"w-full flex-grow flex flex-col gap-4",children:[x.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm",children:[x.jsx("select",{value:_,onChange:te=>N(te.target.value),className:"bg-gray-800 border-gray-700 border text-white rounded p-1",children:ne.filter(te=>te!==R).map(te=>x.jsx("option",{value:te,children:te},te))}),x.jsx("span",{children:"vs"}),x.jsx("select",{value:R,onChange:te=>k(te.target.value),className:"bg-gray-800 border-gray-700 border text-white rounded p-1",children:ne.filter(te=>te!==_).map(te=>x.jsx("option",{value:te,children:te},te))})]}),x.jsxs("div",{ref:v,onMouseDown:M,className:"relative w-full h-full overflow-hidden rounded-lg cursor-ew-resize border border-white/10 select-none bg-black",children:[x.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:x.jsx("img",{src:be,alt:_,className:"max-w-full max-h-full object-contain"})}),x.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{clipPath:`inset(0 ${100-C}% 0 0)`},children:x.jsx("img",{src:ve,alt:R,className:"max-w-full max-h-full object-contain"})}),x.jsx("div",{className:"absolute top-0 bottom-0 bg-orange-500 w-1 cursor-ew-resize",style:{left:`calc(${C}% - 2px)`},children:x.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -left-3.5 bg-orange-500 h-8 w-8 rounded-full border-2 border-black flex items-center justify-center text-black",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})})})]})]}),g!=="result"&&x.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-3 mt-auto",children:[x.jsxs("button",{onClick:F,className:"flex-1 py-2 px-4 bg-gray-800 text-gray-200 font-semibold rounded-lg shadow-sm hover:bg-gray-700 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM15 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1z"})}),x.jsx("span",{children:"下载对比图"})]}),x.jsxs("button",{onClick:()=>e(n.imageUrl),className:"flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-yellow-400 text-black font-semibold rounded-lg shadow-md shadow-orange-500/20 hover:from-orange-600 hover:to-yellow-500 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),x.jsx("span",{children:"使用最终结果作为输入"})]})]})]})}const J=async()=>{if(!n.images||n.images.length===0){console.log("没有图片可下载");return}console.log(`开始批量下载 ${n.images.length} 张图片...`);let X=0;for(let ne=0;ne<n.images.length;ne++){const be=n.images[ne];console.log(`正在下载第 ${ne+1}/${n.images.length} 张图片...`);try{const ve=await Jl(be,{prompt:u,style:f},`generated-image-${ne+1}`),te=document.createElement("a");te.href=ve.dataUrl,te.download=ve.filename,te.style.display="none",document.body.appendChild(te),setTimeout(()=>{te.click(),document.body.removeChild(te),console.log(`第 ${ne+1} 张图片下载触发成功`)},ne*100),X++}catch(ve){console.error(`第 ${ne+1} 张图片准备失败:`,ve);try{const te=document.createElement("a");te.href=be,te.download=`generated-image-${ne+1}.png`,te.style.display="none",document.body.appendChild(te),setTimeout(()=>{te.click(),document.body.removeChild(te)},ne*100),X++}catch(te){console.error(`第 ${ne+1} 张图片降级下载也失败:`,te)}}}console.log(`批量下载准备完成，预计下载 ${X} 张图片`),X>1&&console.log("提示：如果浏览器阻止了多文件下载，请在地址栏允许下载，或者逐个点击下载按钮")},pe=async()=>{if(!n.images||n.images.length===0){console.log("没有图片可下载");return}console.log(`开始创建包含 ${n.images.length} 张图片的压缩包...`);try{const X=new Gw,ne=X.folder("generated-images");if(!ne)throw new Error("无法创建压缩包文件夹");for(let Le=0;Le<n.images.length;Le++){const qe=n.images[Le];console.log(`正在处理第 ${Le+1}/${n.images.length} 张图片...`);try{const b=await Jl(qe,{prompt:u,style:f},`image-${Le+1}`),ge=b.dataUrl.split(",")[1];ne.file(b.filename,ge,{base64:!0}),console.log(`第 ${Le+1} 张图片已添加到压缩包`)}catch(b){console.error(`第 ${Le+1} 张图片处理失败，使用原图:`,b);try{const he=await(await fetch(qe)).blob();ne.file(`image-${Le+1}.png`,he)}catch(ge){console.error(`第 ${Le+1} 张图片获取失败:`,ge)}}}console.log("正在生成压缩包...");const be=await X.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),ve=URL.createObjectURL(be),te=document.createElement("a");te.href=ve;const Ee=new Date().toISOString().slice(0,19).replace(/[:-]/g,""),Ne=f?`_${f.replace(/[^a-zA-Z0-9\u4e00-\u9fa5]/g,"")}`:"";te.download=`generated-images${Ne}_${Ee}.zip`,document.body.appendChild(te),te.click(),document.body.removeChild(te),URL.revokeObjectURL(ve),console.log("压缩包下载完成！")}catch(X){console.error("创建压缩包失败:",X),alert("创建压缩包失败，请尝试单独下载图片")}},$=()=>{const ne=n.images&&n.images.length>1?["result","multi-grid","multi-slider","side-by-side","slider"]:["result","side-by-side","slider"],be={result:"结果","multi-grid":"多图网格","multi-slider":"多图滑块","side-by-side":"并排对比",slider:"滑块对比"};return x.jsx("div",{className:"w-full flex justify-center",children:x.jsx("div",{className:"p-1 bg-gray-900 rounded-lg flex items-center gap-1",children:ne.map(ve=>x.jsx("button",{onClick:()=>h(ve),className:`px-3 py-1 text-xs font-semibold rounded-md transition-colors duration-200 ${d===ve?"bg-gradient-to-r from-orange-500 to-yellow-400 text-black":"text-gray-300 hover:bg-gray-700"}`,children:be[ve]},ve))})})};return x.jsxs("div",{className:"w-full h-full flex flex-col items-center gap-4 animate-fade-in",children:[(n.imageUrl||n.images&&n.images.length>0)&&l&&x.jsx($,{}),x.jsxs("div",{className:"w-full flex-grow relative",children:[d==="result"&&x.jsx("div",{className:"w-full h-full relative",children:n.images&&n.images.length>1?x.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[x.jsxs("div",{className:"flex items-center justify-center gap-4",children:[x.jsx("button",{onClick:Z,disabled:z===0,className:"p-2 bg-orange-600 text-white rounded-full hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"上一张 (← 键)",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),x.jsxs("span",{className:"text-sm text-gray-400 min-w-20 text-center",children:[z+1," / ",n.images.length]}),x.jsx("button",{onClick:O,disabled:z>=n.images.length-1,className:"p-2 bg-orange-600 text-white rounded-full hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"下一张 (→ 键)",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),x.jsxs("div",{className:"w-full flex-grow relative bg-black rounded-lg overflow-hidden shadow-inner cursor-pointer group border border-white/10 flex items-center justify-center",onClick:()=>n.images&&o(n.images[z],n.images,z),children:[n.images&&x.jsx("img",{src:n.images[z],alt:`Generated result ${z+1}`,className:"max-w-full max-h-full object-contain"}),x.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),x.jsx("div",{className:"absolute bottom-2 left-2 bg-black/70 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"使用 ← → 键切换"}),x.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:[z+1," / ",n.images?n.images.length:0]})]})]}):n.imageUrl&&x.jsxs("div",{className:"w-full h-full relative bg-black rounded-lg overflow-hidden shadow-inner cursor-pointer group border border-white/10 flex items-center justify-center",onClick:()=>o(n.imageUrl),children:[x.jsx("img",{src:n.imageUrl,alt:"Generated result",className:"max-w-full max-h-full object-contain"}),x.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]})}),d==="side-by-side"&&n.imageUrl&&l&&x.jsxs("div",{className:"w-full h-full grid grid-cols-2 gap-2",children:[x.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-white/10 bg-black flex items-center justify-center",children:[x.jsx("img",{src:l,alt:"Original",className:"max-w-full max-h-full object-contain"}),x.jsx("div",{className:"absolute bottom-1 right-1 text-xs bg-black/50 text-white px-2 py-1 rounded",children:"原图"})]}),x.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-white/10 bg-black flex items-center justify-center",children:[x.jsx("img",{src:n.imageUrl,alt:"Generated",className:"max-w-full max-h-full object-contain"}),x.jsx("div",{className:"absolute bottom-1 right-1 text-xs bg-black/50 text-white px-2 py-1 rounded",children:"生成图"})]})]}),d==="slider"&&n.imageUrl&&l&&x.jsxs("div",{ref:v,onMouseDown:M,className:"relative w-full h-full overflow-hidden rounded-lg cursor-ew-resize border border-white/10 select-none bg-black",children:[x.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:x.jsx("img",{src:l,alt:"Original",className:"max-w-full max-h-full object-contain"})}),x.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{clipPath:`inset(0 ${100-C}% 0 0)`},children:x.jsx("img",{src:n.imageUrl,alt:"Generated",className:"max-w-full max-h-full object-contain"})}),x.jsx("div",{className:"absolute top-0 bottom-0 bg-orange-500 w-1 cursor-ew-resize",style:{left:`calc(${C}% - 2px)`},children:x.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -left-3.5 bg-orange-500 h-8 w-8 rounded-full border-2 border-black flex items-center justify-center text-black",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})})})]}),d==="multi-grid"&&n.images&&n.images.length>1&&x.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[n.images.length>A&&x.jsxs("div",{className:"flex items-center justify-center gap-4",children:[x.jsx("button",{onClick:()=>H(Math.max(0,I-1)),disabled:I===0,className:"px-3 py-1 bg-gray-800 text-gray-200 rounded-md hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"上一页"}),x.jsxs("span",{className:"text-sm text-gray-400",children:["第 ",I+1," 页，共 ",Math.ceil(n.images.length/A)," 页"]}),x.jsx("button",{onClick:()=>H(Math.min(Math.ceil(n.images.length/A)-1,I+1)),disabled:I>=Math.ceil(n.images.length/A)-1,className:"px-3 py-1 bg-gray-800 text-gray-200 rounded-md hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"下一页"})]}),x.jsx("div",{className:"grid grid-cols-3 gap-2 flex-grow",children:n.images.slice(I*A,(I+1)*A).map((X,ne)=>x.jsxs("div",{className:"relative aspect-square bg-black rounded-lg overflow-hidden border border-white/10 cursor-pointer group hover:border-orange-500 transition-colors",onClick:()=>o(X,n.images,I*A+ne),children:[x.jsx("img",{src:X,alt:`Generated ${I*A+ne+1}`,className:"w-full h-full object-contain"}),x.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),x.jsx("div",{className:"absolute bottom-1 right-1 text-xs bg-black/70 text-white px-2 py-1 rounded",children:I*A+ne+1}),x.jsxs("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex gap-1",children:[x.jsx("button",{onClick:be=>{be.stopPropagation(),e(X)},className:"p-1 bg-orange-500 text-black rounded-full hover:bg-orange-600 transition-colors",title:"作为输入使用",children:x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})}),x.jsx("button",{onClick:async be=>{be.stopPropagation(),await Se(X,`generated-image-${I*A+ne+1}`)},className:"p-1 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition-colors",title:"下载图片 (含元数据)",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]},I*A+ne))})]}),d==="multi-slider"&&n.images&&n.images.length>1&&x.jsxs("div",{className:"w-full h-full flex flex-col gap-4",children:[x.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-gray-400",children:"左侧:"}),x.jsx("select",{value:Y,onChange:X=>B(parseInt(X.target.value)),className:"bg-gray-800 border-gray-700 border text-white rounded p-2",children:n.images.map((X,ne)=>x.jsxs("option",{value:ne,disabled:ne===q,children:["图片 ",ne+1]},ne))})]}),x.jsx("span",{className:"text-gray-400",children:"vs"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-gray-400",children:"右侧:"}),x.jsx("select",{value:q,onChange:X=>le(parseInt(X.target.value)),className:"bg-gray-800 border-gray-700 border text-white rounded p-2",children:n.images.map((X,ne)=>x.jsxs("option",{value:ne,disabled:ne===Y,children:["图片 ",ne+1]},ne))})]})]}),x.jsxs("div",{className:"relative w-full flex-grow flex items-center gap-2",children:[n.images.length>2&&x.jsx("button",{onClick:()=>{if(Y>0||q>0){const ne=Math.max(0,Y-1),be=Math.max(0,q-1);ne===be?ne===0?(B(0),le(1)):(B(ne-1),le(ne)):(B(ne),le(be))}},disabled:Y===0&&q<=1,className:"flex-shrink-0 p-3 bg-purple-600 text-white rounded-full hover:bg-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"上一组对比",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),x.jsxs("div",{ref:v,onMouseDown:M,className:"relative flex-grow h-full overflow-hidden rounded-lg cursor-ew-resize border border-white/10 select-none bg-black",children:[x.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:x.jsx("img",{src:n.images[Y],alt:`多图对比左侧 - 图片 ${Y+1}`,className:"max-w-full max-h-full object-contain"})}),x.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{clipPath:`inset(0 ${100-C}% 0 0)`},children:x.jsx("img",{src:n.images[q],alt:`多图对比右侧 - 图片 ${q+1}`,className:"max-w-full max-h-full object-contain"})}),x.jsx("div",{className:"absolute top-0 bottom-0 bg-purple-500 w-1 cursor-ew-resize",style:{left:`calc(${C}% - 2px)`},children:x.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -left-3.5 bg-purple-500 h-8 w-8 rounded-full border-2 border-black flex items-center justify-center text-white",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})})})}),x.jsxs("div",{className:"absolute top-4 left-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:["图片 ",Y+1]}),x.jsxs("div",{className:"absolute top-4 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:["图片 ",q+1]})]}),n.images.length>2&&x.jsx("button",{onClick:()=>{const X=n.images.length-1;if(Y<X||q<X){const be=Math.min(X,Y+1),ve=Math.min(X,q+1);be===ve?ve===X?(B(ve-1),le(ve)):(B(be),le(be+1)):(B(be),le(ve))}},disabled:Y>=n.images.length-1&&q>=n.images.length-1,className:"flex-shrink-0 p-3 bg-purple-600 text-white rounded-full hover:bg-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"下一组对比",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]})]}),x.jsx("div",{className:"w-full flex flex-col md:flex-row gap-3 mt-2",children:n.imageUrl&&x.jsxs(x.Fragment,{children:[d==="side-by-side"&&x.jsxs("button",{onClick:F,className:"flex-1 py-2 px-4 bg-gray-800 text-gray-200 font-semibold rounded-lg shadow-sm hover:bg-gray-700 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM15 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1z"})}),x.jsx("span",{children:"下载对比图"})]}),n.images&&n.images.length>1?x.jsxs(x.Fragment,{children:[x.jsxs("button",{onClick:pe,title:"将所有图片打包成ZIP压缩包下载，每张图片都包含元数据",className:"flex-1 py-2 px-4 bg-purple-600 text-white font-semibold rounded-lg shadow-sm hover:bg-purple-700 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),x.jsxs("span",{children:["打包下载 (",n.images.length,"张)"]})]}),x.jsxs("button",{onClick:J,title:"批量下载所有图片。如果浏览器阻止多文件下载，请在地址栏允许下载。",className:"flex-1 py-2 px-4 bg-gray-800 text-gray-200 font-semibold rounded-lg shadow-sm hover:bg-gray-700 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),x.jsx("span",{children:"分别下载"})]})]}):x.jsxs("button",{onClick:de,className:"flex-1 py-2 px-4 bg-gray-800 text-gray-200 font-semibold rounded-lg shadow-sm hover:bg-gray-700 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),x.jsx("span",{children:"下载图像"})]}),x.jsxs("button",{onClick:()=>e(n.imageUrl),className:"flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-yellow-400 text-black font-semibold rounded-lg shadow-md shadow-orange-500/20 hover:from-orange-600 hover:to-yellow-500 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),x.jsx("span",{children:"作为输入使用"})]})]})}),n.text&&x.jsxs("p",{className:"w-full text-center text-gray-400 bg-gray-900/50 p-3 rounded-md italic mt-4",children:['"',n.text,'"']})]})},qp=document.createElement("style");qp.innerHTML=`
  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }
  .animate-fade-in {
    animation: fadeIn 0.5s ease-out forwards;
  }
`;document.head.appendChild(qp);const Hw=({message:n})=>x.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 text-gray-300",children:[x.jsxs("svg",{className:"animate-spin h-10 w-10 text-orange-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x.jsx("p",{className:"text-lg font-medium",children:n||"Generating your masterpiece..."}),x.jsx("p",{className:"text-sm text-gray-400",children:"This can sometimes take a moment."})]}),qw=({message:n})=>x.jsxs("div",{className:"w-full max-w-lg p-4 bg-red-900/50 border border-red-700 text-red-300 rounded-lg text-center",role:"alert",children:[x.jsx("p",{className:"font-bold",children:"An Error Occurred"}),x.jsx("p",{className:"text-sm",children:n})]}),Fw=({onImageSelect:n,initialImageUrl:e,onMaskChange:o,onClearImage:l,isMaskToolActive:u})=>{const f=ae.useRef(null),d=ae.useRef(null),h=ae.useRef(null),[g,p]=ae.useState(null),[v,C]=ae.useState(!1),[S,T]=ae.useState(null),[w,_]=ae.useState(20),[N,R]=ae.useState([]),[k,I]=ae.useState(!1),[H,A]=ae.useState(1),[U,P]=ae.useState(0),[Y,B]=ae.useState(0),q=ae.useCallback(()=>{const $=f.current,X=d.current,ne=$==null?void 0:$.getContext("2d"),be=X==null?void 0:X.getContext("2d");return{imageCanvas:$,maskCanvas:X,imageCtx:ne,maskCtx:be}},[]),le=ae.useCallback(()=>{const{imageCtx:$,imageCanvas:X,maskCanvas:ne}=q(),be=h.current;if(!$||!X||!g||!be)return;const ve=be.clientWidth/be.clientHeight,te=g.width/g.height;let Ee,Ne,Le,qe;ve>te?(Ne=be.clientHeight,Ee=Ne*te):(Ee=be.clientWidth,Ne=Ee/te),Le=(be.clientWidth-Ee)/2,qe=(be.clientHeight-Ne)/2,[X,ne].forEach(b=>{b&&(b.width=be.clientWidth,b.height=be.clientHeight)}),$.clearRect(0,0,X.width,X.height),$.drawImage(g,Le,qe,Ee,Ne)},[g,q]);ae.useEffect(()=>{const $=new Image;$.crossOrigin="anonymous",$.onload=()=>{p($),R([]);const{maskCtx:X,maskCanvas:ne}=q();X&&ne&&(X.clearRect(0,0,ne.width,ne.height),o(null))},e?$.src=e:p(null)},[e,q,o]),ae.useEffect(()=>{le();const $=()=>le();return window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[le,g]);const z=ae.useCallback(()=>{const{maskCtx:$,maskCanvas:X}=q();$&&X&&R(ne=>[...ne,$.getImageData(0,0,X.width,X.height)])},[q]),W=ae.useCallback(()=>{const{maskCtx:$,maskCanvas:X}=q();$&&X&&(z(),$.clearRect(0,0,X.width,X.height),o(null),R(ne=>[...ne,$.getImageData(0,0,X.width,X.height)]))},[q,o,z]),M=ae.useCallback(()=>{const{maskCtx:$,maskCanvas:X}=q();if(!$||!X||N.length===0)return;const ne=N.slice(0,-1);R(ne),$.clearRect(0,0,X.width,X.height),ne.length>0?($.putImageData(ne[ne.length-1],0,0),o(X.toDataURL())):o(null)},[q,o,N]),Z=$=>{const X=d.current;if(!X)return null;const ne=X.getBoundingClientRect(),be="touches"in $?$.touches[0].clientX-ne.left:$.clientX-ne.left,ve="touches"in $?$.touches[0].clientY-ne.top:$.clientY-ne.top;return{x:be/H,y:ve/H}},O=$=>{const X=Z($);X&&(z(),C(!0),T(X))},j=$=>{if(!v)return;const X=Z($);if(!X||!S)return;const{maskCtx:ne}=q();ne&&(ne.beginPath(),ne.strokeStyle="rgba(249, 115, 22, 0.7)",ne.lineWidth=w,ne.lineCap="round",ne.lineJoin="round",ne.moveTo(S.x,S.y),ne.lineTo(X.x,X.y),ne.stroke()),T(X)},Se=()=>{var $;C(!1),T(null),o((($=d.current)==null?void 0:$.toDataURL())??null)},de=ae.useCallback($=>{const X=new FileReader;X.onload=ne=>{var be;n($,(be=ne.target)==null?void 0:be.result)},X.readAsDataURL($)},[n]),V=$=>{var X;(X=$.target.files)!=null&&X[0]&&de($.target.files[0])},F=ae.useCallback($=>{var X;$.preventDefault(),$.stopPropagation(),I(!1),(X=$.dataTransfer.files)!=null&&X[0]&&de($.dataTransfer.files[0])},[de]),J=$=>{$.preventDefault(),$.stopPropagation(),I(!0)},pe=$=>{$.preventDefault(),$.stopPropagation(),I(!1)};return x.jsx("div",{className:"flex flex-col gap-4",children:x.jsxs("div",{className:"",children:[e&&x.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-800/50 rounded-lg border border-white/10",children:[x.jsx("span",{className:"text-xs text-purple-400",children:"🔍 缩放:"}),x.jsx("input",{type:"range",min:1,max:250,step:1,value:Math.round(H*100),onChange:$=>A(Math.max(.01,Math.min(2.5,Number($.target.value)/100))),className:"w-40 h-1 accent-purple-500"}),x.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:String(Math.round(H*100)),onChange:$=>{const X=$.target.value.replace(/[^0-9]/g,""),ne=X===""?NaN:Number(X);Number.isNaN(ne)||A(Math.max(.01,Math.min(2.5,ne/100)))},className:"w-16 px-1 py-0.5 text-xs bg-gray-700 text-white rounded border border-gray-600"})]}),x.jsx("div",{ref:h,onDrop:F,onDragOver:J,onDragLeave:pe,className:`relative w-full aspect-square bg-black rounded-lg overflow-hidden flex items-center justify-center transition-colors duration-200 select-none ${k?"outline-dashed outline-2 outline-orange-500 bg-orange-500/10":""} ${e?"p-0":"p-4 border-2 border-dashed border-white/20"}`,children:e?x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:l,className:"absolute top-2 right-2 z-30 p-1 bg-black/50 backdrop-blur-sm rounded-full text-white hover:bg-red-600 transition-colors","aria-label":"Remove image",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),x.jsxs("div",{className:"absolute inset-0",style:{get transform(){const $=h.current,X=$?$.clientWidth:0,ne=$?$.clientHeight:0,be=Math.max(0,(H-1)*X),ve=Math.max(0,(H-1)*ne),te=be*(U/100),Ee=ve*(Y/100);return`translate(${-te}px, ${-Ee}px) scale(${H})`}},children:[x.jsx("canvas",{ref:f,className:"absolute top-0 left-0",style:{zIndex:1}}),x.jsx("canvas",{ref:d,className:"absolute top-0 left-0",style:{zIndex:3,touchAction:"none",cursor:u?"crosshair":"default"},onMouseDown:u?O:void 0,onMouseMove:u?j:void 0,onMouseUp:u?Se:void 0,onMouseLeave:u?Se:void 0,onTouchStart:u?O:void 0,onTouchMove:u?j:void 0,onTouchEnd:u?Se:void 0})]}),H>1&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-2 z-40 w-[70%] px-3 py-1 bg-black/40 backdrop-blur-sm rounded-full border border-white/10 shadow-lg shadow-black/40",children:x.jsx("input",{type:"range",min:0,max:100,step:1,value:U,onChange:$=>P(Number($.target.value)),className:"w-full h-1 accent-purple-500"})}),x.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 right-2 z-40 h-[70%] w-8 bg-black/40 backdrop-blur-sm rounded-full border border-white/10 shadow-lg shadow-black/40 flex items-center justify-center",children:x.jsx("div",{className:"rotate-90 w-full flex items-center justify-center",children:x.jsx("input",{type:"range",min:0,max:100,step:1,value:Y,onChange:$=>B(Number($.target.value)),className:"w-full h-1 accent-purple-500"})})})]})]}):x.jsxs("label",{htmlFor:"file-upload",className:"flex flex-col items-center justify-center text-gray-500 cursor-pointer w-full h-full",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.158 0h.008v.008h-.008V8.25z"})}),x.jsxs("p",{className:"mb-2 text-sm",children:[x.jsx("span",{className:"font-semibold",children:"点击上传"})," 或拖拽放置"]}),x.jsx("input",{id:"file-upload",type:"file",className:"hidden",onChange:V,accept:"image/*"})]})}),e&&u&&x.jsxs("div",{className:"p-3 bg-black/60 backdrop-blur-md rounded-lg flex flex-col gap-4 border border-white/10 animate-fade-in-fast",children:[x.jsx("p",{className:"text-xs text-gray-400 -mb-2",children:"在图像上绘制以创建局部编辑的蒙版。"}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("label",{htmlFor:"brush-size",className:"text-sm font-medium text-gray-200 whitespace-nowrap",children:"画笔大小"}),x.jsx("input",{id:"brush-size",type:"range",min:"5",max:"100",value:w,onChange:$=>_(Number($.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-orange-500"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[x.jsx("button",{onClick:M,disabled:N.length===0,className:"px-4 py-2 text-sm font-semibold text-gray-200 bg-gray-800 rounded-md hover:bg-gray-700 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed transition-colors",children:"撤销"}),x.jsx("button",{onClick:W,disabled:N.length===0,className:"px-4 py-2 text-sm font-semibold text-gray-200 bg-gray-800 rounded-md hover:bg-gray-700 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed transition-colors",children:"清除蒙版"})]})]})]})})},Ow=async(n,e)=>{const l=await(await fetch(n)).blob();return new File([l],e,{type:l.type})},Yw=n=>new Promise((e,o)=>{const l=new Image;l.crossOrigin="anonymous",l.onload=()=>e(l),l.onerror=u=>o(new Error("Failed to load image from data URL.")),l.src=n}),Jw=(n,e)=>new Promise((o,l)=>{const u=document.createElement("canvas"),f=u.getContext("2d");if(!f)return l(new Error("Could not get canvas context."));const d=new Image;d.crossOrigin="anonymous",d.onload=()=>{u.width=e.naturalWidth,u.height=e.naturalHeight,f.drawImage(d,0,0,u.width,u.height),o(u.toDataURL("image/png"))},d.onerror=()=>l(new Error("Failed to load source image for resizing.")),d.src=n}),Xw=n=>n.split("").map(e=>e.charCodeAt(0).toString(2).padStart(8,"0")).join(""),Gu=(n,e)=>new Promise((o,l)=>{const u=document.createElement("canvas"),f=u.getContext("2d");if(!f)return l(new Error("Could not get canvas context."));const d=new Image;d.crossOrigin="anonymous",d.onload=()=>{u.width=d.width,u.height=d.height,f.drawImage(d,0,0);const h=e+"::END",g=Xw(h),p=f.getImageData(0,0,u.width,u.height),v=p.data;if(g.length>v.length/4*3)return console.warn("Watermark is too long for the image. Skipping."),o(n);let C=0;for(let S=0;S<v.length&&C<g.length;S+=4)for(let T=0;T<3&&C<g.length;T++){const w=parseInt(g[C],2);v[S+T]=v[S+T]&254|w,C++}f.putImageData(p,0,0),o(u.toDataURL("image/png"))},d.onerror=()=>l(new Error("Failed to load image for watermarking.")),d.src=n}),Kw=(n,e)=>{const o=document.createElement("a");o.href=n,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)},Zw=async(n,e,o)=>{try{const l=await Jl(n,o,e),u=document.createElement("a");u.href=l.dataUrl,u.download=l.filename,document.body.appendChild(u),u.click(),document.body.removeChild(u)}catch(l){console.error("带元数据下载失败，使用普通下载:",l),Kw(n,`${e}.png`)}},$w=({imageUrl:n,onClose:e,imageUrls:o=[],initialIndex:l=0,currentPrompt:u,currentStyle:f})=>{const[d,h]=ae.useState(l),g=o.length>1,p=g?o[d]:n;ae.useEffect(()=>{h(l)},[l,o]),ae.useEffect(()=>{const T=w=>{g&&(w.key==="ArrowLeft"?(w.preventDefault(),h(_=>Math.max(0,_-1))):w.key==="ArrowRight"&&(w.preventDefault(),h(_=>Math.min(o.length-1,_+1))))};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[g,o.length]);const v=ae.useCallback(()=>{h(T=>Math.max(0,T-1))},[]),C=ae.useCallback(()=>{h(T=>Math.min(o.length-1,T+1))},[o.length]);if(!p)return null;const S=async T=>{if(T.stopPropagation(),!!p)try{const w=g?`generated-image-${d+1}`:"generated-image",_=await Jl(p,{prompt:u,style:f},w),N=document.createElement("a");N.href=_.dataUrl,N.download=_.filename,document.body.appendChild(N),N.click(),document.body.removeChild(N)}catch(w){console.error("带元数据下载失败，使用普通下载:",w);const _=document.createElement("a");_.href=p;const N=p.split(";")[0].split("/")[1]||"png",R=g?`generated-image-${d+1}-${Date.now()}.${N}`:`generated-image-${Date.now()}.${N}`;_.download=R,document.body.appendChild(_),_.click(),document.body.removeChild(_)}};return x.jsxs("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex flex-col items-center justify-center p-4 animate-fade-in-fast",onClick:e,children:[x.jsxs("div",{className:"relative max-w-4xl max-h-[85vh] w-full h-full flex-grow flex items-center",onClick:T=>T.stopPropagation(),children:[g&&x.jsx("button",{onClick:v,disabled:d===0,className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 p-3 bg-black/60 backdrop-blur-sm rounded-full text-white hover:bg-black/80 disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:"上一张 (← 键)",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),x.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[x.jsx("img",{src:p,alt:"Generated result preview",className:"w-full h-full object-contain rounded-lg shadow-2xl"}),x.jsx("button",{onClick:e,className:"absolute -top-2 -right-2 z-10 p-2 bg-black/50 backdrop-blur-sm rounded-full text-white hover:bg-red-600 transition-colors","aria-label":"Close preview",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),g&&x.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-black/70 text-white text-sm px-4 py-2 rounded-full",children:[d+1," / ",o.length]}),g&&x.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/70 text-white text-xs px-3 py-1 rounded",children:"使用 ← → 键切换"})]}),g&&x.jsx("button",{onClick:C,disabled:d>=o.length-1,className:"absolute right-4 top-1/2 -translate-y-1/2 z-20 p-3 bg-black/60 backdrop-blur-sm rounded-full text-white hover:bg-black/80 disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:"下一张 (→ 键)",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),x.jsx("div",{className:"flex-shrink-0 mt-4 flex gap-2",children:x.jsxs("button",{onClick:S,className:"py-2 px-5 bg-gray-800 text-gray-200 font-semibold rounded-lg shadow-sm hover:bg-gray-700 transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),x.jsx("span",{children:"下载（含元数据）"})]})}),x.jsx("style",{children:`
          @keyframes fadeInFast {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          .animate-fade-in-fast {
            animation: fadeInFast 0.2s ease-out forwards;
          }
        `})]})},rp=({onImageSelect:n,imageUrl:e,onClear:o,title:l,description:u})=>{const[f,d]=ae.useState(!1),h=ae.useCallback(T=>{const w=new FileReader;w.onload=_=>{var N;return n(T,(N=_.target)==null?void 0:N.result)},w.readAsDataURL(T)},[n]),g=T=>{var w;(w=T.target.files)!=null&&w[0]&&h(T.target.files[0])},p=ae.useCallback(T=>{var w;T.preventDefault(),T.stopPropagation(),d(!1),(w=T.dataTransfer.files)!=null&&w[0]&&h(T.dataTransfer.files[0])},[h]),v=T=>{T.preventDefault(),T.stopPropagation(),d(!0)},C=T=>{T.preventDefault(),T.stopPropagation(),d(!1)},S=`file-upload-${l.replace(/\s+/g,"-").toLowerCase()}`;return x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-300",children:l}),x.jsx("div",{onDrop:p,onDragOver:v,onDragLeave:C,className:`relative w-full aspect-square bg-black rounded-lg flex items-center justify-center transition-colors duration-200 select-none ${f?"outline-dashed outline-2 outline-orange-500 bg-orange-500/10":""} ${e?"p-0":"p-4 border-2 border-dashed border-white/20"}`,children:e?x.jsxs(x.Fragment,{children:[x.jsx("img",{src:e,alt:l,className:"w-full h-full object-contain rounded-lg"}),x.jsx("button",{onClick:o,className:"absolute top-2 right-2 z-10 p-1 bg-black/50 backdrop-blur-sm rounded-full text-white hover:bg-red-600 transition-colors","aria-label":`Remove ${l} image`,children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}):x.jsxs("label",{htmlFor:S,className:"flex flex-col items-center justify-center text-gray-500 cursor-pointer w-full h-full text-center",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.158 0h.008v.008h-.008V8.25z"})}),x.jsx("p",{className:"mb-1 text-xs font-semibold",children:"点击或拖拽上传"}),x.jsx("p",{className:"text-xs text-gray-600",children:u}),x.jsx("input",{id:S,type:"file",className:"hidden",onChange:g,accept:"image/*"})]})})]})},Qw=({onPrimarySelect:n,onSecondarySelect:e,primaryImageUrl:o,secondaryImageUrl:l,onClearPrimary:u,onClearSecondary:f,primaryTitle:d="角色",primaryDescription:h="主要角色",secondaryTitle:g="姿势参考",secondaryDescription:p="要应用的姿势"})=>x.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[x.jsx(rp,{title:d,description:h,imageUrl:o,onImageSelect:n,onClear:u}),x.jsx(rp,{title:g,description:p,imageUrl:l,onImageSelect:e,onClear:f})]}),jw=({imageUrls:n,onAddImages:e,onRemoveImage:o,onClearAll:l})=>{const u=ae.useRef(null),[f,d]=ae.useState(!1),h=ae.useCallback(S=>{if(!S||S.length===0)return;const T=Array.from(S).filter(w=>w.type.startsWith("image/"));T.length>0&&e(T)},[e]),g=ae.useCallback(S=>{S.preventDefault(),S.stopPropagation(),d(!1),h(S.dataTransfer.files)},[h]),p=S=>{S.preventDefault(),S.stopPropagation(),d(!0)},v=S=>{S.preventDefault(),S.stopPropagation(),d(!1)},C=()=>{var S;return(S=u.current)==null?void 0:S.click()};return x.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-white/10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:"参考图（可选，多图）"}),x.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"可上传多张参考图，模型将结合这些参考信息生成结果"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("button",{onClick:C,className:"px-3 py-1 text-xs bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",children:"添加参考图"}),n.length>0&&x.jsx("button",{onClick:l,className:"px-3 py-1 text-xs bg-gray-700 hover:bg-gray-600 text-gray-200 rounded transition-colors",children:"清空"}),x.jsx("input",{ref:u,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:S=>h(S.target.files)})]})]}),x.jsx("div",{onDrop:g,onDragOver:p,onDragLeave:v,className:`w-full rounded-lg border border-dashed border-white/20 ${n.length===0?"aspect-video":""} ${f?"outline-dashed outline-2 outline-orange-500 bg-orange-500/10":""}`,children:n.length===0?x.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center text-gray-500 p-6 select-none",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7h18M5 7l2-3h10l2 3m-2 0v10a2 2 0 01-2 2H9a2 2 0 01-2-2V7m6 4v6m-3-3h6"})}),x.jsx("p",{className:"text-xs",children:"拖拽图片到此处或点击“添加参考图”"})]}):x.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 p-3",children:n.map((S,T)=>x.jsxs("div",{className:"relative bg-black rounded-lg border border-white/10 overflow-hidden",children:[x.jsx("img",{src:S,className:"w-full h-32 object-contain bg-black"}),x.jsx("button",{onClick:()=>o(T),className:"absolute top-2 right-2 z-10 p-1 bg-black/60 rounded-full text-white hover:bg-red-600 transition-colors","aria-label":"移除参考图",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},T))})})]})},Ww=({item:n,onUseImage:e,onDownload:o})=>{const l=({onClick:u,children:f,isPrimary:d})=>x.jsx("button",{onClick:u,className:`w-full flex items-center justify-center gap-1.5 py-1.5 px-2 text-xs font-semibold rounded-md transition-colors duration-200 ${d?"bg-gradient-to-r from-orange-500 to-yellow-400 text-black shadow-sm shadow-orange-500/20 hover:from-orange-600 hover:to-yellow-500":"bg-gray-800 hover:bg-gray-700 text-gray-200"}`,children:f});return x.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg border border-white/10",children:[n.secondaryImageUrl&&n.imageUrl&&x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx("img",{src:n.secondaryImageUrl,className:"rounded-md aspect-square object-contain bg-black",alt:"Line Art Result"}),x.jsx("div",{className:"text-xs text-center text-gray-400 mb-1",children:"线稿"}),x.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-xs",children:[x.jsxs(l,{onClick:()=>e(n.secondaryImageUrl),isPrimary:!0,children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),"使用"]}),x.jsxs(l,{onClick:()=>o(n.secondaryImageUrl,"line-art"),children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"保存"]})]})]}),x.jsxs("div",{className:"flex flex-col gap-2",children:[x.jsx("img",{src:n.imageUrl,className:"rounded-md aspect-square object-contain bg-black",alt:"Final Result"}),x.jsx("div",{className:"text-xs text-center text-gray-400 mb-1",children:"最终结果"}),x.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-xs",children:[x.jsxs(l,{onClick:()=>e(n.imageUrl),isPrimary:!0,children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),"使用"]}),x.jsxs(l,{onClick:()=>o(n.imageUrl,"final-result"),children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"保存"]})]})]})]}),!n.secondaryImageUrl&&n.imageUrl&&x.jsxs("div",{className:"flex flex-col gap-3",children:[x.jsx("img",{src:n.imageUrl,className:"rounded-md w-full object-contain bg-black",alt:"Generated Result"}),x.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[x.jsxs(l,{onClick:()=>o(n.imageUrl,"single-result"),children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"下载"]}),x.jsxs(l,{onClick:()=>e(n.imageUrl),isPrimary:!0,children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),x.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2-2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),"作为输入使用"]})]})]})]})},eb=({isOpen:n,onClose:e,history:o,onUseImage:l,onDownload:u})=>x.jsxs("div",{className:`fixed inset-0 z-40 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:[x.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),x.jsxs("div",{className:`absolute top-0 right-0 h-full w-full max-w-md bg-gray-950 border-l border-white/10 shadow-2xl flex flex-col transform transition-transform duration-300 ease-in-out ${n?"translate-x-0":"translate-x-full"}`,children:[x.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center flex-shrink-0",children:[x.jsx("h2",{className:"text-xl font-semibold text-orange-500",children:"生成历史"}),x.jsx("button",{onClick:e,className:"p-1 rounded-full text-gray-400 hover:bg-gray-800 hover:text-white transition-colors",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),x.jsx("div",{className:"flex-grow overflow-y-auto p-4",children:o.length===0?x.jsxs("div",{className:"text-center text-gray-500 pt-10 flex flex-col items-center gap-4",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),x.jsx("p",{children:"一旦你创建了内容，生成的图像将在这里显示。"})]}):x.jsx("div",{className:"space-y-4",children:o.map((f,d)=>x.jsx(Ww,{item:f,onUseImage:l,onDownload:u},d))})})]})]}),tb=({imageUrl:n,onSelectionChange:e,isActive:o,onClearSelection:l})=>{const u=ae.useRef(null),f=ae.useRef(null),d=ae.useRef(null),[h,g]=ae.useState(!1),[p,v]=ae.useState(null),[C,S]=ae.useState(null),[T,w]=ae.useState(1),[_,N]=ae.useState("100"),[R,k]=ae.useState(0),[I,H]=ae.useState(0),[A,U]=ae.useState({width:0,height:0}),P=ae.useCallback((Z,O)=>{if(!f.current||!d.current||A.width===0)return null;const j=f.current.getBoundingClientRect(),Se=Z-j.left,de=O-j.top,V=j.width,F=j.height,J=V/T,pe=F/T,$=A.width/J,X=A.height/pe,ne=Se/T*$,be=de/T*X,ve=Math.max(0,Math.min(ne,A.width)),te=Math.max(0,Math.min(be,A.height));return{x:ve,y:te}},[T,A]),Y=ae.useCallback(Z=>{if(!o)return;const O=P(Z.clientX,Z.clientY);O&&(g(!0),v(O),S(null),e(null))},[o,P,e]),B=ae.useCallback(Z=>{if(!h||!p||!o)return;const O=P(Z.clientX,Z.clientY);if(!O)return;const j={x:Math.min(p.x,O.x),y:Math.min(p.y,O.y),width:Math.abs(O.x-p.x),height:Math.abs(O.y-p.y)};S(j)},[h,p,o,P]),q=ae.useCallback(()=>{!h||!C||(C.width<20||C.height<20?(S(null),e(null)):e(C),g(!1),v(null))},[h,C,e]),le=ae.useCallback(Z=>{if(!f.current||A.width===0)return null;const O=f.current.getBoundingClientRect(),j=O.width/T,Se=O.height/T,de=j/A.width,V=Se/A.height,F=Math.max(0,(T-1)*O.width),J=Math.max(0,(T-1)*O.height),pe=F*(R/100),$=J*(I/100),X=Z.x*de*T-pe,ne=Z.y*V*T-$,be=Z.width?Z.width*de*T:void 0,ve=Z.height?Z.height*V*T:void 0;return{x:X,y:ne,width:be,height:ve}},[T,A,R,I]);ae.useCallback(()=>{w(Z=>Math.min(parseFloat((Z+.1).toFixed(2)),2.5))},[]),ae.useCallback(()=>{w(Z=>Math.max(parseFloat((Z-.1).toFixed(2)),.25))},[]),ae.useCallback(()=>{w(1)},[]),ae.useCallback(()=>{if(!f.current||!d.current)return;const Z=d.current,O=Z.clientWidth,j=Z.clientHeight;if(A.width>0&&A.height>0){const Se=O/A.width,de=j/A.height,V=Math.min(Se,de)*.9;w(Math.max(.5,Math.min(5,V)))}},[A]),ae.useEffect(()=>{N(String(Math.round(T*100)))},[T]);const z=ae.useCallback(()=>{const Z=Number(_);if(!Number.isFinite(Z)){N(String(Math.round(T*100)));return}const O=Math.max(1,Math.min(250,Z));w(O/100),N(String(O))},[_,T]),W=ae.useCallback(()=>{S(null),g(!1),v(null),e(null),l()},[e,l]);ae.useEffect(()=>{const Z=O=>{o&&O.key==="Escape"&&W()};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[o,W]);const M=ae.useCallback(()=>{f.current&&U({width:f.current.naturalWidth,height:f.current.naturalHeight})},[]);return x.jsxs("div",{className:"relative",children:[o&&x.jsxs("div",{className:"mb-3 flex items-center gap-2 p-2 bg-gray-800/50 rounded-lg border border-white/10",children:[x.jsx("span",{className:"text-xs text-purple-400",children:"🔍 缩放:"}),x.jsx("input",{type:"range",min:1,max:250,step:1,value:Math.round(T*100),onChange:Z=>w(Math.max(.01,Math.min(2.5,Number(Z.target.value)/100))),className:"w-40 h-1 accent-purple-500"}),x.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:_,onChange:Z=>N(Z.target.value.replace(/[^0-9]/g,"")),onBlur:z,onKeyDown:Z=>{Z.key==="Enter"&&z()},className:"w-16 px-1 py-0.5 text-xs bg-gray-700 text-white rounded border border-gray-600"})]}),x.jsxs("div",{ref:d,className:"relative w-full aspect-square overflow-hidden bg-gray-900/30 rounded-lg border border-white/10",children:[x.jsxs("div",{ref:u,className:`relative inline-block w-full ${o?"cursor-crosshair":"cursor-default"}`,onMouseDown:Y,onMouseMove:B,onMouseUp:q,onMouseLeave:q,children:[x.jsx("img",{ref:f,src:n,alt:"编辑图像",className:"object-contain",style:{transform:(()=>{var J;const Z=(J=f.current)==null?void 0:J.getBoundingClientRect(),O=(Z==null?void 0:Z.width)||0,j=(Z==null?void 0:Z.height)||0,Se=Math.max(0,(T-1)*O),de=Math.max(0,(T-1)*j),V=Se*(R/100),F=de*(I/100);return`translate(${-V}px, ${-F}px) scale(${T})`})(),transformOrigin:"top left",width:"100%",height:"auto"},draggable:!1,onLoad:M}),o&&C&&(()=>{const Z=le({x:C.x,y:C.y,width:C.width,height:C.height});return Z?x.jsx("div",{className:"absolute border-2 border-purple-500 bg-purple-500/10 pointer-events-none",style:{left:`${Z.x}px`,top:`${Z.y}px`,width:`${Z.width}px`,height:`${Z.height}px`},children:x.jsxs("div",{className:"absolute -top-6 left-0 bg-purple-600 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:[Math.round(C.width)," × ",Math.round(C.height)," px"]})}):null})()]}),o&&T>1&&x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-2 z-40 w-[70%] px-3 py-1 bg-black/40 backdrop-blur-sm rounded-full border border-white/10 shadow-lg shadow-black/40",children:x.jsx("input",{type:"range",min:0,max:100,step:1,value:R,onChange:Z=>k(Number(Z.target.value)),className:"w-full h-1 accent-purple-500"})}),x.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 right-2 z-40 h-[70%] w-8 bg-black/40 backdrop-blur-sm rounded-full border border-white/10 shadow-lg shadow-black/40 flex items-center justify-center",children:x.jsx("div",{className:"rotate-90 w-full flex items-center justify-center",children:x.jsx("input",{type:"range",min:0,max:100,step:1,value:I,onChange:Z=>H(Number(Z.target.value)),className:"w-full h-1 accent-purple-500"})})})]})]}),o&&C&&x.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[x.jsxs("div",{className:"flex-1 text-xs text-purple-400",children:["选区: ",Math.round(C.width)," × ",Math.round(C.height)," px (缩放: ",Math.round(T*100),"%)"]}),x.jsx("button",{onClick:W,className:"px-2 py-1 text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition-colors",children:"清除选区"})]}),o&&x.jsxs("div",{className:"mt-2 text-xs text-gray-400 space-y-1",children:[x.jsx("div",{children:"💡 提示: 拖动鼠标选择区域，按ESC键清除选区，最小选区20×20像素"}),x.jsx("div",{children:"🔍 缩放: 拖动进度条或直接输入百分比（25% - 250%）"})]})]})};function nb(n,e){return new Promise((o,l)=>{const u=document.createElement("canvas"),f=u.getContext("2d");if(!f){l(new Error("无法创建Canvas上下文"));return}const d=new Image;d.onload=()=>{try{u.width=Math.max(1,Math.round(e.width)),u.height=Math.max(1,Math.round(e.height)),f.imageSmoothingQuality="high",f.drawImage(d,Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height),0,0,u.width,u.height),o(u.toDataURL("image/png",.9))}catch(h){console.error("图像裁剪错误:",h),l(new Error("图像裁剪失败"))}},d.onerror=()=>{l(new Error("图像加载失败"))},d.src=n})}function ib(n,e,o){return new Promise((l,u)=>{const f=document.createElement("canvas"),d=f.getContext("2d");if(!d){u(new Error("无法创建Canvas上下文"));return}const h=new Image,g=new Image;let p=0;const v=()=>{if(p++,p===2)try{f.width=h.naturalWidth,f.height=h.naturalHeight,d.imageSmoothingQuality="high",d.drawImage(h,0,0);const S=g.naturalWidth,T=g.naturalHeight,w=Math.round(o.width),_=Math.round(o.height);S!==w||T!==_?d.drawImage(g,Math.round(o.x),Math.round(o.y),w,_):d.drawImage(g,Math.round(o.x),Math.round(o.y)),l(f.toDataURL("image/png",.9))}catch(S){console.error("图像拼接错误:",S),u(new Error("图像拼接失败"))}},C=()=>{u(new Error("图像加载失败"))};h.onload=v,g.onload=v,h.onerror=C,g.onerror=C,h.src=n,g.src=e})}const ob=()=>{const[n,e]=ae.useState(()=>{try{const oe=localStorage.getItem("transformationOrder");if(oe){const fe=JSON.parse(oe),we=new Map(gr.map(it=>[it.title,it])),Re=fe.map(it=>we.get(it)).filter(it=>!!it),Ge=new Set(fe),Oe=gr.filter(it=>!Ge.has(it.title));return[...Re,...Oe]}}catch(oe){console.error("Failed to load or parse transformation order from localStorage",oe)}return gr}),[o,l]=ae.useState(null),[u,f]=ae.useState(null),[d,h]=ae.useState(null),[g,p]=ae.useState(null),[v,C]=ae.useState(null),[S,T]=ae.useState([]),[w,_]=ae.useState(null),[N,R]=ae.useState(!1),[k,I]=ae.useState(""),[H,A]=ae.useState(null),[U,P]=ae.useState(null),[Y,B]=ae.useState(null),[q,le]=ae.useState([]),[z,W]=ae.useState(0),[M,Z]=ae.useState(""),[O,j]=ae.useState("none"),[Se,de]=ae.useState([]),[V,F]=ae.useState(!1),[J,pe]=ae.useState(8),[$,X]=ae.useState(0),[ne,be]=ae.useState(!1),[ve,te]=ae.useState(""),[Ee,Ne]=ae.useState(""),[Le,qe]=ae.useState("✨"),[b,ge]=ae.useState(!1),[he,G]=ae.useState(""),[L,ee]=ae.useState(null),[xe,Te]=ae.useState(null),[re,Ae]=ae.useState({}),[De,Me]=ae.useState({}),[Ue,Fe]=ae.useState(!1),[He,je]=ae.useState(!1),[cn,Et]=ae.useState(""),[fn,et]=ae.useState(""),[dn,tn]=ae.useState("success"),[ct,Rt]=ae.useState(()=>[{id:"group-1",name:"nano-banana",configs:[{id:"default-gemini",name:"默认Gemini",type:"gemini",baseUrl:"https://generativelanguage.googleapis.com",apiKeys:"",model:"gemini-2.5-flash-image-preview",isActive:!0,createdAt:new Date().toISOString()}],activeConfigId:"default-gemini"}]),[Kt,Wn]=ae.useState("group-1"),[Wi,Nn]=ae.useState(!1),[gt,Jt]=ae.useState(null),[Kl,eo]=ae.useState(!1),[Lt,mn]=ae.useState({type:"gemini",baseUrl:"https://generativelanguage.googleapis.com",model:"gemini-2.5-flash-image-preview"}),Xe=ae.useCallback((oe,fe="success")=>{et(oe),tn(fe),setTimeout(()=>{et("")},3e3)},[]);ae.useEffect(()=>{if(fn){const oe=setTimeout(()=>{et("")},3e3);return()=>clearTimeout(oe)}},[fn]),ae.useEffect(()=>{(()=>{try{const fe=localStorage.getItem("api_groups"),we=localStorage.getItem("active_group_id");if(fe){const Re=JSON.parse(fe);Rt(Re),we&&Wn(we)}else{const Re=localStorage.getItem("gemini_api_key");Re&&(Rt(Ge=>{const Oe=[...Ge],it=Oe.find(Tt=>Tt.id==="group-1");if(it){const Tt=it.configs.find(ot=>ot.id==="default-gemini");Tt&&(Tt.apiKeys=Re)}return Oe}),localStorage.removeItem("gemini_api_key"))}_n(!0)}catch(fe){console.error("加载API配置失败:",fe),_n(!0)}})()},[]);const[Zl,_n]=ae.useState(!1);ae.useEffect(()=>{if(Zl)try{localStorage.setItem("api_groups",JSON.stringify(ct)),localStorage.setItem("active_group_id",Kt)}catch(oe){console.error("保存API配置失败:",oe)}},[ct,Kt,Zl]),ae.useEffect(()=>{try{const oe=n.map(fe=>fe.title);localStorage.setItem("transformationOrder",JSON.stringify(oe))}catch(oe){console.error("Failed to save transformation order to localStorage",oe)}},[n]);const Nt=oe=>{if(oe.prompt==="CUSTOM"){l(oe),ge(!0),G(""),_(null),A(null),Z("");return}l(oe),_(null),A(null),Z(""),ge(!1)},qt=ae.useCallback(()=>{he.trim()&&(te(he.trim()),be(!0))},[he]),ei=ae.useCallback(()=>{if(!Ee.trim()||!ve.trim())return;const oe={id:`custom-${Date.now()}`,title:`自定义（${Ee.trim()}）`,prompt:ve.trim(),emoji:Le,description:`自定义提示词：${Ee.trim()}`,isCustom:!0,isEditable:!0};e(Re=>{const Ge=Re.findIndex(Oe=>Oe.id==="custom-prompt");if(Ge!==-1){const Oe=[...Re];return Oe.splice(Ge+1,0,oe),Oe}else return[oe,...Re]});const fe=localStorage.getItem("customPrompts"),we=fe?JSON.parse(fe):[];we.unshift({id:oe.id,title:Ee.trim(),prompt:ve.trim(),emoji:Le,createdAt:new Date().toISOString()}),localStorage.setItem("customPrompts",JSON.stringify(we)),Ne(""),te(""),qe("✨"),be(!1),ge(!1),G(""),l(oe),Xe(`自定义提示词"${Ee.trim()}"已创建`,"success")},[Ee,ve,Le,Xe]),to=ae.useCallback((oe,fe)=>{if(oe==="custom-prompt"){Z(fe),Xe("自定义提示词已更新","success");return}e(Re=>Re.map(Ge=>{if((Ge.id||Ge.title)===oe){const it=Ge.originalPrompt||Ge.prompt;return{...Ge,prompt:fe,isPromptModified:fe!==it}}return Ge})),l(Re=>{if(!Re||(Re.id||Re.title)!==oe)return Re;const Oe=Re.originalPrompt||Re.prompt;return{...Re,prompt:fe,isPromptModified:fe!==Oe}});const we=localStorage.getItem("customPrompts");if(we){const Ge=JSON.parse(we).map(Oe=>Oe.id===oe?{...Oe,prompt:fe}:Oe);localStorage.setItem("customPrompts",JSON.stringify(Ge))}Xe("提示词已更新","success")},[Xe]),Nr=ae.useCallback(oe=>{e(we=>we.filter(Re=>Re.id!==oe));const fe=localStorage.getItem("customPrompts");if(fe){const Re=JSON.parse(fe).filter(Ge=>Ge.id!==oe);localStorage.setItem("customPrompts",JSON.stringify(Re))}Xe("自定义提示词已删除","success")},[Xe]),$l=ae.useCallback(oe=>{if(!confirm("确定要恢复此项目的默认提示词吗？此操作不可撤销。"))return;const fe=gr.find(we=>(we.id||we.title)===oe);if(fe){const we=fe.originalPrompt||fe.prompt;e(Re=>Re.map(Ge=>(Ge.id||Ge.title)===oe?{...Ge,prompt:we,isPromptModified:!1}:Ge)),l(Re=>!Re||(Re.id||Re.title)!==oe?Re:{...Re,prompt:we,isPromptModified:!1}),o&&(o.id||o.title)===oe&&o.prompt==="CUSTOM"&&Z(""),Xe("已恢复默认提示词","success")}},[o,Xe]),Oo=ae.useCallback((oe,fe)=>{const we={...re,[oe]:fe};Ae(we),localStorage.setItem("constantPrompts",JSON.stringify(we)),Xe("常量提示词已更新","success")},[re,Xe]),Dn=ae.useCallback(oe=>re[oe]||"",[re]),no=ae.useCallback((oe,fe)=>{const we=Dn(oe);return we.trim()?`${we.trim()} ${fe.trim()}`.trim():fe.trim()},[Dn]),ti=ae.useCallback((oe,fe)=>{const we={...De,[oe]:fe};Me(we),localStorage.setItem("customCovers",JSON.stringify(we)),Xe("自定义封面已保存","success")},[De,Xe]),ni=ae.useCallback(oe=>{const fe={...De};delete fe[oe],Me(fe),localStorage.setItem("customCovers",JSON.stringify(fe)),Xe("已恢复默认封面","success")},[De,Xe]),ki=ae.useCallback(oe=>{const fe=oe.id||oe.title;return De[fe]||oe.emoji},[De]),ii=ae.useCallback(oe=>{const fe=oe.id||oe.title;return!!De[fe]},[De]);ae.useEffect(()=>{const oe=localStorage.getItem("customPrompts");if(oe)try{const Ge=JSON.parse(oe).map(Oe=>({id:Oe.id,title:`自定义（${Oe.title}）`,prompt:Oe.prompt,emoji:Oe.emoji,description:`自定义提示词：${Oe.title}`,isCustom:!0,isEditable:!0}));e(Oe=>{const it=new Set(Oe.map(Dt=>Dt.id)),Tt=Ge.filter(Dt=>!it.has(Dt.id));if(Tt.length===0)return Oe;const ot=Oe.findIndex(Dt=>Dt.id==="custom-prompt");if(ot!==-1){const Dt=[...Oe];return Dt.splice(ot+1,0,...Tt),Dt}else return[...Tt,...Oe]})}catch(Re){console.error("加载自定义提示词失败:",Re)}const fe=localStorage.getItem("constantPrompts");if(fe)try{const Re=JSON.parse(fe);Ae(Re)}catch(Re){console.error("加载常量提示词失败:",Re)}const we=localStorage.getItem("customCovers");if(we)try{const Re=JSON.parse(we);Me(Re)}catch(Re){console.error("加载自定义封面失败:",Re)}},[]);const xt=ae.useCallback(async(oe,fe)=>{h(oe),f(fe),_(null),A(null),P(null),j("none");try{console.log("开始尝试从上传的图片中提取元数据..."),console.log("图片格式:",fe.split(",")[0]);const we=await Pw(fe);if(console.log("提取到的元数据:",we),we&&(we.prompt||we.style||we.timestamp)){Te(we);const Re=[];we.prompt&&Re.push(`提示词: ${we.prompt.slice(0,30)}${we.prompt.length>30?"...":""}`),we.style&&Re.push(`风格: ${we.style}`),Xe(`检测到图片元数据：${Re.join(", ")}`,"success")}else console.log("未找到提示词元数据"),Te(null)}catch(we){console.error("读取图片元数据失败:",we),Te(null)}},[n,Xe]),Ql=ae.useCallback((oe,fe)=>{C(oe),p(fe),_(null),A(null)},[]),Yo=()=>{f(null),h(null),_(null),A(null),P(null),j("none"),Te(null)},Bn=()=>{p(null),C(null)},oi=ae.useCallback(oe=>{const fe=oe.map(we=>new Promise(Re=>{const Ge=new FileReader;Ge.onload=Oe=>{var it;return Re((it=Oe.target)==null?void 0:it.result)},Ge.readAsDataURL(we)}));Promise.all(fe).then(we=>{T(Re=>[...Re,...we])})},[]),Dr=ae.useCallback(oe=>{T(fe=>fe.filter((we,Re)=>Re!==oe))},[]),jl=ae.useCallback(()=>{T([])},[]),Wl=ae.useCallback(async()=>{if(!u||!o){A("请上传图像并选择效果。");return}if(o.isMultiImage&&!g){A("请上传两张必需的图像。");return}const oe=o.prompt==="CUSTOM"?M:o.prompt,fe=o.id||o.title,we=no(fe,oe);if(!oe.trim()){A("请输入描述你想要看到的变化的提示词。");return}R(!0),A(null),_(null),I(""),X(0);try{const Re=u.split(";")[0].split(":")[1]??"image/png",Ge=u.split(",")[1],Oe=U?U.split(",")[1]:null;let it=null;if(g){const ot=g.split(";")[0].split(":")[1]??"image/png";it={base64:g.split(",")[1],mimeType:ot}}const Tt=S.map(ot=>({base64:ot.split(",")[1],mimeType:ot.split(";")[0].split(":")[1]??"image/png"}));if(o.isTwoStep){I("第一步：创建线稿...");const ot=await zu(Ge,Re,we,null,null);if(!ot.imageUrl)throw new Error("第一步（线稿）生成失败。");I("第二步：应用调色板...");const Dt=ot.imageUrl.split(",")[1],hn=ot.imageUrl.split(";")[0].split(":")[1]??"image/png";if(o.isMultiImage&&g&&u){const _t=await Yw(u),Bt=await Jw(g,_t),bn=Bt.split(";")[0].split(":")[1]??"image/png";it={base64:Bt.split(",")[1],mimeType:bn}}const kt=await zu(Dt,hn,o.stepTwoPrompt,null,it,Tt);kt.imageUrl&&(kt.imageUrl=await wr(kt.imageUrl,{prompt:we,style:o.title}),kt.imageUrl=await Gu(kt.imageUrl,"Nano Bananary｜ZHO"));const zt={imageUrl:kt.imageUrl,text:kt.text,secondaryImageUrl:ot.imageUrl,concurrentCount:1,generatedAt:new Date,prompt:we,style:o.title};_(zt),de(_t=>[zt,..._t])}else{I(`正在并发生成 ${J} 张图像...`);const ot=Array.from({length:J},async(zt,_t)=>{try{const Bt=await zu(Ge,Re,we,Oe,it,Tt);return Bt.imageUrl&&(Bt.imageUrl=await wr(Bt.imageUrl,{prompt:we,style:o.title}),Bt.imageUrl=await Gu(Bt.imageUrl,"Nano Bananary｜ZHO")),X(bn=>bn+1),Bt.imageUrl}catch(Bt){return console.error(`生成第 ${_t+1} 张图片时出错:`,Bt),null}}),hn=(await Promise.all(ot)).filter(zt=>zt!==null);if(hn.length===0)throw new Error("所有图片生成都失败了。");const kt={imageUrl:hn[0],text:null,images:hn,concurrentCount:J,generatedAt:new Date,prompt:we,style:o.title};_(kt),de(zt=>[kt,...zt])}}catch(Re){console.error(Re),A(Re instanceof Error?Re.message:"生成过程中发生未知错误。")}finally{R(!1),I(""),X(0)}},[u,g,o,U,M,J]),ea=ae.useCallback(async oe=>{if(oe)try{const fe=await Ow(oe,`edited-${Date.now()}.png`);h(fe),f(oe),_(null),A(null),P(null),j("none"),C(null),p(null),l(null)}catch(fe){console.error("Failed to use image as input:",fe),A("Could not use the generated image as a new input.")}},[]),Ii=()=>F(oe=>!oe),io=oe=>{ea(oe),F(!1)},wn=async(oe,fe)=>{const we=(w==null?void 0:w.prompt)||"",Re=(w==null?void 0:w.style)||"";await Zw(oe,fe,{prompt:we,style:Re})},Jo=()=>{l(null),ge(!1),G(""),je(!1),Et("")},ta=()=>{if(o){const oe=o.prompt==="CUSTOM"?M:o.prompt;Et(oe),je(!0)}},li=()=>{if(!o||!cn.trim())return;const oe=o.id||o.title;to(oe,cn.trim()),je(!1),Et(""),Xe("提示词已更新","success")},Xo=()=>{je(!1),Et("")},Ko=()=>{if(!o)return;const oe=o.id||o.title;$l(oe),je(!1),Et("")},na=ae.useCallback(()=>{const oe=ct.find(fe=>fe.id===Kt);return!oe||!oe.activeConfigId?null:oe.configs.find(fe=>fe.id===oe.activeConfigId)||null},[ct,Kt]),ia=ae.useCallback(()=>{const oe=ct.length+1,fe={id:`group-${oe}`,name:`${oe}`,configs:[],activeConfigId:null};Rt(we=>[...we,fe]),Xe(`组${oe} 已创建`,"success")},[ct.length,Xe]),Zt=ae.useCallback((oe,fe)=>{Rt(we=>we.map(Re=>Re.id===oe?{...Re,name:fe}:Re)),Xe("组名已更新","success")},[Xe]),oa=ae.useCallback(oe=>{if(ct.length<=1){Xe("至少需要保留一个组","error");return}if(Rt(fe=>fe.filter(we=>we.id!==oe)),Kt===oe){const fe=ct.filter(we=>we.id!==oe);fe.length>0&&Wn(fe[0].id)}Xe("组已删除","success")},[ct,Kt,Xe]),kr=ae.useCallback(()=>{if(!Lt.name||!Lt.apiKeys){Xe("请填写配置名称和API Key","error");return}const oe={id:`config-${Date.now()}`,name:Lt.name,type:Lt.type||"gemini",baseUrl:Lt.baseUrl||"https://generativelanguage.googleapis.com",apiKeys:Lt.apiKeys,model:Lt.model,isActive:!0,createdAt:new Date().toISOString()};Rt(fe=>fe.map(we=>we.id===Kt?{...we,configs:[...we.configs,oe],activeConfigId:we.activeConfigId||oe.id}:we)),mn({type:"gemini",baseUrl:"https://generativelanguage.googleapis.com",model:"gemini-2.5-flash-image-preview"}),eo(!1),Xe("配置已创建","success")},[Lt,Kt,Xe]),oo=ae.useCallback((oe,fe)=>{Rt(we=>we.map(Re=>({...Re,configs:Re.configs.map(Ge=>Ge.id===oe?{...Ge,...fe}:Ge)}))),Xe("配置已更新","success")},[Xe]),la=ae.useCallback(oe=>{Rt(fe=>fe.map(we=>{const Re=we.configs.filter(Ge=>Ge.id!==oe);return{...we,configs:Re,activeConfigId:we.activeConfigId===oe?Re.length>0?Re[0].id:null:we.activeConfigId}})),Xe("配置已删除","success")},[Xe]),lo=ae.useCallback((oe,fe)=>{Rt(we=>we.map(Re=>Re.id===oe?{...Re,activeConfigId:fe}:Re))},[]),Ir=()=>{l(null),f(null),h(null),p(null),C(null),_(null),A(null),R(!1),P(null),Z(""),j("none"),ee(null),Fe(!1)},$t=ae.useCallback((oe,fe,we)=>{B(oe),fe&&fe.length>1?(le(fe),W(we||fe.indexOf(oe)||0)):(le([]),W(0))},[]),Zo=ae.useCallback(()=>{B(null),le([]),W(0)},[]),aa=()=>{j(oe=>oe==="mask"?"none":"mask"),O!=="mask"&&(ee(null),Fe(!1))},$o=()=>{j(oe=>oe==="selection"?"none":"selection"),O!=="selection"?P(null):(ee(null),Fe(!1))},ai=ae.useCallback(async()=>{if(!u||!L||!o){A("请选择图像区域和变换效果。");return}const oe=o.prompt==="CUSTOM"?M:o.prompt,fe=o.id||o.title,we=no(fe,oe);if(!oe.trim()){A("请输入描述你想要看到的变化的提示词。");return}if(L.width<20||L.height<20){A("选择区域太小，请选择至少20×20像素的区域。");return}if(L.width>2048||L.height>2048){A("选择区域太大，请选择小于2048×2048像素的区域。");return}R(!0),A(null),_(null),X(0);const Re=J;let Ge=0;I(`正在进行局部重绘 (0/${Re})...`);try{I("第一步：裁剪选定区域...");const Oe=await nb(u,L),it=Array.from({length:Re},async(kt,zt)=>{try{I(`正在处理第 ${zt+1}/${Re} 个重绘...`);const _t=await Rw(Oe,"image/png",we);if(!_t.imageUrl)throw new Error(`第 ${zt+1} 个重绘失败，AI没有返回处理后的图像`);const Bt=await ib(u,_t.imageUrl,L),bn=await wr(Bt,{prompt:we,style:o.title}),En=await Gu(bn,"Nano Bananary｜ZHO");return Ge++,X(Ge),I(`局部重绘进度 (${Ge}/${Re})...`),En}catch(_t){return console.error(`局部重绘 ${zt+1} 错误:`,_t),Ge++,X(Ge),null}}),ot=(await Promise.all(it)).filter(kt=>kt!==null);if(ot.length===0)throw new Error("所有局部重绘请求都失败了，请检查网络连接或稍后重试");const Dt={imageUrl:ot[0],text:`局部重绘完成 - 区域: ${L.width}×${L.height}px`,images:ot,concurrentCount:Re,generatedAt:new Date,prompt:we,style:o.title};_(Dt),de(kt=>[Dt,...kt]);const hn=Re-ot.length;hn>0?Xe(`局部重绘完成！成功 ${ot.length}/${Re} 个，${hn} 个失败`,"success"):Xe(`局部重绘全部完成！生成了 ${ot.length} 个版本`,"success")}catch(Oe){console.error("局部重绘错误:",Oe),A(Oe instanceof Error?Oe.message:"局部重绘过程中发生错误")}finally{R(!1),I(""),X(0)}},[u,L,o,M,J,Xe]),ra=(o==null?void 0:o.prompt)==="CUSTOM"&&!M.trim(),sa=u,ri=o!=null&&o.isMultiImage?u&&g:!!u,ua=N||b||ra||!sa&&!ri&&!(O==="selection"&&L&&u);return x.jsxs("div",{className:"min-h-screen bg-black text-gray-300 font-sans",children:[x.jsx("header",{className:"bg-black/60 backdrop-blur-lg sticky top-0 z-20 p-4 border-b border-white/10",children:x.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[x.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-yellow-400 cursor-pointer",onClick:Ir,children:["🍌 Nano Bananary｜ZHO ",x.jsx("span",{className:"text-sm font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"魔改版"})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("button",{onClick:()=>Nn(!0),className:"flex items-center gap-2 py-2 px-3 text-sm font-semibold text-gray-200 bg-gray-800/50 rounded-md hover:bg-gray-700/50 transition-colors duration-200","aria-label":"API Settings",title:"API设置",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),x.jsx("span",{className:`${na()?"text-green-400":"text-gray-400"}`,children:na()?"API已设置":"API设置"})]}),x.jsxs("button",{onClick:Ii,className:"flex items-center gap-2 py-2 px-3 text-sm font-semibold text-gray-200 bg-gray-800/50 rounded-md hover:bg-gray-700/50 transition-colors duration-200","aria-label":"Toggle generation history",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),x.jsx("span",{children:"历史记录"})]})]})]})}),x.jsx("main",{children:o?x.jsxs("div",{className:"container mx-auto p-4 md:p-8 animate-fade-in",children:[x.jsx("div",{className:"mb-8",children:x.jsxs("button",{onClick:Jo,className:"flex items-center gap-2 text-orange-500 hover:text-orange-400 transition-colors duration-200 py-2 px-4 rounded-lg hover:bg-gray-900",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"选择其他效果"]})}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[x.jsx("div",{className:"flex flex-col gap-6 p-6 bg-gray-950/60 backdrop-blur-lg rounded-xl border border-white/10 shadow-2xl shadow-black/20",children:x.jsxs("div",{children:[x.jsxs("div",{className:"mb-4",children:[x.jsxs("h2",{className:"text-xl font-semibold mb-1 text-orange-500 flex items-center gap-3",children:[x.jsx("span",{className:"text-3xl",children:o.emoji}),o.title]}),x.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-white/10",children:[x.jsx("div",{className:"flex items-center justify-between mb-2",children:x.jsxs("label",{className:"text-sm font-medium text-gray-200 flex items-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-purple-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"常量提示词前缀"]})}),x.jsx("textarea",{value:Dn(o.id||o.title),onChange:oe=>{const fe=o.id||o.title;Oo(fe,oe.target.value)},placeholder:"输入常量提示词，将自动添加到所有提示词前面...",rows:2,className:"w-full p-3 bg-gray-800 border border-white/20 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors text-gray-200 text-sm placeholder-gray-500"}),x.jsx("div",{className:"mt-2 text-xs text-gray-400",children:"💡 常量提示词会自动加在所有提示词前面，用于设置固定的风格或参数"})]}),x.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-white/10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{className:"text-sm font-medium text-gray-200",children:"当前提示词"}),x.jsxs("div",{className:"flex items-center gap-2",children:[o.isPromptModified&&x.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-500/20 text-yellow-400 rounded-full border border-yellow-500/30",children:"已修改"}),He?x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:li,disabled:!cn.trim(),className:"px-2 py-1 text-xs bg-green-600 hover:bg-green-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded transition-colors",children:"保存"}),x.jsx("button",{onClick:Xo,className:"px-2 py-1 text-xs bg-gray-600 hover:bg-gray-500 text-white rounded transition-colors",children:"取消"})]}):x.jsx("button",{onClick:ta,className:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",children:"编辑"}),o.isPromptModified&&x.jsx("button",{onClick:Ko,className:"px-2 py-1 text-xs bg-orange-600 hover:bg-orange-500 text-white rounded transition-colors",children:"重置"})]})]}),He?x.jsx("textarea",{value:cn,onChange:oe=>Et(oe.target.value),rows:4,className:"w-full p-3 bg-gray-800 border border-white/20 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors text-gray-200 text-sm",placeholder:"输入提示词..."}):x.jsx("div",{className:"p-3 bg-gray-800 border border-white/20 rounded-lg text-gray-300 text-sm min-h-16 max-h-32 overflow-y-auto",children:(()=>{const oe=o.prompt==="CUSTOM"?M||"请先输入自定义提示词":o.prompt,fe=o.id||o.title,we=Dn(fe);return we.trim()&&oe!=="请先输入自定义提示词"?x.jsxs("div",{children:[x.jsx("span",{className:"text-purple-300 font-medium",children:"[常量前缀] "}),x.jsx("span",{className:"text-purple-200",children:we.trim()}),x.jsx("br",{}),x.jsx("span",{className:"text-gray-300",children:oe})]}):oe})()})]}),o.prompt==="CUSTOM"&&b?x.jsxs("div",{className:"mt-2 space-y-4",children:[x.jsx("p",{className:"text-gray-400",children:o.description}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"输入你的自定义提示词："}),x.jsx("textarea",{value:he,onChange:oe=>G(oe.target.value),placeholder:"例如：'让天空变成绚烂的日落' 或 '在水面上添加一艘小红船'",rows:4,className:"w-full p-3 bg-gray-900 border border-white/20 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors placeholder-gray-500"})]}),x.jsxs("button",{onClick:qt,disabled:!he.trim(),className:"w-full py-2 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold rounded-lg hover:from-green-600 hover:to-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"保存为自定义提示词"]})]}):o.prompt==="CUSTOM"?x.jsx("textarea",{value:M,onChange:oe=>Z(oe.target.value),placeholder:"例如：'让天空变成绚烂的日落' 或 '在水面上添加一艘小红船'",rows:3,className:"w-full mt-2 p-3 bg-gray-900 border border-white/20 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors placeholder-gray-500"}):x.jsx("p",{className:"text-gray-400",children:o.description})]}),xe&&x.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-lg border border-white/10",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsxs("label",{className:"text-sm font-medium text-gray-200 flex items-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"图片元数据"]}),x.jsx("button",{onClick:()=>Te(null),className:"text-xs text-gray-400 hover:text-gray-200 transition-colors",children:"隐藏"})]}),xe.prompt&&x.jsxs("div",{className:"mb-3",children:[x.jsxs("div",{className:"flex items-center justify-between mb-1",children:[x.jsx("span",{className:"text-xs font-medium text-blue-300",children:"提示词"}),x.jsxs("button",{onClick:()=>navigator.clipboard.writeText(xe.prompt),className:"text-xs text-gray-400 hover:text-blue-300 transition-colors flex items-center gap-1",children:[x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),x.jsx("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]}),"复制"]})]}),x.jsx("div",{className:"p-2 bg-gray-800 border border-white/20 rounded text-gray-300 text-xs max-h-20 overflow-y-auto",children:xe.prompt})]})]}),o.isMultiImage?x.jsx(Qw,{onPrimarySelect:xt,onSecondarySelect:Ql,primaryImageUrl:u,secondaryImageUrl:g,onClearPrimary:Yo,onClearSecondary:Bn,primaryTitle:o.primaryUploaderTitle,primaryDescription:o.primaryUploaderDescription,secondaryTitle:o.secondaryUploaderTitle,secondaryDescription:o.secondaryUploaderDescription}):x.jsx("div",{children:O==="selection"?x.jsx(tb,{imageUrl:u,onSelectionChange:ee,isActive:O==="selection",onClearSelection:()=>ee(null)}):x.jsx(Fw,{onImageSelect:xt,initialImageUrl:u,onMaskChange:P,onClearImage:Yo,isMaskToolActive:O==="mask"})}),x.jsx(jw,{imageUrls:S,onAddImages:oi,onRemoveImage:Dr,onClearAll:jl}),u&&!o.isMultiImage&&x.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2",children:[x.jsxs("button",{onClick:aa,className:`flex items-center justify-center gap-2 py-2 px-3 text-sm font-semibold rounded-md transition-colors duration-200 ${O==="mask"?"bg-gradient-to-r from-orange-500 to-yellow-400 text-black":"bg-gray-800 hover:bg-gray-700 text-gray-200"}`,children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),x.jsx("span",{children:"🖌️ 蒙版"})]}),x.jsxs("button",{onClick:$o,className:`flex items-center justify-center gap-2 py-2 px-3 text-sm font-semibold rounded-md transition-colors duration-200 ${O==="selection"?"bg-gradient-to-r from-purple-500 to-purple-600 text-white":"bg-gray-800 hover:bg-gray-700 text-gray-200"}`,children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),x.jsx("span",{children:"✂️ 局部重绘"})]})]}),u&&!(o!=null&&o.isTwoStep)&&x.jsxs("div",{className:"mt-4 p-4 bg-gray-900/50 rounded-lg border border-white/10",children:[x.jsx("label",{htmlFor:"concurrent-count",className:"block text-sm font-medium text-gray-200 mb-2",children:O==="selection"&&L?"并发重绘数量":"并发生成数量"}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("input",{id:"concurrent-count",type:"number",min:"1",max:"99",value:J,onChange:oe=>pe(Math.max(1,Math.min(99,parseInt(oe.target.value)||1))),className:"flex-1 px-3 py-2 bg-gray-800 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors"}),x.jsx("span",{className:"text-sm text-gray-400",children:"张图片"})]}),N&&$>0&&x.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["进度: ",$,"/",J]}),O==="selection"&&L&&x.jsx("div",{className:"mt-2 text-xs text-purple-400",children:"💡 局部重绘也支持并发，一次生成多个版本供您选择"})]}),x.jsx("button",{onClick:O==="selection"&&L?ai:Wl,disabled:ua,className:`w-full mt-6 py-3 px-4 font-semibold rounded-lg shadow-lg hover:from-orange-600 hover:to-yellow-500 disabled:bg-gray-800 disabled:from-gray-800 disabled:to-gray-800 disabled:text-gray-500 disabled:shadow-none disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center gap-2 ${O==="selection"&&L?"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-purple-500/20":"bg-gradient-to-r from-orange-500 to-yellow-400 text-black shadow-orange-500/20"}`,children:N?x.jsxs(x.Fragment,{children:[x.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),x.jsx("span",{children:O==="selection"&&L?"局部重绘中...":"生成中..."})]}):x.jsxs(x.Fragment,{children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),x.jsx("span",{children:O==="selection"&&L?"✂️ 局部重绘":"✨ 生成图像"})]})})]})}),x.jsxs("div",{className:"flex flex-col p-6 bg-gray-950/60 backdrop-blur-lg rounded-xl border border-white/10 shadow-2xl shadow-black/20",children:[x.jsx("h2",{className:"text-xl font-semibold mb-4 text-orange-500 self-start",children:"结果"}),N&&x.jsx("div",{className:"flex-grow flex items-center justify-center",children:x.jsx(Hw,{message:k})}),H&&x.jsx("div",{className:"flex-grow flex items-center justify-center w-full",children:x.jsx(qw,{message:H})}),!N&&!H&&w&&x.jsx(Vw,{content:w,onUseImageAsInput:ea,onImageClick:$t,originalImageUrl:u,currentPrompt:(w==null?void 0:w.prompt)||"",currentStyle:(w==null?void 0:w.style)||""}),!N&&!H&&!w&&x.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-center text-gray-500",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),x.jsx("p",{className:"mt-2",children:"生成的图像将在这里显示。"})]})]})]})]}):x.jsx(Dw,{transformations:n,onSelect:Nt,hasPreviousResult:!!u,onOrderChange:e,onUpdatePrompt:to,onResetToDefault:$l,onDeleteCustom:Nr,currentCustomPrompt:M,constantPrompts:re,onUpdateConstantPrompt:Oo,getDisplayCover:ki,hasCustomCover:ii,onUpdateCustomCover:ti,onRemoveCustomCover:ni})}),x.jsx($w,{imageUrl:Y,onClose:Zo,imageUrls:q,initialIndex:z,currentPrompt:(w==null?void 0:w.prompt)||"",currentStyle:(w==null?void 0:w.style)||""}),x.jsx(eb,{isOpen:V,onClose:Ii,history:Se,onUseImage:io,onDownload:wn}),ne&&x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>be(!1),children:x.jsxs("div",{className:"bg-gray-900 p-6 rounded-xl border border-white/10 max-w-md w-full mx-4",onClick:oe=>oe.stopPropagation(),children:[x.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"创建自定义提示词"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"名称"}),x.jsx("input",{type:"text",value:Ee,onChange:oe=>Ne(oe.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"输入提示词名称"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"表情符号"}),x.jsx("input",{type:"text",value:Le,onChange:oe=>qe(oe.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"选择一个表情符号",maxLength:2})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"提示词内容"}),x.jsx("textarea",{value:ve,onChange:oe=>te(oe.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none",rows:4,placeholder:"输入你的自定义提示词"})]})]}),x.jsxs("div",{className:"flex gap-3 mt-6",children:[x.jsx("button",{onClick:ei,disabled:!Ee.trim()||!ve.trim(),className:"flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-yellow-400 text-black font-semibold rounded-lg hover:from-orange-600 hover:to-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"保存并使用"}),x.jsx("button",{onClick:()=>be(!1),className:"flex-1 py-2 px-4 bg-gray-700 text-gray-200 font-semibold rounded-lg hover:bg-gray-600 transition-colors duration-200",children:"取消"})]})]})}),Wi&&x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>Nn(!1),children:x.jsxs("div",{className:"bg-gray-900 p-6 rounded-xl border border-white/10 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:oe=>oe.stopPropagation(),children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-orange-500",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"API配置管理"]}),x.jsx("button",{onClick:()=>Nn(!1),className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),x.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[x.jsxs("div",{className:"col-span-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h4",{className:"text-lg font-medium text-white",children:"API组"}),x.jsx("button",{onClick:ia,className:"p-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors text-sm",title:"新建组",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})})]}),x.jsx("div",{className:"space-y-2",children:ct.map(oe=>x.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${Kt===oe.id?"bg-orange-500/20 border-orange-500":"bg-gray-800 border-white/10 hover:border-white/20"}`,onClick:()=>Wn(oe.id),children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("div",{className:"text-white font-medium",children:oe.name}),x.jsxs("div",{className:"text-gray-400 text-xs",children:[oe.configs.length," 个配置",oe.activeConfigId&&x.jsx("span",{className:"text-green-400 ml-2",children:"● 活跃"})]})]}),x.jsxs("div",{className:"flex gap-1",children:[x.jsx("button",{onClick:fe=>{fe.stopPropagation();const we=prompt("输入新的组名:",oe.name);we&&we.trim()&&Zt(oe.id,we.trim())},className:"p-1 text-gray-400 hover:text-blue-400 transition-colors",title:"重命名组",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),ct.length>1&&x.jsx("button",{onClick:fe=>{fe.stopPropagation(),confirm(`确定要删除组"${oe.name}"吗？`)&&oa(oe.id)},className:"p-1 text-gray-400 hover:text-red-400 transition-colors",title:"删除组",children:x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z",clipRule:"evenodd"}),x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})]})})]})]})},oe.id))})]}),x.jsx("div",{className:"col-span-8",children:(()=>{const oe=ct.find(fe=>fe.id===Kt);return oe?x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("h4",{className:"text-lg font-medium text-white",children:[oe.name," - API配置"]}),x.jsx("button",{onClick:()=>{eo(!0),mn({type:"gemini",baseUrl:"https://generativelanguage.googleapis.com",model:"gemini-2.5-flash-image-preview"})},className:"px-3 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors text-sm",children:"新建配置"})]}),Kl&&x.jsxs("div",{className:"mb-6 p-4 bg-gray-800 rounded-lg border border-white/10",children:[x.jsx("h5",{className:"text-white font-medium mb-4",children:"创建新配置"}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"配置名称"}),x.jsx("input",{type:"text",value:Lt.name||"",onChange:fe=>mn(we=>({...we,name:fe.target.value})),placeholder:"例如：Gemini Pro",className:"w-full px-3 py-2 bg-gray-700 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API类型"}),x.jsxs("select",{value:Lt.type||"gemini",onChange:fe=>mn(we=>({...we,type:fe.target.value,baseUrl:fe.target.value==="gemini"?"https://generativelanguage.googleapis.com":"https://api.openai.com",model:fe.target.value==="gemini"?"gemini-2.5-flash-image-preview":"gpt-4-vision-preview"})),className:"w-full px-3 py-2 bg-gray-700 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[x.jsx("option",{value:"gemini",children:"Gemini"}),x.jsx("option",{value:"openai",children:"OpenAI兼容"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API地址"}),x.jsx("input",{type:"text",value:Lt.baseUrl||"",onChange:fe=>mn(we=>({...we,baseUrl:fe.target.value})),placeholder:"API基础地址",className:"w-full px-3 py-2 bg-gray-700 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"模型"}),x.jsx("input",{type:"text",value:Lt.model||"",onChange:fe=>mn(we=>({...we,model:fe.target.value})),placeholder:"模型名称",className:"w-full px-3 py-2 bg-gray-700 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),x.jsxs("div",{className:"col-span-2",children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:["API Keys ",x.jsx("span",{className:"text-gray-400",children:"(支持多个，用英文逗号分隔实现轮询)"})]}),x.jsx("textarea",{value:Lt.apiKeys||"",onChange:fe=>mn(we=>({...we,apiKeys:fe.target.value})),placeholder:"API_KEY1,API_KEY2,API_KEY3",rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),x.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"多个API Key用逗号分隔，系统会自动轮询使用，提高请求成功率"})]})]}),x.jsxs("div",{className:"flex gap-2 mt-4",children:[x.jsx("button",{onClick:kr,className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors",children:"创建"}),x.jsx("button",{onClick:()=>{eo(!1),mn({type:"gemini",baseUrl:"https://generativelanguage.googleapis.com",model:"gemini-2.5-flash-image-preview"})},className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:"取消"})]})]}),x.jsx("div",{className:"space-y-3",children:oe.configs.length===0?x.jsxs("div",{className:"text-center py-8 text-gray-400",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),x.jsx("p",{children:"还没有API配置"}),x.jsx("p",{className:"text-sm",children:'点击"新建配置"开始设置'})]}):oe.configs.map(fe=>x.jsx("div",{className:`p-4 rounded-lg border transition-colors ${oe.activeConfigId===fe.id?"bg-green-900/20 border-green-500":"bg-gray-800 border-white/10"}`,children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[x.jsx("h6",{className:"text-white font-medium",children:fe.name}),x.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${fe.type==="gemini"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-purple-500/20 text-purple-400 border border-purple-500/30"}`,children:fe.type==="gemini"?"Gemini":"OpenAI兼容"}),oe.activeConfigId===fe.id&&x.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-green-500/20 text-green-400 border border-green-500/30",children:"当前使用"})]}),x.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-400",children:"地址:"})," ",fe.baseUrl]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-400",children:"模型:"})," ",fe.model]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-gray-400",children:"API Keys:"}),x.jsxs("span",{className:"ml-1",children:[fe.apiKeys.split(",").filter(we=>we.trim()).length," 个",fe.apiKeys.split(",").filter(we=>we.trim()).length>1&&x.jsx("span",{className:"text-orange-400 ml-1",children:"(轮询)"})]})]})]})]}),x.jsxs("div",{className:"flex gap-2 ml-4",children:[oe.activeConfigId!==fe.id&&x.jsx("button",{onClick:()=>lo(oe.id,fe.id),className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white rounded text-xs transition-colors",children:"设为当前"}),x.jsx("button",{onClick:()=>Jt(fe),className:"p-1 text-gray-400 hover:text-blue-400 transition-colors",title:"编辑配置",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),x.jsx("button",{onClick:()=>{confirm(`确定要删除配置"${fe.name}"吗？`)&&la(fe.id)},className:"p-1 text-gray-400 hover:text-red-400 transition-colors",title:"删除配置",children:x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z",clipRule:"evenodd"}),x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})]})})]})]})},fe.id))})]}):null})()})]}),x.jsxs("div",{className:"mt-6 p-4 bg-blue-900/20 border border-blue-500/20 rounded-lg",children:[x.jsx("h5",{className:"text-blue-400 font-medium mb-2",children:"💡 使用指南"}),x.jsxs("div",{className:"text-blue-300 text-sm space-y-1",children:[x.jsxs("p",{children:["• ",x.jsx("strong",{children:"轮询功能:"})," API Keys支持逗号分隔多个key，系统会自动轮询使用"]}),x.jsxs("p",{children:["• ",x.jsx("strong",{children:"Gemini API:"})," 访问 ",x.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-200",children:"Google AI Studio"})," 获取免费API Key"]}),x.jsxs("p",{children:["• ",x.jsx("strong",{children:"OpenAI兼容:"})," 支持任何OpenAI API兼容的服务，如Claude、通义千问等"]}),x.jsxs("p",{children:["• ",x.jsx("strong",{children:"多组管理:"})," 可以创建多个组来管理不同场景的API配置"]})]})]})]})}),gt&&x.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-gray-900 p-6 rounded-xl border border-white/10 max-w-2xl w-full mx-4",children:[x.jsxs("h3",{className:"text-xl font-semibold text-white mb-4",children:["编辑配置 - ",gt.name]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"配置名称"}),x.jsx("input",{type:"text",value:gt.name,onChange:oe=>Jt(fe=>fe?{...fe,name:oe.target.value}:null),className:"w-full px-3 py-2 bg-gray-700 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API类型"}),x.jsxs("select",{value:gt.type,onChange:oe=>Jt(fe=>fe?{...fe,type:oe.target.value}:null),className:"w-full px-3 py-2 bg-gray-700 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[x.jsx("option",{value:"gemini",children:"Gemini"}),x.jsx("option",{value:"openai",children:"OpenAI兼容"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API地址"}),x.jsx("input",{type:"text",value:gt.baseUrl,onChange:oe=>Jt(fe=>fe?{...fe,baseUrl:oe.target.value}:null),className:"w-full px-3 py-2 bg-gray-700 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"模型"}),x.jsx("input",{type:"text",value:gt.model||"",onChange:oe=>Jt(fe=>fe?{...fe,model:oe.target.value}:null),className:"w-full px-3 py-2 bg-gray-700 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),x.jsxs("div",{className:"col-span-2",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"API Keys (多个用逗号分隔)"}),x.jsx("textarea",{value:gt.apiKeys,onChange:oe=>Jt(fe=>fe?{...fe,apiKeys:oe.target.value}:null),rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-white/20 rounded-md text-white focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),x.jsxs("div",{className:"flex gap-3 mt-6",children:[x.jsx("button",{onClick:()=>{gt&&(oo(gt.id,gt),Jt(null))},className:"flex-1 py-2 px-4 bg-green-600 hover:bg-green-500 text-white font-semibold rounded-lg transition-colors",children:"保存更改"}),x.jsx("button",{onClick:()=>Jt(null),className:"py-2 px-4 bg-gray-600 hover:bg-gray-500 text-white font-semibold rounded-lg transition-colors",children:"取消"})]})]})}),fn&&x.jsx("div",{className:`fixed top-20 right-4 z-50 px-6 py-3 rounded-lg shadow-lg transition-all duration-300 ease-in-out transform ${dn==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:x.jsxs("div",{className:"flex items-center gap-2",children:[dn==="success"?x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),x.jsx("span",{className:"text-sm font-medium",children:fn}),x.jsx("button",{onClick:()=>et(""),className:"ml-2 hover:bg-black/20 rounded p-1 transition-colors",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})]})},Fp=document.createElement("style");Fp.innerHTML=`
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in {
    animation: fadeIn 0.4s ease-out forwards;
  }
  @keyframes fadeInFast {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .animate-fade-in-fast {
    animation: fadeInFast 0.2s ease-out forwards;
  }
`;document.head.appendChild(Fp);const Op=document.getElementById("root");if(!Op)throw new Error("Could not find root element to mount to");const lb=ny.createRoot(Op);lb.render(x.jsx(K0.StrictMode,{children:x.jsx(ob,{})}));
